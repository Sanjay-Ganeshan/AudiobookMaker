<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tesseract: /mnt/data/src/tesseract-ocr/classify/kdtree.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00661.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">kdtree.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00662_source.html">kdtree.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00775_source.html">const.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00785_source.html">emalloc.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00787_source.html">freelist.h</a>&quot;</code><br/>
<code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;math.h&gt;</code><br/>
</div>
<p><a href="a00661_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00234.html">MinK&lt; Key, Value &gt;</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00136.html">MinK&lt; Key, Value &gt;::Element</a></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00210.html">KDTreeSearch</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adbeb54abd64e764a1b38688776d36f77"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#adbeb54abd64e764a1b38688776d36f77">Magnitude</a>(X)&#160;&#160;&#160;((X) &lt; 0 ? -(X) : (X))</td></tr>
<tr class="memitem:a5a33bfaa4d9dcac7939f99f721bf61b9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a5a33bfaa4d9dcac7939f99f721bf61b9">NodeFound</a>(N, K, D)&#160;&#160;&#160;(( (N)-&gt;Key == (K) ) &amp;&amp; ( (N)-&gt;Data == (D) ))</td></tr>
<tr class="memitem:a8904460bfbb91685971ab30c3025e0c5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a8904460bfbb91685971ab30c3025e0c5">MINSEARCH</a>&#160;&#160;&#160;-<a class="el" href="a00577.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a></td></tr>
<tr class="memitem:a322efe6a34504778ebc6b3e2264789d5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a322efe6a34504778ebc6b3e2264789d5">MAXSEARCH</a>&#160;&#160;&#160;<a class="el" href="a00577.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a92b996eb8120afe351d8e7ee82c96ece"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a92b996eb8120afe351d8e7ee82c96ece">MakeKDTree</a> (<a class="el" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> KeySize, const <a class="el" href="a00255.html">PARAM_DESC</a> KeyDesc[])</td></tr>
<tr class="memitem:a596422fd837fb6937c12be6b277423a0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a596422fd837fb6937c12be6b277423a0">KDStore</a> (<a class="el" href="a00209.html">KDTREE</a> *Tree, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *Key, void *Data)</td></tr>
<tr class="memitem:a270d3ef72c3f0097f249ca75c2aafa3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a270d3ef72c3f0097f249ca75c2aafa3c">KDDelete</a> (<a class="el" href="a00209.html">KDTREE</a> *Tree, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Key[], void *Data)</td></tr>
<tr class="memitem:a9a3e49226adc75b00fee5116b401f3e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a9a3e49226adc75b00fee5116b401f3e3">KDNearestNeighborSearch</a> (<a class="el" href="a00209.html">KDTREE</a> *Tree, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Query[], int QuerySize, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> MaxDistance, int *NumberOfResults, void **NBuffer, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> DBuffer[])</td></tr>
<tr class="memitem:abf3863949061899c45c47ec81c416234"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#abf3863949061899c45c47ec81c416234">KDWalk</a> (<a class="el" href="a00209.html">KDTREE</a> *Tree, <a class="el" href="a00777.html#adec17f7c242871b5c6efb7bdb4050b9e">void_proc</a> action, void *context)</td></tr>
<tr class="memitem:a37e4019555a2b5284b17237373913346"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a37e4019555a2b5284b17237373913346">FreeKDTree</a> (<a class="el" href="a00209.html">KDTREE</a> *Tree)</td></tr>
<tr class="memitem:a5f4c5e8b3eca7978c68bb22144feba82"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00208.html">KDNODE</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a5f4c5e8b3eca7978c68bb22144feba82">MakeKDNode</a> (<a class="el" href="a00209.html">KDTREE</a> *tree, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Key[], void *Data, int Index)</td></tr>
<tr class="memitem:a21cd787524746ef057017f6c2a543345"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a21cd787524746ef057017f6c2a543345">FreeKDNode</a> (<a class="el" href="a00208.html">KDNODE</a> *Node)</td></tr>
<tr class="memitem:ae84afcc393b15041bde2f6b3038a2db4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#ae84afcc393b15041bde2f6b3038a2db4">DistanceSquared</a> (int k, <a class="el" href="a00255.html">PARAM_DESC</a> *dim, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> p1[], <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> p2[])</td></tr>
<tr class="memitem:abc92dabbfb9cb69dd9a8375f20c68da1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#abc92dabbfb9cb69dd9a8375f20c68da1">ComputeDistance</a> (int k, <a class="el" href="a00255.html">PARAM_DESC</a> *dim, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> p1[], <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> p2[])</td></tr>
<tr class="memitem:adc5707bb9d0b49db3a13959b01117567"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#adc5707bb9d0b49db3a13959b01117567">Walk</a> (<a class="el" href="a00209.html">KDTREE</a> *tree, <a class="el" href="a00777.html#adec17f7c242871b5c6efb7bdb4050b9e">void_proc</a> action, void *context, <a class="el" href="a00208.html">KDNODE</a> *sub_tree, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> level)</td></tr>
<tr class="memitem:af3be65344ced84a11159bc0bea5de60f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#af3be65344ced84a11159bc0bea5de60f">InsertNodes</a> (<a class="el" href="a00209.html">KDTREE</a> *tree, <a class="el" href="a00208.html">KDNODE</a> *nodes)</td></tr>
<tr class="memitem:a59f352b6bc9971b0d7502d31060f7c44"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00661.html#a59f352b6bc9971b0d7502d31060f7c44">FreeSubTree</a> (<a class="el" href="a00208.html">KDNODE</a> *sub_tree)</td></tr>
</table>
<hr/><h2>Macro Definition Documentation</h2>
<a class="anchor" id="adbeb54abd64e764a1b38688776d36f77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Magnitude</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">X</td><td>)</td>
          <td>&#160;&#160;&#160;((X) &lt; 0 ? -(X) : (X))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00031">31</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a322efe6a34504778ebc6b3e2264789d5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAXSEARCH&#160;&#160;&#160;<a class="el" href="a00577.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00038">38</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8904460bfbb91685971ab30c3025e0c5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MINSEARCH&#160;&#160;&#160;-<a class="el" href="a00577.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00037">37</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5a33bfaa4d9dcac7939f99f721bf61b9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NodeFound</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">N, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">K, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">D&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;(( (N)-&gt;Key == (K) ) &amp;&amp; ( (N)-&gt;Data == (D) ))</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00032">32</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="abc92dabbfb9cb69dd9a8375f20c68da1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> ComputeDistance </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00255.html">PARAM_DESC</a> *&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>p1</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>p2</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00486">486</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                            {</div>
<div class="line">  <span class="keywordflow">return</span> sqrt(<a class="code" href="a00661.html#ae84afcc393b15041bde2f6b3038a2db4">DistanceSquared</a>(k, dim, p1, p2));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae84afcc393b15041bde2f6b3038a2db4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> DistanceSquared </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00255.html">PARAM_DESC</a> *&#160;</td>
          <td class="paramname"><em>dim</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>p1</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>p2</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00465">465</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                            {</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> total_distance = 0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (; k &gt; 0; k--, p1++, p2++, dim++) {</div>
<div class="line">    <span class="keywordflow">if</span> (dim-&gt;<a class="code" href="a00255.html#a6b9843466a3ddf33bfab18f85ca06501">NonEssential</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> dimension_distance = *p1 - *p2;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* if this dimension is circular - check wraparound distance */</span></div>
<div class="line">    <span class="keywordflow">if</span> (dim-&gt;<a class="code" href="a00255.html#a55807f1e0be0daba2a33380ea29b2f1d">Circular</a>) {</div>
<div class="line">      dimension_distance = <a class="code" href="a00661.html#adbeb54abd64e764a1b38688776d36f77">Magnitude</a>(dimension_distance);</div>
<div class="line">      <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> wrap_distance = dim-&gt;<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a> - dim-&gt;<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a> - dimension_distance;</div>
<div class="line">      dimension_distance = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(dimension_distance, wrap_distance);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    total_distance += dimension_distance * dimension_distance;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> total_distance;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a21cd787524746ef057017f6c2a543345"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FreeKDNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00208.html">KDNODE</a> *&#160;</td>
          <td class="paramname"><em>Node</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00407">407</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">  <a class="code" href="a00786.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a> ((<span class="keywordtype">char</span> *)Node);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a37e4019555a2b5284b17237373913346"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FreeKDTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>Tree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00346">346</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **  Parameters:</span></div>
<div class="line"><span class="comment"> **    Tree  tree data structure to be released</span></div>
<div class="line"><span class="comment"> **  Operation:</span></div>
<div class="line"><span class="comment"> **    This routine frees all memory which is allocated to the</span></div>
<div class="line"><span class="comment"> **    specified KD-tree.  This includes the data structure for</span></div>
<div class="line"><span class="comment"> **    the kd-tree itself plus the data structures for each node</span></div>
<div class="line"><span class="comment"> **    in the tree.  It does not include the Key and Data items</span></div>
<div class="line"><span class="comment"> **    which are pointed to by the nodes.  This memory is left</span></div>
<div class="line"><span class="comment"> **    untouched.</span></div>
<div class="line"><span class="comment"> **  Return: none</span></div>
<div class="line"><span class="comment"> **  Exceptions: none</span></div>
<div class="line"><span class="comment"> **  History:</span></div>
<div class="line"><span class="comment"> **    5/26/89, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00661.html#a59f352b6bc9971b0d7502d31060f7c44">FreeSubTree</a>(Tree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">  <a class="code" href="a00786.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(Tree);</div>
<div class="line">}                                <span class="comment">/* FreeKDTree */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a59f352b6bc9971b0d7502d31060f7c44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void FreeSubTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00208.html">KDNODE</a> *&#160;</td>
          <td class="paramname"><em>sub_tree</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00568">568</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                   {</div>
<div class="line">  <span class="keywordflow">if</span> (sub_tree != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00661.html#a59f352b6bc9971b0d7502d31060f7c44">FreeSubTree</a>(sub_tree-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">    <a class="code" href="a00661.html#a59f352b6bc9971b0d7502d31060f7c44">FreeSubTree</a>(sub_tree-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>);</div>
<div class="line">    <a class="code" href="a00786.html#ab462a857e5edf360ae4881bcc92a0bcf">memfree</a>(sub_tree);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* FreeSubTree */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af3be65344ced84a11159bc0bea5de60f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InsertNodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00208.html">KDNODE</a> *&#160;</td>
          <td class="paramname"><em>nodes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00558">558</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  <span class="keywordflow">if</span> (nodes == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00661.html#a596422fd837fb6937c12be6b277423a0">KDStore</a>(tree, nodes-&gt;<a class="code" href="a00208.html#a977838423c3b5e17ecfd0242c39a8202">Key</a>, nodes-&gt;<a class="code" href="a00208.html#afd5eeb76bcf3d1ba9b387e0cd4e9ce16">Data</a>);</div>
<div class="line">  <a class="code" href="a00661.html#af3be65344ced84a11159bc0bea5de60f">InsertNodes</a>(tree, nodes-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">  <a class="code" href="a00661.html#af3be65344ced84a11159bc0bea5de60f">InsertNodes</a>(tree, nodes-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a270d3ef72c3f0097f249ca75c2aafa3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KDDelete </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>Tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Key</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine deletes a node from Tree. The node to be deleted is specified by the Key for the node and the Data contents of the node. These two pointers must be identical to the pointers that were used for the node when it was originally stored in the tree. A node will be deleted from the tree only if its key and data pointers are identical to Key and Data respectively. The tree is re-formed by removing the affected subtree and inserting all elements but the root.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Tree</td><td>K-D tree to delete node from </td></tr>
    <tr><td class="paramname">Key</td><td>key of node to be deleted </td></tr>
    <tr><td class="paramname">Data</td><td>data contents of node to be deleted</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none</dd>
<dd>
History: 3/13/89, DSJ, Created. 7/13/89, DSJ, Specify node indirectly by key and data. </dd></dl>

<p>Definition at line <a class="el" href="a00661_source.html#l00269">269</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                    {</div>
<div class="line">  <span class="keywordtype">int</span> Level;</div>
<div class="line">  <a class="code" href="a00208.html">KDNODE</a> *Current;</div>
<div class="line">  <a class="code" href="a00208.html">KDNODE</a> *Father;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* initialize search at root of tree */</span></div>
<div class="line">  Father = &amp;(Tree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>);</div>
<div class="line">  Current = Father-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>;</div>
<div class="line">  Level = NextLevel(Tree, -1);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* search tree for node to be deleted */</span></div>
<div class="line">  <span class="keywordflow">while</span> ((Current != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) &amp;&amp; (!<a class="code" href="a00661.html#a5a33bfaa4d9dcac7939f99f721bf61b9">NodeFound</a> (Current, Key, Data))) {</div>
<div class="line">    Father = Current;</div>
<div class="line">    <span class="keywordflow">if</span> (Key[Level] &lt; Current-&gt;<a class="code" href="a00208.html#aba5d7ca0a419ab7ad6a7cbcdb79add07">BranchPoint</a>)</div>
<div class="line">      Current = Current-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      Current = Current-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>;</div>
<div class="line"></div>
<div class="line">    Level = NextLevel(Tree, Level);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (Current != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {         <span class="comment">/* if node to be deleted was found */</span></div>
<div class="line">    <span class="keywordflow">if</span> (Current == Father-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>) {</div>
<div class="line">      Father-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      Father-&gt;<a class="code" href="a00208.html#a448480738475fb5bdb2e35b51f40f1d1">LeftBranch</a> = Tree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[Level].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      Father-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      Father-&gt;<a class="code" href="a00208.html#a1c8fd73abb446c3ceaea4cb29ef60b2c">RightBranch</a> = Tree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[Level].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00661.html#af3be65344ced84a11159bc0bea5de60f">InsertNodes</a>(Tree, Current-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">    <a class="code" href="a00661.html#af3be65344ced84a11159bc0bea5de60f">InsertNodes</a>(Tree, Current-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>);</div>
<div class="line">    <a class="code" href="a00661.html#a59f352b6bc9971b0d7502d31060f7c44">FreeSubTree</a>(Current);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* KDDelete */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9a3e49226adc75b00fee5116b401f3e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KDNearestNeighborSearch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>Tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Query</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>QuerySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>MaxDistance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>NumberOfResults</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void **&#160;</td>
          <td class="paramname"><em>NBuffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>DBuffer</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00307">307</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **  Parameters:</span></div>
<div class="line"><span class="comment"> **    Tree    ptr to K-D tree to be searched</span></div>
<div class="line"><span class="comment"> **    Query    ptr to query key (point in D-space)</span></div>
<div class="line"><span class="comment"> **    QuerySize  number of nearest neighbors to be found</span></div>
<div class="line"><span class="comment"> **    MaxDistance  all neighbors must be within this distance</span></div>
<div class="line"><span class="comment"> **    NBuffer    ptr to QuerySize buffer to hold nearest neighbors</span></div>
<div class="line"><span class="comment"> **    DBuffer    ptr to QuerySize buffer to hold distances</span></div>
<div class="line"><span class="comment"> **          from nearest neighbor to query point</span></div>
<div class="line"><span class="comment"> **  Operation:</span></div>
<div class="line"><span class="comment"> **    This routine searches the K-D tree specified by Tree and</span></div>
<div class="line"><span class="comment"> **    finds the QuerySize nearest neighbors of Query.  All neighbors</span></div>
<div class="line"><span class="comment"> **    must be within MaxDistance of Query.  The data contents of</span></div>
<div class="line"><span class="comment"> **    the nearest neighbors</span></div>
<div class="line"><span class="comment"> **    are placed in NBuffer and their distances from Query are</span></div>
<div class="line"><span class="comment"> **    placed in DBuffer.</span></div>
<div class="line"><span class="comment"> **  Return: Number of nearest neighbors actually found</span></div>
<div class="line"><span class="comment"> **  Exceptions: none</span></div>
<div class="line"><span class="comment"> **  History:</span></div>
<div class="line"><span class="comment"> **    3/10/89, DSJ, Created.</span></div>
<div class="line"><span class="comment"> **    7/13/89, DSJ, Return contents of node instead of node itself.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00210.html">KDTreeSearch</a> <a class="code" href="a00793.html#a1d8af9328f064a9df6d6f88336dd054e">search</a>(Tree, Query, QuerySize);</div>
<div class="line">  <a class="code" href="a00793.html#a1d8af9328f064a9df6d6f88336dd054e">search</a>.Search(NumberOfResults, DBuffer, NBuffer);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a596422fd837fb6937c12be6b277423a0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KDStore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>Tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *&#160;</td>
          <td class="paramname"><em>Key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine stores Data in the K-D tree specified by Tree using Key as an access key.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Tree</td><td>K-D tree in which data is to be stored </td></tr>
    <tr><td class="paramname">Key</td><td>ptr to key by which data can be retrieved </td></tr>
    <tr><td class="paramname">Data</td><td>ptr to data to be stored in the tree</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: 3/10/89, DSJ, Created. 7/13/89, DSJ, Changed return to void.</dd></dl>

<p>Definition at line <a class="el" href="a00661_source.html#l00209">209</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">  <span class="keywordtype">int</span> Level;</div>
<div class="line">  <a class="code" href="a00208.html">KDNODE</a> *Node;</div>
<div class="line">  <a class="code" href="a00208.html">KDNODE</a> **PtrToNode;</div>
<div class="line"></div>
<div class="line">  PtrToNode = &amp;(Tree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">  Node = *PtrToNode;</div>
<div class="line">  Level = NextLevel(Tree, -1);</div>
<div class="line">  <span class="keywordflow">while</span> (Node != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (Key[Level] &lt; Node-&gt;<a class="code" href="a00208.html#aba5d7ca0a419ab7ad6a7cbcdb79add07">BranchPoint</a>) {</div>
<div class="line">      PtrToNode = &amp;(Node-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (Key[Level] &gt; Node-&gt;<a class="code" href="a00208.html#a448480738475fb5bdb2e35b51f40f1d1">LeftBranch</a>)</div>
<div class="line">        Node-&gt;<a class="code" href="a00208.html#a448480738475fb5bdb2e35b51f40f1d1">LeftBranch</a> = Key[Level];</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      PtrToNode = &amp;(Node-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (Key[Level] &lt; Node-&gt;<a class="code" href="a00208.html#a1c8fd73abb446c3ceaea4cb29ef60b2c">RightBranch</a>)</div>
<div class="line">        Node-&gt;<a class="code" href="a00208.html#a1c8fd73abb446c3ceaea4cb29ef60b2c">RightBranch</a> = Key[Level];</div>
<div class="line">    }</div>
<div class="line">    Level = NextLevel(Tree, Level);</div>
<div class="line">    Node = *PtrToNode;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  *PtrToNode = <a class="code" href="a00661.html#a5f4c5e8b3eca7978c68bb22144feba82">MakeKDNode</a>(Tree, Key, (<span class="keywordtype">void</span> *) Data, Level);</div>
<div class="line">}                                <span class="comment">/* KDStore */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf3863949061899c45c47ec81c416234"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void KDWalk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>Tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00777.html#adec17f7c242871b5c6efb7bdb4050b9e">void_proc</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00339">339</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                           {</div>
<div class="line">  <span class="keywordflow">if</span> (Tree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <a class="code" href="a00661.html#adc5707bb9d0b49db3a13959b01117567">Walk</a>(Tree, action, context, Tree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>, NextLevel(Tree, -1));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5f4c5e8b3eca7978c68bb22144feba82"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00208.html">KDNODE</a>* MakeKDNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Key</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>Data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>Index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00371">371</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                       {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **  Parameters:</span></div>
<div class="line"><span class="comment"> **      tree  The tree to create the node for</span></div>
<div class="line"><span class="comment"> **      Key  Access key for new node in KD tree</span></div>
<div class="line"><span class="comment"> **      Data  ptr to data to be stored in new node</span></div>
<div class="line"><span class="comment"> **      Index  index of Key to branch on</span></div>
<div class="line"><span class="comment"> **  Operation:</span></div>
<div class="line"><span class="comment"> **    This routine allocates memory for a new K-D tree node</span></div>
<div class="line"><span class="comment"> **    and places the specified Key and Data into it.  The</span></div>
<div class="line"><span class="comment"> **    left and right subtree pointers for the node are</span></div>
<div class="line"><span class="comment"> **    initialized to empty subtrees.</span></div>
<div class="line"><span class="comment"> **  Return:</span></div>
<div class="line"><span class="comment"> **    pointer to new K-D tree node</span></div>
<div class="line"><span class="comment"> **  Exceptions:</span></div>
<div class="line"><span class="comment"> **    None</span></div>
<div class="line"><span class="comment"> **  History:</span></div>
<div class="line"><span class="comment"> **    3/11/89, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00208.html">KDNODE</a> *NewNode;</div>
<div class="line"></div>
<div class="line">  NewNode = (<a class="code" href="a00208.html">KDNODE</a> *) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00208.html">KDNODE</a>));</div>
<div class="line"></div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#a977838423c3b5e17ecfd0242c39a8202">Key</a> = Key;</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#afd5eeb76bcf3d1ba9b387e0cd4e9ce16">Data</a> = Data;</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#aba5d7ca0a419ab7ad6a7cbcdb79add07">BranchPoint</a> = Key[Index];</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#a448480738475fb5bdb2e35b51f40f1d1">LeftBranch</a> = tree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[Index].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a>;</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#a1c8fd73abb446c3ceaea4cb29ef60b2c">RightBranch</a> = tree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[Index].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a>;</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  NewNode-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> NewNode;</div>
<div class="line">}                                <span class="comment">/* MakeKDNode */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a92b996eb8120afe351d8e7ee82c96ece"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00209.html">KDTREE</a>* MakeKDTree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>KeySize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00255.html">PARAM_DESC</a>&#160;</td>
          <td class="paramname"><em>KeyDesc</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return a new <a class="el" href="a00209.html">KDTREE</a> based on the specified parameters. Parameters: KeySize # of dimensions in the K-D tree KeyDesc array of params to describe key dimensions </p>

<p>Definition at line <a class="el" href="a00661_source.html#l00184">184</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                                              {</div>
<div class="line">  <a class="code" href="a00209.html">KDTREE</a> *KDTree = (<a class="code" href="a00209.html">KDTREE</a> *) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(</div>
<div class="line">      <span class="keyword">sizeof</span>(<a class="code" href="a00209.html">KDTREE</a>) + (KeySize - 1) * <span class="keyword">sizeof</span>(<a class="code" href="a00255.html">PARAM_DESC</a>));</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; KeySize; i++) {</div>
<div class="line">    KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a6b9843466a3ddf33bfab18f85ca06501">NonEssential</a> = KeyDesc[i].<a class="code" href="a00255.html#a6b9843466a3ddf33bfab18f85ca06501">NonEssential</a>;</div>
<div class="line">    KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a55807f1e0be0daba2a33380ea29b2f1d">Circular</a> = KeyDesc[i].<a class="code" href="a00255.html#a55807f1e0be0daba2a33380ea29b2f1d">Circular</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (KeyDesc[i].Circular) {</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a> = KeyDesc[i].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a>;</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a> = KeyDesc[i].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a>;</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a031dddcdc1744e777435f8ceea197448">Range</a> = KeyDesc[i].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a> - KeyDesc[i].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a>;</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a1df92d879d7ec8ea6662e956d27154b5">HalfRange</a> = KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a031dddcdc1744e777435f8ceea197448">Range</a> / 2;</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a7c7bec15766be3633c649a0a9409b512">MidRange</a> = (KeyDesc[i].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a> + KeyDesc[i].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a>) / 2;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a6445e8e433a99239e56c3218437f2695">Min</a> = <a class="code" href="a00661.html#a8904460bfbb91685971ab30c3025e0c5">MINSEARCH</a>;</div>
<div class="line">      KDTree-&gt;<a class="code" href="a00209.html#a486dfb881bc360bbfbd36248bba80552">KeyDesc</a>[i].<a class="code" href="a00255.html#a73e76f946bbd324e60914a991d3343d1">Max</a> = <a class="code" href="a00661.html#a322efe6a34504778ebc6b3e2264789d5">MAXSEARCH</a>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  KDTree-&gt;<a class="code" href="a00209.html#a510104dbda460e78eb8d323502594ef2">KeySize</a> = KeySize;</div>
<div class="line">  KDTree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  KDTree-&gt;<a class="code" href="a00209.html#ab52e8a6004fc595de526dfa831c2e725">Root</a>.<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">return</span> KDTree;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc5707bb9d0b49db3a13959b01117567"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Walk </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00209.html">KDTREE</a> *&#160;</td>
          <td class="paramname"><em>tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00777.html#adec17f7c242871b5c6efb7bdb4050b9e">void_proc</a>&#160;</td>
          <td class="paramname"><em>action</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00208.html">KDNODE</a> *&#160;</td>
          <td class="paramname"><em>sub_tree</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>level</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00661_source.html#l00547">547</a> of file <a class="el" href="a00661_source.html">kdtree.cpp</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">  (*action)(context, sub_tree-&gt;<a class="code" href="a00208.html#afd5eeb76bcf3d1ba9b387e0cd4e9ce16">Data</a>, level);</div>
<div class="line">  <span class="keywordflow">if</span> (sub_tree-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <a class="code" href="a00661.html#adc5707bb9d0b49db3a13959b01117567">Walk</a>(tree, action, context, sub_tree-&gt;<a class="code" href="a00208.html#a66ffa1cc4e73e45599978f8f6416e350">Left</a>, NextLevel(tree, level));</div>
<div class="line">  <span class="keywordflow">if</span> (sub_tree-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <a class="code" href="a00661.html#adc5707bb9d0b49db3a13959b01117567">Walk</a>(tree, action, context, sub_tree-&gt;<a class="code" href="a00208.html#a699e9e67472e12f86bbb5c1effdb4fa3">Right</a>, NextLevel(tree, level));</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b8d1739202f65d59e58cdec119e32197.html">mnt</a></li><li class="navelem"><a class="el" href="dir_5b13d613d053bd10e358ecb54357a5d6.html">data</a></li><li class="navelem"><a class="el" href="dir_6e8f8c7261375e16fe20bf1b1c7c3b87.html">src</a></li><li class="navelem"><a class="el" href="dir_7829ead854c076361e4bcb285111c733.html">tesseract-ocr</a></li><li class="navelem"><a class="el" href="dir_abb5ded093fbb8a32f9ffb2037a12740.html">classify</a></li><li class="navelem"><a class="el" href="a00661.html">kdtree.cpp</a></li>
    <li class="footer">Generated on Thu Nov 1 2012 20:19:54 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
