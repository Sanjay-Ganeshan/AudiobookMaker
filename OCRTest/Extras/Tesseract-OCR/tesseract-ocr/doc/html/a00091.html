<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tesseract: tesseract::Classify Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00091.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">tesseract::Classify Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="a00627_source.html">classify.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for tesseract::Classify:</div>
<div class="dyncontent">
 <div class="center">
  <img src="a00091.png" usemap="#tesseract::Classify_map" alt=""/>
  <map id="tesseract::Classify_map" name="tesseract::Classify_map">
<area href="a00069.html" alt="tesseract::CCStruct" shape="rect" coords="0,112,124,136"/>
<area href="a00120.html" alt="tesseract::CUtil" shape="rect" coords="0,56,124,80"/>
<area href="a00070.html" alt="tesseract::CCUtil" shape="rect" coords="0,0,124,24"/>
<area href="a00401.html" alt="tesseract::Wordrec" shape="rect" coords="0,224,124,248"/>
<area href="a00360.html" alt="tesseract::Tesseract" shape="rect" coords="0,280,124,304"/>
</map>
 </div></div>

<p><a href="a01287.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac4c2dfe9aa3c463964fdc61faec56a67"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac4c2dfe9aa3c463964fdc61faec56a67">Classify</a> ()</td></tr>
<tr class="memitem:a4a3fe30721c7f945fb4c5ebfe421639c"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a4a3fe30721c7f945fb4c5ebfe421639c">~Classify</a> ()</td></tr>
<tr class="memitem:a83e4207353a1bb07adfaa6a82a74c9ce"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00129.html">Dict</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a> ()</td></tr>
<tr class="memitem:a5d8e80f8bd4a5779921f543c6eef796c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="a00307.html">ShapeTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a5d8e80f8bd4a5779921f543c6eef796c">shape_table</a> () const </td></tr>
<tr class="memitem:a28ddc270cb5d2613f5f0f24ad53a5a21"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a28ddc270cb5d2613f5f0f24ad53a5a21">NewAdaptedTemplates</a> (bool InitFromUnicharset)</td></tr>
<tr class="memitem:afae8a55c28ee68de92ab1b1dd37c6905"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#afae8a55c28ee68de92ab1b1dd37c6905">GetFontinfoId</a> (<a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> Class, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> ConfigId)</td></tr>
<tr class="memitem:af60b52006bbea0cc1727d543c3fcd1ad"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af60b52006bbea0cc1727d543c3fcd1ad">PruneClasses</a> (const <a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *int_templates, int num_features, const <a class="el" href="a00196.html">INT_FEATURE_STRUCT</a> *features, const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *normalization_factors, const <a class="el" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a> *expected_num_features, <a class="el" href="a00108.html">CP_RESULT_STRUCT</a> *results)</td></tr>
<tr class="memitem:a49a37c1ce02f5e114f0d57e49871b802"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a49a37c1ce02f5e114f0d57e49871b802">ReadNewCutoffs</a> (FILE *CutoffFile, bool swap, <a class="el" href="a00577.html#ac53c9cafaf7fe16f985994c49f6b0964">inT64</a> end_offset, <a class="el" href="a00633.html#a5f54131664d48951e46f5e4952350582">CLASS_CUTOFF_ARRAY</a> Cutoffs)</td></tr>
<tr class="memitem:a15d6951abc586793270de0825bdb7dd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a15d6951abc586793270de0825bdb7dd7">PrintAdaptedTemplates</a> (FILE *File, <a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates)</td></tr>
<tr class="memitem:a1718afe45a09c6631f11ae224e6d5db6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a1718afe45a09c6631f11ae224e6d5db6">WriteAdaptedTemplates</a> (FILE *File, <a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates)</td></tr>
<tr class="memitem:aa74ebd96d85efc39d71c37985e50c8aa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa74ebd96d85efc39d71c37985e50c8aa">ReadAdaptedTemplates</a> (FILE *File)</td></tr>
<tr class="memitem:a3205427bd0f3abae31ab6c3092ca0662"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3205427bd0f3abae31ab6c3092ca0662">ComputeNormMatch</a> (<a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, const <a class="el" href="a00155.html">FEATURE_STRUCT</a> &amp;feature, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> DebugMatch)</td></tr>
<tr class="memitem:ab6e270cecf7e7c62e1319e7889caf716"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab6e270cecf7e7c62e1319e7889caf716">FreeNormProtos</a> ()</td></tr>
<tr class="memitem:aabd742c09ff530922005e015a9e8bc2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00240.html">NORM_PROTOS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aabd742c09ff530922005e015a9e8bc2b">ReadNormProtos</a> (FILE *File, <a class="el" href="a00577.html#ac53c9cafaf7fe16f985994c49f6b0964">inT64</a> end_offset)</td></tr>
<tr class="memitem:af27d604585502bd447d52bf5daf15d0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af27d604585502bd447d52bf5daf15d0d">ConvertProto</a> (<a class="el" href="a00684.html#a04b1cd7341d318ccc4e679aec5cfad0e">PROTO</a> Proto, int ProtoId, <a class="el" href="a00660.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a> Class)</td></tr>
<tr class="memitem:af3d15c15c9f2dce72a400233d4bf366f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af3d15c15c9f2dce72a400233d4bf366f">CreateIntTemplates</a> (<a class="el" href="a00684.html#ad299b5cb6e6ab5713fce00dbd6a787ed">CLASSES</a> FloatProtos, const <a class="el" href="a00387.html">UNICHARSET</a> &amp;target_unicharset)</td></tr>
<tr class="memitem:abbbd86871758c036d7ba2af682abb45f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#abbbd86871758c036d7ba2af682abb45f">LearnWord</a> (const char *filename, const char *rejmap, <a class="el" href="a00396.html">WERD_RES</a> *word)</td></tr>
<tr class="memitem:a0a6455e61097b98b01d180cd0b2748c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0a6455e61097b98b01d180cd0b2748c9">LearnPieces</a> (const char *filename, int start, int length, float threshold, <a class="el" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240">CharSegmentationType</a> segmentation, const char *correct_text, <a class="el" href="a00396.html">WERD_RES</a> *word)</td></tr>
<tr class="memitem:a2f9389a2d855d2a59e7892d3ba884887"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a2f9389a2d855d2a59e7892d3ba884887">InitAdaptiveClassifier</a> (bool load_pre_trained_templates)</td></tr>
<tr class="memitem:aee9e5bd336bf1a37a7a1f3b712eb045d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aee9e5bd336bf1a37a7a1f3b712eb045d">InitAdaptedClass</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int FontinfoId, <a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> Class, <a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates)</td></tr>
<tr class="memitem:a7d9076164677e7e5a863a8a5d265b957"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7d9076164677e7e5a863a8a5d265b957">AdaptToPunc</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int FontinfoId, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Threshold)</td></tr>
<tr class="memitem:ac7501f294525f6dd7fca4a3512ae0dcf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac7501f294525f6dd7fca4a3512ae0dcf">AmbigClassifier</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> Templates, <a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *Classes, <a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *Ambiguities, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a9df3ff8623acd0ab30286ace7362045c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a9df3ff8623acd0ab30286ace7362045c">MasterMatcher</a> (<a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> templates, <a class="el" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> num_features, const <a class="el" href="a00196.html">INT_FEATURE_STRUCT</a> *features, const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *norm_factors, <a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *classes, int debug, int num_classes, const <a class="el" href="a00347.html">TBOX</a> &amp;blob_box, <a class="el" href="a00658.html#aad58739a624ab51ab180aac3342c6efc">CLASS_PRUNER_RESULTS</a> results, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *final_results)</td></tr>
<tr class="memitem:a7d663f1e02d6e7b2d1783fdca6154a4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a> (<a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *classes, bool debug, int class_id, int bottom, int top, float cp_rating, int blob_length, const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *cn_factors, <a class="el" href="a00199.html">INT_RESULT_STRUCT</a> &amp;int_result, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *final_results)</td></tr>
<tr class="memitem:a7c6031863d4dafb400551cc4f151f3b5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7c6031863d4dafb400551cc4f151f3b5">ComputeCorrectedRating</a> (bool debug, int unichar_id, double cp_rating, double im_rating, int feature_misses, int bottom, int top, int blob_length, const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *cn_factors)</td></tr>
<tr class="memitem:af1f1f794092ce44dff7c242822b6cf68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af1f1f794092ce44dff7c242822b6cf68">ConvertMatchesToChoices</a> (const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, const <a class="el" href="a00347.html">TBOX</a> &amp;box, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results, BLOB_CHOICE_LIST *Choices)</td></tr>
<tr class="memitem:a3681915077046082b4d99532a3f3da61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3681915077046082b4d99532a3f3da61">AddNewResult</a> (<a class="el" href="a00032.html">ADAPT_RESULTS</a> *results, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id, int shape_id, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> rating, bool adapted, int config, int fontinfo_id, int fontinfo_id2)</td></tr>
<tr class="memitem:a1f21b989c93ff1d297b5bde442fc430c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a1f21b989c93ff1d297b5bde442fc430c">GetAdaptiveFeatures</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, <a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures, <a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> *FloatFeatures)</td></tr>
<tr class="memitem:af9a9def4a6b3bb1a2e36bceff2976c2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af9a9def4a6b3bb1a2e36bceff2976c2c">DebugAdaptiveClassifier</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a57d34f380d093913f3c3e74f7a7a9840"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a57d34f380d093913f3c3e74f7a7a9840">GetAdaptThresholds</a> (<a class="el" href="a00381.html">TWERD</a> *Word, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;BestChoice, const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;BestRawChoice, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Thresholds[])</td></tr>
<tr class="memitem:adc0facdf672d23f65612b56b4a5f523a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00805.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#adc0facdf672d23f65612b56b4a5f523a">MakeNewTempProtos</a> (<a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> Features, int NumBadFeat, <a class="el" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a> BadFeat[], <a class="el" href="a00660.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a> IClass, <a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> Class, <a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> <a class="el" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>)</td></tr>
<tr class="memitem:a59900939784eac1e2e6ebfec1f82bb58"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a59900939784eac1e2e6ebfec1f82bb58">MakeNewTemporaryConfig</a> (<a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int FontinfoId, int NumFeatures, <a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> Features, <a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> FloatFeatures)</td></tr>
<tr class="memitem:aefb0cfe284dd67601798f7ae510b787f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aefb0cfe284dd67601798f7ae510b787f">MakePermanent</a> (<a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int ConfigId, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00346.html">TBLOB</a> *Blob)</td></tr>
<tr class="memitem:aad46f714847619694546e9ea2784402c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aad46f714847619694546e9ea2784402c">PrintAdaptiveMatchResults</a> (FILE *File, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:af15e83a02b369b820d40c8920b4275e8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af15e83a02b369b820d40c8920b4275e8">RemoveExtraPuncs</a> (<a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a0e35029ac0c77ad18d35f08c27c99d15"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0e35029ac0c77ad18d35f08c27c99d15">RemoveBadMatches</a> (<a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a5a3045639a3db979a8d1eb6dc4343e3b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a5a3045639a3db979a8d1eb6dc4343e3b">SetAdaptiveThreshold</a> (<a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Threshold)</td></tr>
<tr class="memitem:abf81bc54d31591d9da5f95529583b99d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#abf81bc54d31591d9da5f95529583b99d">ShowBestMatchFor</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int shape_id, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> AdaptiveOn, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> PreTrainedOn, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a6fc9e3752efb2fe0d74920e082a59bd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00319.html">STRING</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a6fc9e3752efb2fe0d74920e082a59bd7">ClassIDToDebugStr</a> (const <a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *templates, int class_id, int config_id) const </td></tr>
<tr class="memitem:a1002c7f80352c6ceac4af82ee35e5e06"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a1002c7f80352c6ceac4af82ee35e5e06">ClassAndConfigIDToFontOrShapeID</a> (int class_id, int int_result_config) const </td></tr>
<tr class="memitem:a319cfe59c8e82e697375a351e3c604b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a319cfe59c8e82e697375a351e3c604b3">ShapeIDToClassID</a> (int shape_id) const </td></tr>
<tr class="memitem:ab7022031939236cac2fe6b661e6f657b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab7022031939236cac2fe6b661e6f657b">BaselineClassifier</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> Templates, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a0e552819a03cc6f169e18a58b16696a6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> Templates, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:aa3907b770bdeb45e652e0ab122568cf4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa3907b770bdeb45e652e0ab122568cf4">CharNormTrainingSample</a> (bool pruner_only, const <a class="el" href="a00376.html">TrainingSample</a> &amp;<a class="el" href="a00288.html">sample</a>, <a class="el" href="a00175.html">GenericVector</a>&lt; <a class="el" href="a00306.html">ShapeRating</a> &gt; *results)</td></tr>
<tr class="memitem:af4c186f6ec1019d17912d2cf36326f1f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af4c186f6ec1019d17912d2cf36326f1f">GetAmbiguities</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> CorrectClass)</td></tr>
<tr class="memitem:a8575af5f97d4037d4fdd2e21b477dd38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8575af5f97d4037d4fdd2e21b477dd38">DoAdaptiveMatch</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a53629ef3f5562677ae096bbce864e5ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a53629ef3f5562677ae096bbce864e5ab">AdaptToChar</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId, int FontinfoId, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Threshold)</td></tr>
<tr class="memitem:aaa7b4a01a6f9bd1f088982a4011274e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aaa7b4a01a6f9bd1f088982a4011274e5">DisplayAdaptedChar</a> (<a class="el" href="a00346.html">TBLOB</a> *blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00195.html">INT_CLASS_STRUCT</a> *int_class)</td></tr>
<tr class="memitem:ac1f369f9a59739a588a4d84f60bac6c1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac1f369f9a59739a588a4d84f60bac6c1">AdaptableWord</a> (<a class="el" href="a00381.html">TWERD</a> *Word, const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;BestChoiceWord, const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;RawChoiceWord)</td></tr>
<tr class="memitem:ae5e4880c5acc91b77308fbd6ab706b13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ae5e4880c5acc91b77308fbd6ab706b13">EndAdaptiveClassifier</a> ()</td></tr>
<tr class="memitem:a8c350afec3f633660d20eb98226a40d1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8c350afec3f633660d20eb98226a40d1">PrintAdaptiveStatistics</a> (FILE *File)</td></tr>
<tr class="memitem:ae66827073cdeea6a59dd16fd7cf5d297"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ae66827073cdeea6a59dd16fd7cf5d297">SettupPass1</a> ()</td></tr>
<tr class="memitem:a5ad207ab75e8a69c35c225313268788b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a5ad207ab75e8a69c35c225313268788b">SettupPass2</a> ()</td></tr>
<tr class="memitem:a1f058451e32538b4dc2c853b82bc6600"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a1f058451e32538b4dc2c853b82bc6600">AdaptiveClassifier</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, BLOB_CHOICE_LIST *Choices, <a class="el" href="a00658.html#aad58739a624ab51ab180aac3342c6efc">CLASS_PRUNER_RESULTS</a> cp_results)</td></tr>
<tr class="memitem:a8a68035cfc5ee866f2d39360072ab77c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8a68035cfc5ee866f2d39360072ab77c">ClassifyAsNoise</a> (<a class="el" href="a00032.html">ADAPT_RESULTS</a> *Results)</td></tr>
<tr class="memitem:a350f6cb6e7ce9f53ae468908a91c6148"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a350f6cb6e7ce9f53ae468908a91c6148">ResetAdaptiveClassifierInternal</a> ()</td></tr>
<tr class="memitem:a4bf0e47e0ae00a0cec215a887cef8c65"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a4bf0e47e0ae00a0cec215a887cef8c65">GetBaselineFeatures</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> Templates, <a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *CharNormArray, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *BlobLength)</td></tr>
<tr class="memitem:a1076d5d08686e48d39ef3eb07e711fb6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a1076d5d08686e48d39ef3eb07e711fb6">GetCharNormFeatures</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> Templates, <a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *PrunerNormArray, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *CharNormArray, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *BlobLength, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *FeatureOutlineIndex)</td></tr>
<tr class="memitem:a8f49de2f8da7b066bd8ece0641edcca1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8f49de2f8da7b066bd8ece0641edcca1">ComputeCharNormArrays</a> (<a class="el" href="a00155.html">FEATURE_STRUCT</a> *norm_feature, <a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *templates, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *char_norm_array, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pruner_array)</td></tr>
<tr class="memitem:a786c5f6e2a5cd8aac2ed4dd89af84fea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a786c5f6e2a5cd8aac2ed4dd89af84fea">TempConfigReliable</a> (<a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id, const <a class="el" href="a00619.html#a844d69e71035a4a60207cedab3521f9e">TEMP_CONFIG</a> &amp;config)</td></tr>
<tr class="memitem:a954c9085f840572567462c9e0ff3551a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a954c9085f840572567462c9e0ff3551a">UpdateAmbigsGroup</a> (<a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id, const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00346.html">TBLOB</a> *Blob)</td></tr>
<tr class="memitem:a62ffff7932680b25784bfca5079ce347"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a62ffff7932680b25784bfca5079ce347">ResetFeaturesHaveBeenExtracted</a> ()</td></tr>
<tr class="memitem:aa2f1ff296efea11aabd476cba49a39c5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa2f1ff296efea11aabd476cba49a39c5">AdaptiveClassifierIsFull</a> ()</td></tr>
<tr class="memitem:ab72f687048a2e1eba44b8ae2cfb07fa9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab72f687048a2e1eba44b8ae2cfb07fa9">LooksLikeGarbage</a> (const <a class="el" href="a00126.html">DENORM</a> &amp;denorm, <a class="el" href="a00346.html">TBLOB</a> *blob)</td></tr>
<tr class="memitem:a6e36e01c8147d95bbd64c6609e1b8f45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a6e36e01c8147d95bbd64c6609e1b8f45">RefreshDebugWindow</a> (<a class="el" href="a00294.html">ScrollView</a> **win, const char *msg, int y_offset, const <a class="el" href="a00347.html">TBOX</a> &amp;wbox)</td></tr>
<tr class="memitem:ac0de90c99552cdc286f934d344790085"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ac0de90c99552cdc286f934d344790085">ClearCharNormArray</a> (<a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *char_norm_array)</td></tr>
<tr class="memitem:a3abc0b280fe8a88d57a35d2d578ef47a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3abc0b280fe8a88d57a35d2d578ef47a">ComputeIntCharNormArray</a> (const <a class="el" href="a00155.html">FEATURE_STRUCT</a> &amp;norm_feature, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *char_norm_array)</td></tr>
<tr class="memitem:ae1f3fc88bf28a4a169273bcf2515610e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ae1f3fc88bf28a4a169273bcf2515610e">ComputeIntFeatures</a> (<a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> Features, <a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures)</td></tr>
<tr class="memitem:a98459996e5e6ab1dc1de71411fd32b89"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a98459996e5e6ab1dc1de71411fd32b89">ReadIntTemplates</a> (FILE *File)</td></tr>
<tr class="memitem:a81e8a5e5adfc60146ea3eb5b60936dd9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a81e8a5e5adfc60146ea3eb5b60936dd9">WriteIntTemplates</a> (FILE *File, <a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> Templates, const <a class="el" href="a00387.html">UNICHARSET</a> &amp;target_unicharset)</td></tr>
<tr class="memitem:a76f4e180bcab3a7cd2da75d42b524eba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a76f4e180bcab3a7cd2da75d42b524eba">GetClassToDebug</a> (const char *Prompt, bool *adaptive_on, bool *pretrained_on, int *shape_id)</td></tr>
<tr class="memitem:a44e1b8840fb841e621b902f3abdd8522"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a44e1b8840fb841e621b902f3abdd8522">ShowMatchDisplay</a> ()</td></tr>
<tr class="memitem:a62597f182a5e23c3b8a030c06e699e99"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00388.html">UnicityTable</a>&lt; <a class="el" href="a00163.html">FontInfo</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a62597f182a5e23c3b8a030c06e699e99">get_fontinfo_table</a> ()</td></tr>
<tr class="memitem:a84d0021ef7ddbc98196801f9808fa33d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00388.html">UnicityTable</a>&lt; <a class="el" href="a00165.html">FontSet</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a84d0021ef7ddbc98196801f9808fa33d">get_fontset_table</a> ()</td></tr>
<tr class="memitem:a8cbc3c255f888cc49c713c0a7408d2ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8cbc3c255f888cc49c713c0a7408d2ad">NormalizeOutlines</a> (<a class="el" href="a00407.html#aa200acf94add0e61783bfcd5965bb645">LIST</a> Outlines, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *XScale, <a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *YScale)</td></tr>
<tr class="memitem:af1ef43f77139dc879d27a510adcb4bb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af1ef43f77139dc879d27a510adcb4bb3">ExtractOutlineFeatures</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob)</td></tr>
<tr class="memitem:ad6d1f9f29655ffe18fab3832b113e00b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ad6d1f9f29655ffe18fab3832b113e00b">ExtractPicoFeatures</a> (<a class="el" href="a00346.html">TBLOB</a> *Blob)</td></tr>
<tr><td colspan="2"><div class="groupHeader">ReadClassFile</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p>Read in the training data from a file. All of the classes are read in. The results are stored in the global variable, 'TrainingData'. </p>
</div></td></tr>
<tr class="memitem:a3cc9d5fe19f6d641fdfb133179ea70a4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3cc9d5fe19f6d641fdfb133179ea70a4">ReadClassFile</a> ()</td></tr>
<tr class="inherit_header pub_methods_a00069"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00069')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="a00069.html">tesseract::CCStruct</a></td></tr>
<tr class="memitem:a1623ce99161fc99916a04260cf25ccd8 inherit pub_methods_a00069"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#a1623ce99161fc99916a04260cf25ccd8">CCStruct</a> ()</td></tr>
<tr class="memitem:aee94dd326def50877bc7fb76ba5277c9 inherit pub_methods_a00069"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#aee94dd326def50877bc7fb76ba5277c9">~CCStruct</a> ()</td></tr>
<tr class="inherit_header pub_methods_a00120"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00120')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="a00120.html">tesseract::CUtil</a></td></tr>
<tr class="memitem:a2c90e0e7fb8ec596ecb98e096eb7c418 inherit pub_methods_a00120"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00120.html#a2c90e0e7fb8ec596ecb98e096eb7c418">CUtil</a> ()</td></tr>
<tr class="memitem:af7acf39fa169851db30363d8b06a77b6 inherit pub_methods_a00120"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00120.html#af7acf39fa169851db30363d8b06a77b6">~CUtil</a> ()</td></tr>
<tr class="memitem:a4fc3c25333d98fa5d7d8b899724bb8ab inherit pub_methods_a00120"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00120.html#a4fc3c25333d98fa5d7d8b899724bb8ab">read_variables</a> (const char *filename, bool global_only)</td></tr>
<tr class="inherit_header pub_methods_a00070"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_a00070')"><img src="closed.png" alt="-"/>&nbsp;Public Member Functions inherited from <a class="el" href="a00070.html">tesseract::CCUtil</a></td></tr>
<tr class="memitem:af688e380af69364e79fddf43c3197e3c inherit pub_methods_a00070"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00070.html#af688e380af69364e79fddf43c3197e3c">CCUtil</a> ()</td></tr>
<tr class="memitem:adeaf195d61d6a5eaab4bcbb27a6f1af5 inherit pub_methods_a00070"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00070.html#adeaf195d61d6a5eaab4bcbb27a6f1af5">~CCUtil</a> ()</td></tr>
<tr class="memitem:ac50cd898d98a54cec02689858f515728 inherit pub_methods_a00070"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00070.html#ac50cd898d98a54cec02689858f515728">main_setup</a> (const char *argv0, const char *basename)</td></tr>
<tr class="memitem:ac993425386ae1f73762107299ee8a114 inherit pub_methods_a00070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00260.html">ParamsVectors</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a> ()</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a22717c4d299d3a52683ad90114b20200"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a22717c4d299d3a52683ad90114b20200">prioritize_division</a> = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td></tr>
<tr class="memitem:a96f1213af9f43f2ec0ab9e22f32da3b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a96f1213af9f43f2ec0ab9e22f32da3b6">tessedit_single_match</a> = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td></tr>
<tr class="memitem:a7691700e9742ecdc10e0f8ee75682991"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7691700e9742ecdc10e0f8ee75682991">classify_enable_learning</a> = true</td></tr>
<tr class="memitem:a0f934f0b39cb869d2a4973269fb696cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> = 0</td></tr>
<tr class="memitem:aa92ef2f6a1f0e726d576a59644c3cc63"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a> = <a class="el" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a></td></tr>
<tr class="memitem:a7bef23fa815b3c02261800ca82b05911"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7bef23fa815b3c02261800ca82b05911">classify_char_norm_range</a> = 0.2</td></tr>
<tr class="memitem:a8ffda27cc071fa6c63c406fe9749f276"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8ffda27cc071fa6c63c406fe9749f276">classify_min_norm_scale_x</a> = 0.0</td></tr>
<tr class="memitem:a3f89a54fbee53fa65e3d2c2947dab449"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3f89a54fbee53fa65e3d2c2947dab449">classify_max_norm_scale_x</a> = 0.325</td></tr>
<tr class="memitem:a0d1928e7dac3c17776220d35f08a48ec"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0d1928e7dac3c17776220d35f08a48ec">classify_min_norm_scale_y</a> = 0.0</td></tr>
<tr class="memitem:addf6334cb29c021e52587f20ac5b30b2"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#addf6334cb29c021e52587f20ac5b30b2">classify_max_norm_scale_y</a> = 0.325</td></tr>
<tr class="memitem:a746dbbd1c99e99f3d213077cceedf80e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a746dbbd1c99e99f3d213077cceedf80e">tess_cn_matching</a> = 0</td></tr>
<tr class="memitem:a85fcc9966cddbc38adf1014dd0cd778c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a85fcc9966cddbc38adf1014dd0cd778c">tess_bn_matching</a> = 0</td></tr>
<tr class="memitem:adaa9bf9e188634ffa99c83204be2129f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#adaa9bf9e188634ffa99c83204be2129f">classify_enable_adaptive_matcher</a> = 1</td></tr>
<tr class="memitem:a52c6bf81f09a61859f999707e37c47f0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a52c6bf81f09a61859f999707e37c47f0">classify_use_pre_adapted_templates</a> = 0</td></tr>
<tr class="memitem:a27fe54e49f64e61f40b4e50e8ff4084c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a27fe54e49f64e61f40b4e50e8ff4084c">classify_save_adapted_templates</a> = 0</td></tr>
<tr class="memitem:a2420bb00ab392215cbc8b5f72d9cf81a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a2420bb00ab392215cbc8b5f72d9cf81a">classify_enable_adaptive_debugger</a> = 0</td></tr>
<tr class="memitem:a59d2ce9a817ab97d37a459ca2459cf8e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a> = 0</td></tr>
<tr class="memitem:a3bfadb1d56669868fe7d18e12a7716dc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a> = 0</td></tr>
<tr class="memitem:af9e34f61db55f7f312f8e1531b2368bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> = 0</td></tr>
<tr class="memitem:adc3a809a1a219f741a9e45a32e0d11bc"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#adc3a809a1a219f741a9e45a32e0d11bc">matcher_good_threshold</a> = 0.125</td></tr>
<tr class="memitem:a8f17cd68516b18d7a0aaba311585a8ab"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a8f17cd68516b18d7a0aaba311585a8ab">matcher_great_threshold</a> = 0.0</td></tr>
<tr class="memitem:a3d9ace4f4ae0ddf01942ced19410adbe"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3d9ace4f4ae0ddf01942ced19410adbe">matcher_perfect_threshold</a> = 0.02</td></tr>
<tr class="memitem:a10595e84248f68a98f8e73bcdb6ae89a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a10595e84248f68a98f8e73bcdb6ae89a">matcher_bad_match_pad</a> = 0.15</td></tr>
<tr class="memitem:a7940573dfb85992433c6f51965a9fea5"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7940573dfb85992433c6f51965a9fea5">matcher_rating_margin</a> = 0.1</td></tr>
<tr class="memitem:a9723b1f4a341f42ddfc68d2f531c7dd3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a9723b1f4a341f42ddfc68d2f531c7dd3">matcher_avg_noise_size</a> = 12.0</td></tr>
<tr class="memitem:a727f2429705dabdd078d6748f0e81c42"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a727f2429705dabdd078d6748f0e81c42">matcher_permanent_classes_min</a> = 1</td></tr>
<tr class="memitem:a33bc8d687ec0504c697ac0e1ace5567d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a33bc8d687ec0504c697ac0e1ace5567d">matcher_min_examples_for_prototyping</a> = 3</td></tr>
<tr class="memitem:ad47099cfac2701d8fe3a24dd12eab0e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ad47099cfac2701d8fe3a24dd12eab0e1">matcher_sufficient_examples_for_prototyping</a> = 5</td></tr>
<tr class="memitem:a76bc2aed534982a6b67afe8a6653b04f"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a76bc2aed534982a6b67afe8a6653b04f">matcher_clustering_max_angle_delta</a> = 0.015</td></tr>
<tr class="memitem:a67a98c273b9c1b7cc951fcb20e376bf3"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a67a98c273b9c1b7cc951fcb20e376bf3">classify_misfit_junk_penalty</a> = 0.0</td></tr>
<tr class="memitem:ab2ed08d2587e66a131f7fcd229102566"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab2ed08d2587e66a131f7fcd229102566">rating_scale</a> = 1.5</td></tr>
<tr class="memitem:aa220c70c7e0b0f7b0276d421c95feedd"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#aa220c70c7e0b0f7b0276d421c95feedd">certainty_scale</a> = 20.0</td></tr>
<tr class="memitem:a0be36efceb5fcf41dfbc032516af2ace"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0be36efceb5fcf41dfbc032516af2ace">tessedit_class_miss_scale</a> = 0.00390625</td></tr>
<tr class="memitem:a3d74369343952e81efa5ac8858d5e9d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3d74369343952e81efa5ac8858d5e9d1">classify_adapt_proto_threshold</a> = 230</td></tr>
<tr class="memitem:af722952ac0ab0339ade3abbbe10f8b6b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a> = 230</td></tr>
<tr class="memitem:ab9c25bf0ebc01c57728e19b2bbc980ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ab9c25bf0ebc01c57728e19b2bbc980ef">disable_character_fragments</a> = <a class="el" href="a00777.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></td></tr>
<tr class="memitem:a342dfc4f244244bd1bc211ea910e2b12"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a342dfc4f244244bd1bc211ea910e2b12">classify_character_fragments_garbage_certainty_threshold</a> = -3.0</td></tr>
<tr class="memitem:a0c8e4bf5e3032c6468b909b6aca7f416"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a> = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td></tr>
<tr class="memitem:a08873fa3ea379656484c07f606f8a09c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a> = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td></tr>
<tr class="memitem:abdd8831d44ce5ea36f7bbee1ed9c4e8a"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#abdd8831d44ce5ea36f7bbee1ed9c4e8a">classify_learn_debug_str</a> = &quot;&quot;</td></tr>
<tr class="memitem:a6e0102d0d21b6151893a199cc84a6e93"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a6e0102d0d21b6151893a199cc84a6e93">classify_class_pruner_threshold</a> = 229</td></tr>
<tr class="memitem:a406c1644ce61dfb376ae9975f89c54ba"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a406c1644ce61dfb376ae9975f89c54ba">classify_class_pruner_multiplier</a> = 30</td></tr>
<tr class="memitem:a2f3faf7d282a1b58b10b3866693a4f08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a2f3faf7d282a1b58b10b3866693a4f08">classify_cp_cutoff_strength</a> = 7</td></tr>
<tr class="memitem:acab8de2f560b04b48191f60099e4244b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a> = 14</td></tr>
<tr class="memitem:a64383806f917e682c4a644efdd71d530"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a></td></tr>
<tr class="memitem:a49c2bec2694a12cb6518001d8193d58d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a></td></tr>
<tr class="memitem:a08295fdeacbf1d536337f542320e86e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a></td></tr>
<tr class="memitem:a3306f7dc2f0df8c08a9933493262a2c9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a></td></tr>
<tr class="memitem:ada1ef7ff613927daa2838ba41eaa055f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a></td></tr>
<tr class="memitem:a04608dab39f896c0358b42c228a7ef32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a></td></tr>
<tr class="memitem:a974e5b3b4ee8b184a3af4ba782750dd7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a></td></tr>
<tr class="memitem:a26b1c76382f418bf5a78bad15b23b8ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a></td></tr>
<tr class="memitem:a7d0ccfd06421346d8cda0f1b76fd8516"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a></td></tr>
<tr class="memitem:ad4c94be5d5738afb4115a12cad2e3efa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00240.html">NORM_PROTOS</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a></td></tr>
<tr class="memitem:ae6dea981b2f591921d798ea83b0fa455"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00388.html">UnicityTable</a>&lt; <a class="el" href="a00163.html">FontInfo</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a></td></tr>
<tr class="memitem:a74a007a46ac907d2c8f61e9885143465"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00388.html">UnicityTable</a>&lt; <a class="el" href="a00165.html">FontSet</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a></td></tr>
<tr class="memitem:a048eceaa95452969dc6cc5d29d97e5cf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a048eceaa95452969dc6cc5d29d97e5cf">il1_adaption_test</a> = 0</td></tr>
<tr class="memitem:a57e449d38b255fe82e61d88ded8b0020"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a57e449d38b255fe82e61d88ded8b0020">classify_bln_numeric_mode</a> = 0</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a093af2c004819e86bfff80ad88f10c37"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00201.html">IntegerMatcher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a></td></tr>
<tr class="memitem:a6ebcfd2968c704f99efd40075ecdb138"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00151.html">FEATURE_DEFS_STRUCT</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a6ebcfd2968c704f99efd40075ecdb138">feature_defs_</a></td></tr>
<tr class="memitem:a471b3e8f03ddc5281c167b37d8ddc5b5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00307.html">ShapeTable</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a></td></tr>
<tr class="inherit_header pro_attribs_a00069"><td colspan="2" onclick="javascript:toggleInherit('pro_attribs_a00069')"><img src="closed.png" alt="-"/>&nbsp;Protected Attributes inherited from <a class="el" href="a00069.html">tesseract::CCStruct</a></td></tr>
<tr class="memitem:af0134325da282ba2dacbb034cf59dde0 inherit pro_attribs_a00069"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00186.html">Image</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#af0134325da282ba2dacbb034cf59dde0">image_</a></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_attribs_a00069"><td colspan="2" onclick="javascript:toggleInherit('pub_static_attribs_a00069')"><img src="closed.png" alt="-"/>&nbsp;Static Public Attributes inherited from <a class="el" href="a00069.html">tesseract::CCStruct</a></td></tr>
<tr class="memitem:a7e8a361df0831d295edf1c150c3ca3a3 inherit pub_static_attribs_a00069"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#a7e8a361df0831d295edf1c150c3ca3a3">kDescenderFraction</a> = 0.25</td></tr>
<tr class="memitem:a737fdb37b9401ad3d04371c1bd4a0b17 inherit pub_static_attribs_a00069"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#a737fdb37b9401ad3d04371c1bd4a0b17">kXHeightFraction</a> = 0.5</td></tr>
<tr class="memitem:a9d71fddad74d9418e106713cd643b919 inherit pub_static_attribs_a00069"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#a9d71fddad74d9418e106713cd643b919">kAscenderFraction</a> = 0.25</td></tr>
<tr class="memitem:a594719f667105487f0c3f78de6f85f77 inherit pub_static_attribs_a00069"><td class="memItemLeft" align="right" valign="top">static const double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00069.html#a594719f667105487f0c3f78de6f85f77">kXHeightCapRatio</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="a00627_source.html#l00058">58</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ac4c2dfe9aa3c463964fdc61faec56a67"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::Classify::Classify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00626_source.html#l00034">34</a> of file <a class="el" href="a00626_source.html">classify.cpp</a>.</p>
<div class="fragment"><div class="line">  : <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a22717c4d299d3a52683ad90114b20200">prioritize_division</a>, <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line">                <span class="stringliteral">&quot;Prioritize blob division over chopping&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a96f1213af9f43f2ec0ab9e22f32da3b6">tessedit_single_match</a>, <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line">               <span class="stringliteral">&quot;Top choice only from CP&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a7691700e9742ecdc10e0f8ee75682991">classify_enable_learning</a>, <span class="keyword">true</span>,</div>
<div class="line">                <span class="stringliteral">&quot;Enable adaptive classifier&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a>, 0, <span class="stringliteral">&quot;Classify debug level&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>, <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a>, <span class="stringliteral">&quot;Normalization Method   ...&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a7bef23fa815b3c02261800ca82b05911">classify_char_norm_range</a>, 0.2,</div>
<div class="line">                  <span class="stringliteral">&quot;Character Normalization Range ...&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a8ffda27cc071fa6c63c406fe9749f276">classify_min_norm_scale_x</a>, 0.0, <span class="stringliteral">&quot;Min char x-norm scale ...&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),  <span class="comment">/* PREV DEFAULT 0.1 */</span></div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a3f89a54fbee53fa65e3d2c2947dab449">classify_max_norm_scale_x</a>, 0.325, <span class="stringliteral">&quot;Max char x-norm scale ...&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),  <span class="comment">/* PREV DEFAULT 0.3 */</span></div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a0d1928e7dac3c17776220d35f08a48ec">classify_min_norm_scale_y</a>, 0.0, <span class="stringliteral">&quot;Min char y-norm scale ...&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),  <span class="comment">/* PREV DEFAULT 0.1 */</span></div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#addf6334cb29c021e52587f20ac5b30b2">classify_max_norm_scale_y</a>, 0.325, <span class="stringliteral">&quot;Max char y-norm scale ...&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),  <span class="comment">/* PREV DEFAULT 0.3 */</span></div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a746dbbd1c99e99f3d213077cceedf80e">tess_cn_matching</a>, 0, <span class="stringliteral">&quot;Character Normalized Matching&quot;</span>,</div>
<div class="line">                this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a85fcc9966cddbc38adf1014dd0cd778c">tess_bn_matching</a>, 0, <span class="stringliteral">&quot;Baseline Normalized Matching&quot;</span>,</div>
<div class="line">                this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#adaa9bf9e188634ffa99c83204be2129f">classify_enable_adaptive_matcher</a>, 1,</div>
<div class="line">                <span class="stringliteral">&quot;Enable adaptive classifier&quot;</span>,</div>
<div class="line">                this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a52c6bf81f09a61859f999707e37c47f0">classify_use_pre_adapted_templates</a>, 0,</div>
<div class="line">                <span class="stringliteral">&quot;Use pre-adapted classifier templates&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a27fe54e49f64e61f40b4e50e8ff4084c">classify_save_adapted_templates</a>, 0,</div>
<div class="line">               <span class="stringliteral">&quot;Save adapted templates to a file&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a2420bb00ab392215cbc8b5f72d9cf81a">classify_enable_adaptive_debugger</a>, 0, <span class="stringliteral">&quot;Enable match debugger&quot;</span>,</div>
<div class="line">                this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a>, 0, <span class="stringliteral">&quot;Matcher Debug Level&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>, 0, <span class="stringliteral">&quot;Matcher Debug Flags&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a>, 0, <span class="stringliteral">&quot;Learning Debug Level: &quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#adc3a809a1a219f741a9e45a32e0d11bc">matcher_good_threshold</a>, 0.125, <span class="stringliteral">&quot;Good Match (0-1)&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a8f17cd68516b18d7a0aaba311585a8ab">matcher_great_threshold</a>, 0.0, <span class="stringliteral">&quot;Great Match (0-1)&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a3d9ace4f4ae0ddf01942ced19410adbe">matcher_perfect_threshold</a>, 0.02, <span class="stringliteral">&quot;Perfect Match (0-1)&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a10595e84248f68a98f8e73bcdb6ae89a">matcher_bad_match_pad</a>, 0.15, <span class="stringliteral">&quot;Bad Match Pad (0-1)&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a7940573dfb85992433c6f51965a9fea5">matcher_rating_margin</a>, 0.1, <span class="stringliteral">&quot;New template margin (0-1)&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a9723b1f4a341f42ddfc68d2f531c7dd3">matcher_avg_noise_size</a>, 12.0, <span class="stringliteral">&quot;Avg. noise blob length&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a727f2429705dabdd078d6748f0e81c42">matcher_permanent_classes_min</a>, 1, <span class="stringliteral">&quot;Min # of permanent classes&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a33bc8d687ec0504c697ac0e1ace5567d">matcher_min_examples_for_prototyping</a>, 3,</div>
<div class="line">               <span class="stringliteral">&quot;Reliable Config Threshold&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#ad47099cfac2701d8fe3a24dd12eab0e1">matcher_sufficient_examples_for_prototyping</a>, 5,</div>
<div class="line">               <span class="stringliteral">&quot;Enable adaption even if the ambiguities have not been seen&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a76bc2aed534982a6b67afe8a6653b04f">matcher_clustering_max_angle_delta</a>, 0.015,</div>
<div class="line">                  <span class="stringliteral">&quot;Maximum angle delta for prototype clustering&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a67a98c273b9c1b7cc951fcb20e376bf3">classify_misfit_junk_penalty</a>, 0.0,</div>
<div class="line">                  <span class="stringliteral">&quot;Penalty to apply when a non-alnum is vertically out of &quot;</span></div>
<div class="line">                  <span class="stringliteral">&quot;its expected textline position&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#ab2ed08d2587e66a131f7fcd229102566">rating_scale</a>, 1.5, <span class="stringliteral">&quot;Rating scaling factor&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#aa220c70c7e0b0f7b0276d421c95feedd">certainty_scale</a>, 20.0, <span class="stringliteral">&quot;Certainty scaling factor&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a0be36efceb5fcf41dfbc032516af2ace">tessedit_class_miss_scale</a>, 0.00390625,</div>
<div class="line">                  <span class="stringliteral">&quot;Scale factor for features not used&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a3d74369343952e81efa5ac8858d5e9d1">classify_adapt_proto_threshold</a>, 230,</div>
<div class="line">               <span class="stringliteral">&quot;Threshold for good protos during adaptive 0-255&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>, 230,</div>
<div class="line">               <span class="stringliteral">&quot;Threshold for good features during adaptive 0-255&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#ab9c25bf0ebc01c57728e19b2bbc980ef">disable_character_fragments</a>, <a class="code" href="a00409.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>,</div>
<div class="line">                <span class="stringliteral">&quot;Do not include character fragments in the&quot;</span></div>
<div class="line">                <span class="stringliteral">&quot; results of the classifier&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#abc29757c0b64587fef3aa7556e2fd7b9">double_MEMBER</a>(<a class="code" href="a00091.html#a342dfc4f244244bd1bc211ea910e2b12">classify_character_fragments_garbage_certainty_threshold</a>,</div>
<div class="line">                  -3.0, <span class="stringliteral">&quot;Exclude fragments that do not look like whole&quot;</span></div>
<div class="line">                  <span class="stringliteral">&quot; characters from training and adaption&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a>, <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line">                <span class="stringliteral">&quot;Bring up graphical debugging windows for fragments training&quot;</span>,</div>
<div class="line">                this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>, <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>,</div>
<div class="line">                <span class="stringliteral">&quot;Use two different windows for debugging the matching: &quot;</span></div>
<div class="line">                <span class="stringliteral">&quot;One for the protos and one for the features.&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#adbed450b87e900f7ee35bc5c6fc8f619">STRING_MEMBER</a>(<a class="code" href="a00091.html#abdd8831d44ce5ea36f7bbee1ed9c4e8a">classify_learn_debug_str</a>, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;Class str to debug learning&quot;</span>,</div>
<div class="line">                  this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a6e0102d0d21b6151893a199cc84a6e93">classify_class_pruner_threshold</a>, 229,</div>
<div class="line">               <span class="stringliteral">&quot;Class Pruner Threshold 0-255&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a406c1644ce61dfb376ae9975f89c54ba">classify_class_pruner_multiplier</a>, 30,</div>
<div class="line">               <span class="stringliteral">&quot;Class Pruner Multiplier 0-255:       &quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a2f3faf7d282a1b58b10b3866693a4f08">classify_cp_cutoff_strength</a>, 7,</div>
<div class="line">               <span class="stringliteral">&quot;Class Pruner CutoffStrength:         &quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>, 14,</div>
<div class="line">               <span class="stringliteral">&quot;Integer Matcher Multiplier  0-255:   &quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a>(<span class="keyword">true</span>),</div>
<div class="line">    <a class="code" href="a00592.html#a05d4e03af9e317d4201155efa15d4d4a">INT_MEMBER</a>(<a class="code" href="a00091.html#a048eceaa95452969dc6cc5d29d97e5cf">il1_adaption_test</a>, 0, <span class="stringliteral">&quot;Dont adapt to i/I at beginning of word&quot;</span>,</div>
<div class="line">               this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00592.html#afe1760253f2b6e3b14c1bf275d8531d4">BOOL_MEMBER</a>(<a class="code" href="a00091.html#a57e449d38b255fe82e61d88ded8b0020">classify_bln_numeric_mode</a>, 0,</div>
<div class="line">                <span class="stringliteral">&quot;Assume the input is numbers [0-9].&quot;</span>, this-&gt;<a class="code" href="a00070.html#ac993425386ae1f73762107299ee8a114">params</a>()),</div>
<div class="line">    <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>(<a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>),</div>
<div class="line">    dict_(&amp;<a class="code" href="a00069.html#af0134325da282ba2dacbb034cf59dde0">image_</a>) {</div>
<div class="line">  <a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a7e1ff22ed9e31fd303ce9fea4f1eeff2">set_compare_callback</a>(</div>
<div class="line">      <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a050fbf6fe3d3cb63b62efbff771495ba">CompareFontInfo</a>));</div>
<div class="line">  <a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#accc4dcfc4923d6ec2cb0f19c9f21ecfb">set_clear_callback</a>(</div>
<div class="line">      <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a1eb40be391904d34559ee7fc06b321f4">FontInfoDeleteCallback</a>));</div>
<div class="line">  <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a7e1ff22ed9e31fd303ce9fea4f1eeff2">set_compare_callback</a>(</div>
<div class="line">      <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a2d183ded4bf706476f186ff0b2d14ba1">CompareFontSet</a>));</div>
<div class="line">  <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#accc4dcfc4923d6ec2cb0f19c9f21ecfb">set_clear_callback</a>(</div>
<div class="line">      <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#ab0d03c86610f630327041d46a069fa94">FontSetDeleteCallback</a>));</div>
<div class="line">  <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">  AdaptiveMatcherCalls = 0;</div>
<div class="line">  BaselineClassifierCalls = 0;</div>
<div class="line">  CharNormClassifierCalls = 0;</div>
<div class="line">  AmbigClassifierCalls = 0;</div>
<div class="line">  NumWordsAdaptedTo = 0;</div>
<div class="line">  NumCharsAdaptedTo = 0;</div>
<div class="line">  NumBaselineClassesTried = 0;</div>
<div class="line">  NumCharNormClassesTried = 0;</div>
<div class="line">  NumAmbigClassesTried = 0;</div>
<div class="line">  NumClassesOutput = 0;</div>
<div class="line">  NumAdaptationsFailed = 0;</div>
<div class="line"></div>
<div class="line">  FeaturesHaveBeenExtracted = <span class="keyword">false</span>;</div>
<div class="line">  FeaturesOK = <span class="keyword">true</span>;</div>
<div class="line">  learn_debug_win_ = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  learn_fragmented_word_debug_win_ = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  learn_fragments_debug_win_ = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">  CharNormCutoffs = <span class="keyword">new</span> <a class="code" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line">  BaselineCutoffs = <span class="keyword">new</span> <a class="code" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4a3fe30721c7f945fb4c5ebfe421639c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::Classify::~Classify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00626_source.html#l00178">178</a> of file <a class="el" href="a00626_source.html">classify.cpp</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  <a class="code" href="a00091.html#ae5e4880c5acc91b77308fbd6ab706b13">EndAdaptiveClassifier</a>();</div>
<div class="line">  <span class="keyword">delete</span> learn_debug_win_;</div>
<div class="line">  <span class="keyword">delete</span> learn_fragmented_word_debug_win_;</div>
<div class="line">  <span class="keyword">delete</span> learn_fragments_debug_win_;</div>
<div class="line">  <span class="keyword">delete</span>[] CharNormCutoffs;</div>
<div class="line">  <span class="keyword">delete</span>[] BaselineCutoffs;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="ac1f369f9a59739a588a4d84f60bac6c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::AdaptableWord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00381.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>Word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;&#160;</td>
          <td class="paramname"><em>BestChoiceWord</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;&#160;</td>
          <td class="paramname"><em>RawChoiceWord</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Return TRUE if the specified word is acceptable for adaptation.</p>
<p>Globals: none</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Word</td><td>current word </td></tr>
    <tr><td class="paramname">BestChoiceWord</td><td>best overall choice for word with context </td></tr>
    <tr><td class="paramname">RawChoiceWord</td><td>best choice for word without context</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>TRUE or FALSE </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu May 30 14:25:06 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00894">894</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                              {</div>
<div class="line">  <span class="keywordtype">int</span> BestChoiceLength = BestChoiceWord.<a class="code" href="a00395.html#a7be59abe97b052dd3aaa324aea8c4a6c">length</a>();</div>
<div class="line">  <span class="keywordtype">float</span> adaptable_score =</div>
<div class="line">    <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a1fa994ce1b5b86d436eb2ab3f2ffbe1b">segment_penalty_dict_case_ok</a> + <a class="code" href="a00620.html#a60c940a7a2c296b84d3cc915267c83c1">ADAPTABLE_WERD_ADJUSTMENT</a>;</div>
<div class="line">  <span class="keywordflow">return</span>   <span class="comment">// rules that apply in general - simplest to compute first</span></div>
<div class="line">      BestChoiceLength &gt; 0 &amp;&amp;</div>
<div class="line">      BestChoiceLength == Word-&gt;<a class="code" href="a00381.html#adfdef9868e61650e076775011382ec70">NumBlobs</a>() &amp;&amp;</div>
<div class="line">      BestChoiceLength &lt;= <a class="code" href="a00620.html#a1243706f4507cae308afd38f4481e919">MAX_ADAPTABLE_WERD_SIZE</a> &amp;&amp;</div>
<div class="line">      <span class="comment">// This basically ensures that the word is at least a dictionary match</span></div>
<div class="line">      <span class="comment">// (freq word, user word, system dawg word, etc).</span></div>
<div class="line">      <span class="comment">// Since all the other adjustments will make adjust factor higher</span></div>
<div class="line">      <span class="comment">// than higher than adaptable_score=1.1+0.05=1.15</span></div>
<div class="line">      <span class="comment">// Since these are other flags that ensure that the word is dict word,</span></div>
<div class="line">      <span class="comment">// this check could be at times redundant.</span></div>
<div class="line">      <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a5de1b4b567459f520ce3b82b68c2c618" title="Returns the adjustment factor for the best choice for the current word.">CurrentBestChoiceAdjustFactor</a>() &lt;= adaptable_score &amp;&amp;</div>
<div class="line">      <span class="comment">// Make sure that alternative choices are not dictionary words.</span></div>
<div class="line">      <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a1f4a0951c1960208fab7c511c90e5477">AlternativeChoicesWorseThan</a>(adaptable_score) &amp;&amp;</div>
<div class="line">      <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a2a0b6b5be811b039c04dd0cc09436f25" title="Returns true if WordChoice is the same as the current best choice.">CurrentBestChoiceIs</a>(BestChoiceWord);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f058451e32538b4dc2c853b82bc6600"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::AdaptiveClassifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>Choices</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00658.html#aad58739a624ab51ab180aac3342c6efc">CLASS_PRUNER_RESULTS</a>&#160;</td>
          <td class="paramname"><em>CPResults</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine calls the adaptive matcher which returns (in an array) the class id of each class matched.</p>
<p>It also returns the number of classes matched. For each class matched it places the best rating found for that class into the Ratings array.</p>
<p>Bad matches are then removed so that they don't need to be sorted. The remaining good matches are then sorted and converted to choices.</p>
<p>This routine also performs some simple speckle filtering.</p>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Mon Mar 11 10:00:58 1991, DSJ, Created.</dd></dl>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Blob</td><td>blob to be classified </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Choices</td><td>List of choices found by adaptive matcher. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">CPResults</td><td>Array of CPResultStruct of size MAX_NUM_CLASSES is filled on return with the choices found by the class pruner and the ratings therefrom. Also contains the detailed results of the integer matcher. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00178">178</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  assert(Choices != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <a class="code" href="a00032.html">ADAPT_RESULTS</a> *Results = <span class="keyword">new</span> <a class="code" href="a00032.html">ADAPT_RESULTS</a>();</div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a450c3b1b225dfa0771edd50732e5d288">Initialize</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00091.html#a28ddc270cb5d2613f5f0f24ad53a5a21">NewAdaptedTemplates</a> (<span class="keyword">true</span>);</div>
<div class="line">  <a class="code" href="a00091.html#a8575af5f97d4037d4fdd2e21b477dd38">DoAdaptiveMatch</a>(Blob, denorm, Results);</div>
<div class="line">  <span class="keywordflow">if</span> (CPResults != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    memcpy(CPResults, Results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>,</div>
<div class="line">           <span class="keyword">sizeof</span>(CPResults[0]) * Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a0e35029ac0c77ad18d35f08c27c99d15">RemoveBadMatches</a>(Results);</div>
<div class="line">  qsort((<span class="keywordtype">void</span> *)Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>, Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>,</div>
<div class="line">        <span class="keyword">sizeof</span>(<a class="code" href="a00291.html">ScoredClass</a>), <a class="code" href="a00620.html#a82aaab0580160422d3587ca9cc533e60">CompareByRating</a>);</div>
<div class="line">  <a class="code" href="a00091.html#af15e83a02b369b820d40c8920b4275e8">RemoveExtraPuncs</a>(Results);</div>
<div class="line">  <a class="code" href="a00091.html#af1f1f794092ce44dff7c242822b6cf68">ConvertMatchesToChoices</a>(denorm, Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>(), Results, Choices);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;AD Matches =  &quot;</span>);</div>
<div class="line">    <a class="code" href="a00091.html#aad46f714847619694546e9ea2784402c">PrintAdaptiveMatchResults</a>(stdout, Results);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00690.html#a23f46ca3d2ee91db4490641e9268a172">LargeSpeckle</a>(Blob))</div>
<div class="line">    <a class="code" href="a00690.html#a39cee874b396f85d17da4ee6cedf4944">AddLargeSpeckleTo</a>(Choices);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a2420bb00ab392215cbc8b5f72d9cf81a">classify_enable_adaptive_debugger</a>)</div>
<div class="line">    <a class="code" href="a00091.html#af9a9def4a6b3bb1a2e36bceff2976c2c">DebugAdaptiveClassifier</a>(Blob, denorm, Results);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  NumClassesOutput += Choices-&gt;length();</div>
<div class="line">  <span class="keywordflow">if</span> (Choices-&gt;length() == 0) {</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="a00091.html#a57e449d38b255fe82e61d88ded8b0020">classify_bln_numeric_mode</a>)</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Empty classification!\n&quot;</span>);  <span class="comment">// Should never normally happen.</span></div>
<div class="line">    Choices = <span class="keyword">new</span> BLOB_CHOICE_LIST();</div>
<div class="line">    BLOB_CHOICE_IT temp_it;</div>
<div class="line">    temp_it.set_to_list(Choices);</div>
<div class="line">    temp_it.add_to_end(</div>
<div class="line">        <span class="keyword">new</span> <a class="code" href="a00052.html">BLOB_CHOICE</a>(0, 50.0<a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a>, -20.0<a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a>, -1, -1, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 0, <span class="keyword">false</span>));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">delete</span> Results;</div>
<div class="line">}                                <span class="comment">/* AdaptiveClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa2f1ff296efea11aabd476cba49a39c5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::AdaptiveClassifierIsFull </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00319">319</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
<div class="fragment"><div class="line">{ <span class="keywordflow">return</span> NumAdaptationsFailed &gt; 0; }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a53629ef3f5562677ae096bbce864e5ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::AdaptToChar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>FontinfoId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to add to templates for ClassId </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">ClassId</td><td>class to add blob to </td></tr>
    <tr><td class="paramname">FontinfoId</td><td>font information from pre-trained templates </td></tr>
    <tr><td class="paramname">Threshold</td><td>minimum match rating to existing template</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>AdaptedTemplates current set of adapted templates</li>
<li>AllProtosOn dummy mask to match against all protos</li>
<li>AllConfigsOn dummy mask to match against all configs</li>
</ul>
<dl class="section return"><dt>Returns:</dt><dd>none </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu Mar 14 09:36:03 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00933">933</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures;</div>
<div class="line">  <a class="code" href="a00199.html">INT_RESULT_STRUCT</a> IntResult;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> IClass;</div>
<div class="line">  <a class="code" href="a00031.html">ADAPT_CLASS</a> Class;</div>
<div class="line">  <a class="code" href="a00348.html">TEMP_CONFIG</a> TempConfig;</div>
<div class="line">  <a class="code" href="a00154.html">FEATURE_SET</a> FloatFeatures;</div>
<div class="line">  <span class="keywordtype">int</span> NewTempConfigId;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a62ffff7932680b25784bfca5079ce347">ResetFeaturesHaveBeenExtracted</a>();</div>
<div class="line">  NumCharsAdaptedTo++;</div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="a00660.html#a6edc7e9d060a50cd3617bb509a061eb5">LegalClassId</a> (ClassId))</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  Class = <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId];</div>
<div class="line">  assert(Class != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00619.html#a1d2aa2b696e73525cb57373fcc5a83ae">IsEmptyAdaptedClass</a>(Class)) {</div>
<div class="line">    <a class="code" href="a00091.html#aee9e5bd336bf1a37a7a1f3b712eb045d">InitAdaptedClass</a>(Blob, denorm, ClassId, FontinfoId, Class,</div>
<div class="line">                     <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    IClass = <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId);</div>
<div class="line"></div>
<div class="line">    NumFeatures = <a class="code" href="a00091.html#a1f21b989c93ff1d297b5bde442fc430c">GetAdaptiveFeatures</a>(Blob, IntFeatures, &amp;FloatFeatures);</div>
<div class="line">    <span class="keywordflow">if</span> (NumFeatures &lt;= 0)</div>
<div class="line">      <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#a30a627213fe38d7ae508cf6eaa946b41">SetBaseLineMatch</a>();</div>
<div class="line">    <span class="comment">// Only match configs with the matching font.</span></div>
<div class="line">    <a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> MatchingFontConfigs = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cfg = 0; cfg &lt; IClass-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>; ++cfg) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#afae8a55c28ee68de92ab1b1dd37c6905">GetFontinfoId</a>(Class, cfg) == FontinfoId) {</div>
<div class="line">        <a class="code" href="a00772.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a>(MatchingFontConfigs, cfg);</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="a00772.html#a1209b8bb0fa7e6e7323cdb48b4165f0d">reset_bit</a>(MatchingFontConfigs, cfg);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(IClass, <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, MatchingFontConfigs,</div>
<div class="line">              NumFeatures, IntFeatures,</div>
<div class="line">              &amp;IntResult, <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">              <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>, <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(MatchingFontConfigs);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a5a3045639a3db979a8d1eb6dc4343e3b">SetAdaptiveThreshold</a>(Threshold);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (IntResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> &lt;= Threshold) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00619.html#a45d630ce43777ee1ab16048b0a846813">ConfigIsPermanent</a> (Class, IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>)) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Found good match to perm config %d = %4.1f%%.\n&quot;</span>,</div>
<div class="line">            IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>, (1.0 - IntResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>) * 100.0);</div>
<div class="line">        <a class="code" href="a00677.html#a72b29c3d875eb9a2241385b1f1388b2d">FreeFeatureSet</a>(FloatFeatures);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      TempConfig = <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a> (Class, IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>);</div>
<div class="line">      <a class="code" href="a00619.html#ac59a542b45e0a63d6b99ef48a189e1e0">IncreaseConfidence</a>(TempConfig);</div>
<div class="line">      <span class="keywordflow">if</span> (TempConfig-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a> &gt; Class-&gt;<a class="code" href="a00031.html#a88d1300e6657fc7c98af721983018b36">MaxNumTimesSeen</a>) {</div>
<div class="line">        Class-&gt;<a class="code" href="a00031.html#a88d1300e6657fc7c98af721983018b36">MaxNumTimesSeen</a> = TempConfig-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">        <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Increasing reliability of temp config %d to %d.\n&quot;</span>,</div>
<div class="line">          IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>, TempConfig-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a>);</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a786c5f6e2a5cd8aac2ed4dd89af84fea">TempConfigReliable</a>(ClassId, TempConfig)) {</div>
<div class="line">        <a class="code" href="a00091.html#aefb0cfe284dd67601798f7ae510b787f">MakePermanent</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>, ClassId, IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>, denorm,</div>
<div class="line">                      Blob);</div>
<div class="line">        <a class="code" href="a00091.html#a954c9085f840572567462c9e0ff3551a">UpdateAmbigsGroup</a>(ClassId, denorm, Blob);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">        <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Found poor match to temp config %d = %4.1f%%.\n&quot;</span>,</div>
<div class="line">          IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>, (1.0 - IntResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>) * 100.0);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt; 2)</div>
<div class="line">          <a class="code" href="a00091.html#aaa7b4a01a6f9bd1f088982a4011274e5">DisplayAdaptedChar</a>(Blob, denorm, IClass);</div>
<div class="line">      }</div>
<div class="line">      NewTempConfigId = <a class="code" href="a00091.html#a59900939784eac1e2e6ebfec1f82bb58">MakeNewTemporaryConfig</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>,</div>
<div class="line">                                               ClassId,</div>
<div class="line">                                               FontinfoId,</div>
<div class="line">                                               NumFeatures,</div>
<div class="line">                                               IntFeatures,</div>
<div class="line">                                               FloatFeatures);</div>
<div class="line">      <span class="keywordflow">if</span> (NewTempConfigId &gt;= 0 &amp;&amp;</div>
<div class="line">          <a class="code" href="a00091.html#a786c5f6e2a5cd8aac2ed4dd89af84fea">TempConfigReliable</a>(ClassId, <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(Class, NewTempConfigId))) {</div>
<div class="line">        <a class="code" href="a00091.html#aefb0cfe284dd67601798f7ae510b787f">MakePermanent</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>, ClassId, NewTempConfigId, denorm, Blob);</div>
<div class="line">        <a class="code" href="a00091.html#a954c9085f840572567462c9e0ff3551a">UpdateAmbigsGroup</a>(ClassId, denorm, Blob);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt; 1) {</div>
<div class="line">        <a class="code" href="a00091.html#aaa7b4a01a6f9bd1f088982a4011274e5">DisplayAdaptedChar</a>(Blob, denorm, IClass);</div>
<div class="line">      }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    }</div>
<div class="line">    <a class="code" href="a00677.html#a72b29c3d875eb9a2241385b1f1388b2d">FreeFeatureSet</a>(FloatFeatures);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* AdaptToChar */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d9076164677e7e5a863a8a5d265b957"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::AdaptToPunc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>FontinfoId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Threshold</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to add to templates for ClassId </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">ClassId</td><td>class to add blob to </td></tr>
    <tr><td class="paramname">FontinfoId</td><td>font information from pre-trained teamples </td></tr>
    <tr><td class="paramname">Threshold</td><td>minimum match rating to existing template</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>PreTrainedTemplates current set of built-in templates</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu Mar 14 09:36:03 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01082">1082</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  <a class="code" href="a00032.html">ADAPT_RESULTS</a> *Results = <span class="keyword">new</span> <a class="code" href="a00032.html">ADAPT_RESULTS</a>();</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a450c3b1b225dfa0771edd50732e5d288">Initialize</a>();</div>
<div class="line">  <a class="code" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier</a>(Blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, Results);</div>
<div class="line">  <a class="code" href="a00091.html#a0e35029ac0c77ad18d35f08c27c99d15">RemoveBadMatches</a>(Results);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> != 1) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Rejecting punc = %s (Alternatives = &quot;</span>,</div>
<div class="line">               <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId));</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">for</span> (i = 0; i &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; i++)</div>
<div class="line">        <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>));</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;)\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">    #ifndef SECURE_NAMES</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Adapting to punc = %s, thr= %g\n&quot;</span>,</div>
<div class="line">               <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId), Threshold);</div>
<div class="line"><span class="preprocessor">    #endif</span></div>
<div class="line"><span class="preprocessor"></span>    <a class="code" href="a00091.html#a53629ef3f5562677ae096bbce864e5ab">AdaptToChar</a>(Blob, denorm, ClassId, FontinfoId, Threshold);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> Results;</div>
<div class="line">}                                <span class="comment">/* AdaptToPunc */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3681915077046082b4d99532a3f3da61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::AddNewResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shape_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>adapted</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fontinfo_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fontinfo_id2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine adds the result of a classification into Results. If the new rating is much worse than the current best rating, it is not entered into results because it would end up being stripped later anyway. If the new rating is better than the old rating for the class, it replaces the old rating. If this is the first rating for the class, the class is added to the list of matched classes in Results. If the new rating is better than the best so far, it becomes the best so far.</p>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a10595e84248f68a98f8e73bcdb6ae89a">matcher_bad_match_pad</a> defines limits of an acceptable match</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">results</td><td>results to add new result to </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">class_id</td><td>class of new result </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">shape_id</td><td>shape index </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rating</td><td>rating of new result </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">adapted</td><td>adapted match or not </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">config</td><td>config id of new result </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">fontinfo_id</td><td>font information of the new result </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">fontinfo_id2</td><td>font information of the 2nd choice result</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 18:19:29 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01142">1142</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  <a class="code" href="a00291.html">ScoredClass</a> *old_match = <a class="code" href="a00620.html#a3cedbdc7ad221f31895c55506410fd98">FindScoredUnichar</a>(results, class_id);</div>
<div class="line">  <a class="code" href="a00291.html">ScoredClass</a> match =</div>
<div class="line">      { class_id,</div>
<div class="line">        shape_id,</div>
<div class="line">        rating,</div>
<div class="line">        adapted,</div>
<div class="line">        <span class="keyword">static_cast&lt;</span><a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(config),</div>
<div class="line">        static_cast&lt;inT16&gt;(fontinfo_id),</div>
<div class="line">        <span class="keyword">static_cast&lt;</span><a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a><span class="keyword">&gt;</span>(fontinfo_id2) };</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (rating &gt; results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> + <a class="code" href="a00091.html#a10595e84248f68a98f8e73bcdb6ae89a">matcher_bad_match_pad</a> ||</div>
<div class="line">      (old_match &amp;&amp; rating &gt;= old_match-&gt;<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>))</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(class_id))</div>
<div class="line">    results-&gt;<a class="code" href="a00032.html#ab6a520c3c59a1f1a3f4d1c27bf5d3000">HasNonfragment</a> = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">  if (old_match)</div>
<div class="line">    old_match-&gt;<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> = rating;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>++] = match;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (rating &lt; results-&gt;best_match.rating &amp;&amp;</div>
<div class="line">      <span class="comment">// Ensure that fragments do not affect best rating, class and config.</span></div>
<div class="line">      <span class="comment">// This is needed so that at least one non-fragmented character is</span></div>
<div class="line">      <span class="comment">// always present in the results.</span></div>
<div class="line">      <span class="comment">// TODO(daria): verify that this helps accuracy and does not</span></div>
<div class="line">      <span class="comment">// hurt performance.</span></div>
<div class="line">      !<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(class_id)) {</div>
<div class="line">    results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a> = match;</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* AddNewResult */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac7501f294525f6dd7fca4a3512ae0dcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::AmbigClassifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *&#160;</td>
          <td class="paramname"><em>Classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *&#160;</td>
          <td class="paramname"><em>Ambiguities</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine is identical to <a class="el" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier()</a> except that it does no class pruning. It simply matches the unknown blob against the classes listed in Ambiguities.</p>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> mask that enables all protos</li>
<li><a class="el" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a> mask that enables all configs</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Blob</td><td>blob to be classified </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">Templates</td><td>built-in templates to classify against </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">Classes</td><td>adapted class templates </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">Ambiguities</td><td>array of class id's to match against </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Results</td><td>place to put match results</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 19:40:36 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01205">1205</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* CharNormArray = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()];</div>
<div class="line">  <a class="code" href="a00199.html">INT_RESULT_STRUCT</a> IntResult;</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId;</div>
<div class="line"></div>
<div class="line">  AmbigClassifierCalls++;</div>
<div class="line"></div>
<div class="line">  NumFeatures = <a class="code" href="a00091.html#a1076d5d08686e48d39ef3eb07e711fb6">GetCharNormFeatures</a>(Blob, denorm, Templates, IntFeatures,</div>
<div class="line">                                    <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, CharNormArray,</div>
<div class="line">                                    &amp;(Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>), <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (NumFeatures &lt;= 0) {</div>
<div class="line">    <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">bool</span> debug = <a class="code" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a> &gt;= 2 || <a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt; 1;</div>
<div class="line">  <span class="keywordflow">if</span> (debug)</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;AM Matches =  &quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> top = Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">  <span class="keywordtype">int</span> bottom = Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line">  <span class="keywordflow">while</span> (*Ambiguities &gt;= 0) {</div>
<div class="line">    ClassId = *Ambiguities;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#adff6fd8fca725fa346db25010b3be21e">SetCharNormMatch</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(Templates, ClassId),</div>
<div class="line">              <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>,</div>
<div class="line">              NumFeatures, IntFeatures,</div>
<div class="line">              &amp;IntResult,</div>
<div class="line">              <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>, <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>,</div>
<div class="line">              <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(<a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, debug, ClassId, bottom, top, 0,</div>
<div class="line">                                    Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>, CharNormArray,</div>
<div class="line">                                    IntResult, Results);</div>
<div class="line">    Ambiguities++;</div>
<div class="line"></div>
<div class="line">    NumAmbigClassesTried++;</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">}                                <span class="comment">/* AmbigClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab7022031939236cac2fe6b661e6f657b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> * tesseract::Classify::BaselineClassifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine extracts baseline normalized features from the unknown character and matches them against the specified set of templates. The classes which match are added to Results.</p>
<p>Globals:</p>
<ul>
<li>BaselineCutoffs expected num features for each class</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to be classified </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Templates</td><td>current set of adapted templates </td></tr>
    <tr><td class="paramname">Results</td><td>place to put match results</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Array of possible ambiguous chars that should be checked. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 19:38:03 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01423">1423</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line">  <span class="keywordtype">int</span> NumClasses;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* CharNormArray = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()];</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId;</div>
<div class="line"></div>
<div class="line">  BaselineClassifierCalls++;</div>
<div class="line"></div>
<div class="line">  NumFeatures = <a class="code" href="a00091.html#a4bf0e47e0ae00a0cec215a887cef8c65">GetBaselineFeatures</a>(</div>
<div class="line">      Blob, denorm, Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, IntFeatures, CharNormArray,</div>
<div class="line">      &amp;(Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>));</div>
<div class="line">  <span class="keywordflow">if</span> (NumFeatures &lt;= 0) {</div>
<div class="line">    <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  NumClasses = <a class="code" href="a00091.html#af60b52006bbea0cc1727d543c3fcd1ad">PruneClasses</a>(Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, NumFeatures, IntFeatures,</div>
<div class="line">                            CharNormArray, BaselineCutoffs, Results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>);</div>
<div class="line"></div>
<div class="line">  NumBaselineClassesTried += NumClasses;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a> &gt;= 2 || <a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt; 1)</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;BL Matches =  &quot;</span>);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#a30a627213fe38d7ae508cf6eaa946b41">SetBaseLineMatch</a>();</div>
<div class="line">  <a class="code" href="a00091.html#a9df3ff8623acd0ab30286ace7362045c">MasterMatcher</a>(Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, NumFeatures, IntFeatures, CharNormArray,</div>
<div class="line">                Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>, <a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>, NumClasses,</div>
<div class="line">                Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>(), Results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>, Results);</div>
<div class="line"></div>
<div class="line">  <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">  ClassId = Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (ClassId == <a class="code" href="a00805.html#a6ce548e51895ce0226ee145753a9c815">NO_CLASS</a>)</div>
<div class="line">    <span class="keywordflow">return</span> (<a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="comment">/* this is a bug - maybe should return &quot;&quot; */</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId]-&gt;</div>
<div class="line">      <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>[Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#aa8ff624b603b87dd4cc41304e1e72b05">config</a>].Perm-&gt;Ambigs;</div>
<div class="line">}                                <span class="comment">/* BaselineClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e552819a03cc6f169e18a58b16696a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::CharNormClassifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine extracts character normalized features from the unknown character and matches them against the specified set of templates. The classes which match are added to Results.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to be classified </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Templates</td><td>templates to classify unknown against </td></tr>
    <tr><td class="paramname">Results</td><td>place to put match results</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>CharNormCutoffs expected num features for each class</li>
<li>AllProtosOn mask that enables all protos</li>
<li>AllConfigsOn mask that enables all configs</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 16:02:52 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01487">1487</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                         {</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line">  <span class="keywordtype">int</span> NumClasses;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> IntFeatures;</div>
<div class="line"></div>
<div class="line">  CharNormClassifierCalls++;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* CharNormArray = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()];</div>
<div class="line">  <span class="keywordtype">int</span> num_pruner_classes = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>(),</div>
<div class="line">                               <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* PrunerNormArray = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[num_pruner_classes];</div>
<div class="line">  NumFeatures = <a class="code" href="a00091.html#a1076d5d08686e48d39ef3eb07e711fb6">GetCharNormFeatures</a>(Blob, denorm, Templates, IntFeatures,</div>
<div class="line">                                    PrunerNormArray, CharNormArray,</div>
<div class="line">                                    &amp;(Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>), <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (NumFeatures &lt;= 0) {</div>
<div class="line">    <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">    <span class="keyword">delete</span> [] PrunerNormArray;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  NumClasses = <a class="code" href="a00091.html#af60b52006bbea0cc1727d543c3fcd1ad">PruneClasses</a>(Templates, NumFeatures, IntFeatures,</div>
<div class="line">                            PrunerNormArray,</div>
<div class="line">                            <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? &amp;shapetable_cutoffs_[0]</div>
<div class="line">                                                 : CharNormCutoffs,</div>
<div class="line">                            Results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a96f1213af9f43f2ec0ab9e22f32da3b6">tessedit_single_match</a> &amp;&amp; NumClasses &gt; 1)</div>
<div class="line">    NumClasses = 1;</div>
<div class="line">  NumCharNormClassesTried += NumClasses;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#adff6fd8fca725fa346db25010b3be21e">SetCharNormMatch</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a9df3ff8623acd0ab30286ace7362045c">MasterMatcher</a>(Templates, NumFeatures, IntFeatures, CharNormArray,</div>
<div class="line">                <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>, NumClasses,</div>
<div class="line">                Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>(), Results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>, Results);</div>
<div class="line">  <span class="keyword">delete</span> [] CharNormArray;</div>
<div class="line">  <span class="keyword">delete</span> [] PrunerNormArray;</div>
<div class="line">  <span class="keywordflow">return</span> NumFeatures;</div>
<div class="line">}                                <span class="comment">/* CharNormClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa3907b770bdeb45e652e0ab122568cf4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::CharNormTrainingSample </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>pruner_only</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00376.html">TrainingSample</a> &amp;&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00175.html">GenericVector</a>&lt; <a class="el" href="a00306.html">ShapeRating</a> &gt; *&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01531">1531</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                          {</div>
<div class="line">  results-&gt;<a class="code" href="a00175.html#a9cdbff49b186574b83e43afba606fdd9">clear</a>();</div>
<div class="line">  <a class="code" href="a00032.html">ADAPT_RESULTS</a>* adapt_results = <span class="keyword">new</span> <a class="code" href="a00032.html">ADAPT_RESULTS</a>();</div>
<div class="line">  adapt_results-&gt;<a class="code" href="a00032.html#a450c3b1b225dfa0771edd50732e5d288">Initialize</a>();</div>
<div class="line">  <span class="comment">// Compute the bounding box of the features.</span></div>
<div class="line">  <span class="keywordtype">int</span> num_features = <a class="code" href="a00288.html">sample</a>.num_features();</div>
<div class="line">  <a class="code" href="a00347.html">TBOX</a> blob_box;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a> = 0; <a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a> &lt; num_features; ++<a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a>) {</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00196.html">INT_FEATURE_STRUCT</a> feature = <a class="code" href="a00288.html">sample</a>.features()[<a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a>];</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> fbox(feature.<a class="code" href="a00196.html#a6b250df12a9b06b5ed0c1a7c403f0275">X</a>, feature.<a class="code" href="a00196.html#a09931683890fb52d22ec6c75048a2bce">Y</a>, feature.<a class="code" href="a00196.html#a6b250df12a9b06b5ed0c1a7c403f0275">X</a>, feature.<a class="code" href="a00196.html#a09931683890fb52d22ec6c75048a2bce">Y</a>);</div>
<div class="line">    blob_box += fbox;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Compute the char_norm_array from the saved cn_feature.</span></div>
<div class="line">  <a class="code" href="a00155.html">FEATURE</a> norm_feature = <a class="code" href="a00677.html#a32a08c42617c8dd6a156c1c8d7fb2cbb">NewFeature</a>(&amp;CharNormDesc);</div>
<div class="line">  norm_feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>] = <a class="code" href="a00288.html">sample</a>.cn_feature(<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>);</div>
<div class="line">  norm_feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506af859d8f455da531fb41201c80187dccf">CharNormLength</a>] = <a class="code" href="a00288.html">sample</a>.cn_feature(<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506af859d8f455da531fb41201c80187dccf">CharNormLength</a>);</div>
<div class="line">  norm_feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>] = <a class="code" href="a00288.html">sample</a>.cn_feature(<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>);</div>
<div class="line">  norm_feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>] = <a class="code" href="a00288.html">sample</a>.cn_feature(<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>);</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* char_norm_array = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()];</div>
<div class="line">  <span class="keywordtype">int</span> num_pruner_classes = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>(),</div>
<div class="line">                               <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* pruner_norm_array = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[num_pruner_classes];</div>
<div class="line">  adapt_results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a> =</div>
<div class="line">      <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="a00673.html#a42d064127b80043f5af5a4e77305d412">ActualOutlineLength</a>(norm_feature) * 20 + 0.5);</div>
<div class="line">  <a class="code" href="a00091.html#a8f49de2f8da7b066bd8ece0641edcca1">ComputeCharNormArrays</a>(norm_feature, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, char_norm_array,</div>
<div class="line">                        pruner_norm_array);</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> num_classes = <a class="code" href="a00091.html#af60b52006bbea0cc1727d543c3fcd1ad">PruneClasses</a>(<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, num_features,</div>
<div class="line">                                 <a class="code" href="a00288.html">sample</a>.features(),</div>
<div class="line">                                 pruner_norm_array,</div>
<div class="line">                                 <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? &amp;shapetable_cutoffs_[0]</div>
<div class="line">                                                      : CharNormCutoffs,</div>
<div class="line">                                 adapt_results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>);</div>
<div class="line">  <span class="keyword">delete</span> [] pruner_norm_array;</div>
<div class="line">  <span class="keywordflow">if</span> (pruner_only) {</div>
<div class="line">    <span class="comment">// Convert pruner results to output format.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_classes; ++i) {</div>
<div class="line">      <span class="keywordtype">int</span> class_id = adapt_results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>[i].Class;</div>
<div class="line">      <span class="keywordtype">int</span> shape_id = class_id;</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        <span class="comment">// All shapes in a class have the same combination of unichars, so</span></div>
<div class="line">        <span class="comment">// it doesn&#39;t really matter which config we give it, as we aren&#39;t</span></div>
<div class="line">        <span class="comment">// trying to get the font here.</span></div>
<div class="line">        shape_id = <a class="code" href="a00091.html#a1002c7f80352c6ceac4af82ee35e5e06">ClassAndConfigIDToFontOrShapeID</a>(class_id, 0);</div>
<div class="line">      }</div>
<div class="line">      results-&gt;<a class="code" href="a00175.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(</div>
<div class="line">          ShapeRating(shape_id, 1.0<a class="code" href="a00428.html#a469169df397b589e709dc744f1346831">f</a> - adapt_results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>[i].Rating));</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#adff6fd8fca725fa346db25010b3be21e">SetCharNormMatch</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a9df3ff8623acd0ab30286ace7362045c">MasterMatcher</a>(<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, num_features, <a class="code" href="a00288.html">sample</a>.features(),</div>
<div class="line">                  char_norm_array,</div>
<div class="line">                  <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>, num_classes,</div>
<div class="line">                  blob_box, adapt_results-&gt;<a class="code" href="a00032.html#a66adcc458cd1f9b662e9e2ef5b88b74f">CPResults</a>, adapt_results);</div>
<div class="line">    <span class="comment">// Convert master matcher results to output format.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; adapt_results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; i++) {</div>
<div class="line">      <a class="code" href="a00291.html">ScoredClass</a> next = adapt_results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i];</div>
<div class="line">      results-&gt;<a class="code" href="a00175.html#a0dc89fe2a365b04a61017f9d78c1a303">push_back</a>(ShapeRating(next.<a class="code" href="a00291.html#ab3db24ffe2690f52d86053ba1f631520">shape_id</a>, 1.0f - next.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>));</div>
<div class="line">    }</div>
<div class="line">    results-&gt;<a class="code" href="a00175.html#a999bbd8ff336c81fe1198ea714c7936d">sort</a>(&amp;<a class="code" href="a00306.html#a2e3c1c3af03514c4dc2faef9b99c1eb1">ShapeRating::SortDescendingRating</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] char_norm_array;</div>
<div class="line">  <span class="keyword">delete</span> adapt_results;</div>
<div class="line">  <span class="keywordflow">return</span> num_features;</div>
<div class="line">}                                <span class="comment">/* CharNormTrainingSample */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1002c7f80352c6ceac4af82ee35e5e06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::ClassAndConfigIDToFontOrShapeID </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>int_result_config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02733">2733</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                           {</div>
<div class="line">  <span class="keywordtype">int</span> font_set_id = <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[class_id]-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>;</div>
<div class="line">  <span class="comment">// Older inttemps have no font_ids.</span></div>
<div class="line">  <span class="keywordflow">if</span> (font_set_id &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span> kBlankFontinfoId;</div>
<div class="line">  <span class="keyword">const</span> FontSet &amp;fs = <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a3b3107bc72d9edfe501eaba7404de7eb" title="Return the object from an id.">get</a>(font_set_id);</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(int_result_config &gt;= 0 &amp;&amp; int_result_config &lt; fs.size);</div>
<div class="line">  <span class="keywordflow">return</span> fs.configs[int_result_config];</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6fc9e3752efb2fe0d74920e082a59bd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00319.html">STRING</a> tesseract::Classify::ClassIDToDebugStr </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>config_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02720">2720</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <a class="code" href="a00319.html">STRING</a> class_string;</div>
<div class="line">  <span class="keywordflow">if</span> (templates == <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> &amp;&amp; <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordtype">int</span> shape_id = <a class="code" href="a00091.html#a1002c7f80352c6ceac4af82ee35e5e06">ClassAndConfigIDToFontOrShapeID</a>(class_id, config_id);</div>
<div class="line">    class_string = <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a87937c115d25036a961833c8b8ab79dd">DebugStr</a>(shape_id);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    class_string = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a2543f3cb2b8da0160a87088940cc58d2">debug_str</a>(class_id);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> class_string;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8a68035cfc5ee866f2d39360072ab77c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ClassifyAsNoise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine computes a rating which reflects the likelihood that the blob being classified is a noise blob. NOTE: assumes that the blob length has already been computed and placed into Results.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Results</td><td>results to add noise classification to</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>matcher_avg_noise_size avg. length of a noise blob</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 18:36:52 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01615">1615</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">  <span class="keyword">register</span> <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Rating;</div>
<div class="line"></div>
<div class="line">  Rating = Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a> / <a class="code" href="a00091.html#a9723b1f4a341f42ddfc68d2f531c7dd3">matcher_avg_noise_size</a>;</div>
<div class="line">  Rating *= Rating;</div>
<div class="line">  Rating /= 1.0 + Rating;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a3681915077046082b4d99532a3f3da61">AddNewResult</a>(Results, <a class="code" href="a00805.html#a6ce548e51895ce0226ee145753a9c815">NO_CLASS</a>, -1, Rating, <span class="keyword">false</span>, -1,</div>
<div class="line">               kBlankFontinfoId, kBlankFontinfoId);</div>
<div class="line">}                                <span class="comment">/* ClassifyAsNoise */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac0de90c99552cdc286f934d344790085"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ClearCharNormArray </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>char_norm_array</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For each class in the unicharset, clears the corresponding entry in char_norm_array. char_norm_array is indexed by unichar_id.</p>
<p>Globals:</p>
<ul>
<li>none</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">char_norm_array</td><td>array to be cleared</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Wed Feb 20 11:20:54 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00643_source.html#l00048">48</a> of file <a class="el" href="a00643_source.html">float2int.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line">  memset(char_norm_array, 0, <span class="keyword">sizeof</span>(*char_norm_array) * <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>());</div>
<div class="line">}                                <span class="comment">/* ClearCharNormArray */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8f49de2f8da7b066bd8ece0641edcca1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ComputeCharNormArrays </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00155.html">FEATURE_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>norm_feature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>char_norm_array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>pruner_array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02092">2092</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line">  <a class="code" href="a00091.html#a3abc0b280fe8a88d57a35d2d578ef47a">ComputeIntCharNormArray</a>(*norm_feature, char_norm_array);</div>
<div class="line">  <span class="keywordflow">if</span> (pruner_array != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <a class="code" href="a00091.html#a3abc0b280fe8a88d57a35d2d578ef47a">ComputeIntCharNormArray</a>(*norm_feature, pruner_array);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      memset(pruner_array, <a class="code" href="a00577.html#a05682ca8de174141447ff05a2289a27c">MAX_UINT8</a>,</div>
<div class="line">             templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> * <span class="keyword">sizeof</span>(pruner_array[0]));</div>
<div class="line">      <span class="comment">// Each entry in the pruner norm array is the MIN of all the entries of</span></div>
<div class="line">      <span class="comment">// the corresponding unichars in the CharNormArray.</span></div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0; <span class="keywordtype">id</span> &lt; templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; ++id) {</div>
<div class="line">        <span class="keywordtype">int</span> font_set_id = templates-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[id]-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>;</div>
<div class="line">        <span class="keyword">const</span> FontSet &amp;fs = <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a3b3107bc72d9edfe501eaba7404de7eb" title="Return the object from an id.">get</a>(font_set_id);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> config = 0; config &lt; fs.size; ++config) {</div>
<div class="line">          <span class="keyword">const</span> Shape&amp; shape = <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a9334161c64756c591ff7d4fca22277f5">GetShape</a>(fs.configs[config]);</div>
<div class="line">          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; shape.size(); ++c) {</div>
<div class="line">            <span class="keywordflow">if</span> (char_norm_array[shape[c].unichar_id] &lt; pruner_array[<span class="keywordtype">id</span>])</div>
<div class="line">              pruner_array[id] = char_norm_array[shape[c].unichar_id];</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00677.html#acaf54a6410150ec74f66ec6621f1352f">FreeFeature</a>(norm_feature);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7c6031863d4dafb400551cc4f151f3b5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::ComputeCorrectedRating </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>unichar_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>cp_rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>im_rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>feature_misses</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bottom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blob_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>cn_factors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01360">1360</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  <span class="comment">// Compute class feature corrections.</span></div>
<div class="line">  <span class="keywordtype">double</span> cn_corrected = <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#ab943619d1ec5d510c5fd9a2ba7bbb55d">ApplyCNCorrection</a>(im_rating, blob_length,</div>
<div class="line">                                              cn_factors[unichar_id]);</div>
<div class="line">  <span class="keywordtype">double</span> miss_penalty = <a class="code" href="a00091.html#a0be36efceb5fcf41dfbc032516af2ace">tessedit_class_miss_scale</a> * feature_misses;</div>
<div class="line">  <span class="keywordtype">double</span> vertical_penalty = 0.0;</div>
<div class="line">  <span class="comment">// Penalize non-alnums for being vertical misfits.</span></div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(unichar_id) &amp;&amp;</div>
<div class="line">      !<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a5951dde3ab90c12c309d776570a10725">get_isdigit</a>(unichar_id) &amp;&amp;</div>
<div class="line">      cn_factors[unichar_id] != 0 &amp;&amp; <a class="code" href="a00091.html#a67a98c273b9c1b7cc951fcb20e376bf3">classify_misfit_junk_penalty</a> &gt; 0.0) {</div>
<div class="line">    <span class="keywordtype">int</span> min_bottom, max_bottom, min_top, max_top;</div>
<div class="line">    <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#af2e0d12e80aa3aa985652d73eaf1e95f">get_top_bottom</a>(unichar_id, &amp;min_bottom, &amp;max_bottom,</div>
<div class="line">                              &amp;min_top, &amp;max_top);</div>
<div class="line">    <span class="keywordflow">if</span> (debug) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;top=%d, vs [%d, %d], bottom=%d, vs [%d, %d]\n&quot;</span>,</div>
<div class="line">              top, min_top, max_top, bottom, min_bottom, max_bottom);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (top &lt; min_top || top &gt; max_top ||</div>
<div class="line">        bottom &lt; min_bottom || bottom &gt; max_bottom) {</div>
<div class="line">      vertical_penalty = <a class="code" href="a00091.html#a67a98c273b9c1b7cc951fcb20e376bf3">classify_misfit_junk_penalty</a>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">double</span> result =cn_corrected + miss_penalty + vertical_penalty;</div>
<div class="line">  <span class="keywordflow">if</span> (result &gt; <a class="code" href="a00620.html#a93902888a2216c8e4a03ddc10aed7f41">WORST_POSSIBLE_RATING</a>)</div>
<div class="line">    result = <a class="code" href="a00620.html#a93902888a2216c8e4a03ddc10aed7f41">WORST_POSSIBLE_RATING</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (debug) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s: %2.1f(CP%2.1f, IM%2.1f + CN%.2f(%d) + MP%2.1f + VP%2.1f)\n&quot;</span>,</div>
<div class="line">            <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(unichar_id),</div>
<div class="line">            result * 100.0,</div>
<div class="line">            cp_rating * 100.0,</div>
<div class="line">            im_rating * 100.0,</div>
<div class="line">            (cn_corrected - im_rating) * 100.0,</div>
<div class="line">            cn_factors[unichar_id],</div>
<div class="line">            miss_penalty * 100.0,</div>
<div class="line">            vertical_penalty * 100.0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> result;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3abc0b280fe8a88d57a35d2d578ef47a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ComputeIntCharNormArray </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00155.html">FEATURE_STRUCT</a> &amp;&#160;</td>
          <td class="paramname"><em>norm_feature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>char_norm_array</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For each class in unicharset, computes the match between norm_feature and the normalization protos for that class. Converts this number to the range from 0 - 255 and stores it into char_norm_array. CharNormArray is indexed by unichar_id.</p>
<p>Globals:</p>
<ul>
<li>none</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">norm_feature</td><td>character normalization feature </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">char_norm_array</td><td>place to put results of size unicharset.size()</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Wed Feb 20 11:20:54 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00643_source.html#l00069">69</a> of file <a class="el" href="a00643_source.html">float2int.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>(); i++) {</div>
<div class="line">    <span class="keywordtype">int</span> norm_adjust = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="a00660.html#a5a763027f420d44c110f0887f297259c">INT_CHAR_NORM_RANGE</a> *</div>
<div class="line">      <a class="code" href="a00091.html#a3205427bd0f3abae31ab6c3092ca0662">ComputeNormMatch</a>(i, norm_feature, <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>));</div>
<div class="line">    char_norm_array[i] = <a class="code" href="a00576.html#af8739168d5b3235996eeb25dac3c4044">ClipToRange</a>(norm_adjust, 0, <a class="code" href="a00643.html#a507d2964a00ad9a1d82e6c5ae21720be">MAX_INT_CHAR_NORM</a>);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* ComputeIntCharNormArray */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae1f3fc88bf28a4a169273bcf2515610e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ComputeIntFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a>&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>IntFeatures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine converts each floating point pico-feature in Features into integer format and saves it into IntFeatures.</p>
<p>Globals:</p>
<ul>
<li>none</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Features</td><td>floating point pico-features to be converted </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">IntFeatures</td><td>array to put converted features into</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Wed Feb 20 10:58:45 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00643_source.html#l00094">94</a> of file <a class="el" href="a00643_source.html">float2int.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  <span class="keywordtype">int</span> Fid;</div>
<div class="line">  <a class="code" href="a00155.html">FEATURE</a> Feature;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> YShift;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a> == <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>)</div>
<div class="line">    YShift = <a class="code" href="a00644.html#a0cd5a36a70bcf28d6727fe56e419b5a2">BASELINE_Y_SHIFT</a>;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    YShift = <a class="code" href="a00660.html#abd4c49783ccd23c297ef5650ccce9c9c">Y_SHIFT</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (Fid = 0; Fid &lt; Features-&gt;<a class="code" href="a00154.html#a154a6ca419f3f16fccf11b7217351570">NumFeatures</a>; Fid++) {</div>
<div class="line">    Feature = Features-&gt;<a class="code" href="a00154.html#a4664d6a22a9d12f4011de4d877664c45">Features</a>[Fid];</div>
<div class="line"></div>
<div class="line">    IntFeatures[Fid].X = <a class="code" href="a00659.html#aae1e369081aff0da8ca513a261973598">BucketFor</a> (Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aacaf28d56154a908256d7b3beb62977e2fc">PicoFeatX</a>],</div>
<div class="line">      <a class="code" href="a00660.html#a7c72e90cfafe9834907d05ddf55bff09">X_SHIFT</a>, <a class="code" href="a00644.html#ae30a299d1150890d3f3606094fbf1169">INT_FEAT_RANGE</a>);</div>
<div class="line">    IntFeatures[Fid].Y = <a class="code" href="a00659.html#aae1e369081aff0da8ca513a261973598">BucketFor</a> (Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca43884de5e2e87be26f9642b50135f98a">PicoFeatY</a>],</div>
<div class="line">      YShift, <a class="code" href="a00644.html#ae30a299d1150890d3f3606094fbf1169">INT_FEAT_RANGE</a>);</div>
<div class="line">    IntFeatures[Fid].Theta = <a class="code" href="a00659.html#ae3184eb086a2f8eb3b7b4c42bae5ca22">CircBucketFor</a> (Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca9895f2baa648985ab8ee5586c1563511">PicoFeatDir</a>],</div>
<div class="line">      <a class="code" href="a00660.html#a0be004c4069c9a09479eef2955f1097e">ANGLE_SHIFT</a>, <a class="code" href="a00644.html#ae30a299d1150890d3f3606094fbf1169">INT_FEAT_RANGE</a>);</div>
<div class="line">    IntFeatures[Fid].CP_misses = 0;</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* ComputeIntFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3205427bd0f3abae31ab6c3092ca0662"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> tesseract::Classify::ComputeNormMatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00155.html">FEATURE_STRUCT</a> &amp;&#160;</td>
          <td class="paramname"><em>feature</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>DebugMatch</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00675_source.html#l00073">73</a> of file <a class="el" href="a00675_source.html">normmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **     Parameters:</span></div>
<div class="line"><span class="comment"> **             ClassId         id of class to match against</span></div>
<div class="line"><span class="comment"> **             Feature         character normalization feature</span></div>
<div class="line"><span class="comment"> **             DebugMatch      controls dump of debug info</span></div>
<div class="line"><span class="comment"> **     Globals:</span></div>
<div class="line"><span class="comment"> **             NormProtos      character normalization prototypes</span></div>
<div class="line"><span class="comment"> **     Operation: This routine compares Features against each character</span></div>
<div class="line"><span class="comment"> **             normalization proto for ClassId and returns the match</span></div>
<div class="line"><span class="comment"> **             rating of the best match.</span></div>
<div class="line"><span class="comment"> **     Return: Best match rating for Feature against protos of ClassId.</span></div>
<div class="line"><span class="comment"> **     Exceptions: none</span></div>
<div class="line"><span class="comment"> **     History: Wed Dec 19 16:56:12 1990, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> Protos;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> BestMatch;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Match;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Delta;</div>
<div class="line">  <a class="code" href="a00273.html">PROTOTYPE</a> *Proto;</div>
<div class="line">  <span class="keywordtype">int</span> ProtoId;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* handle requests for classification as noise */</span></div>
<div class="line">  <span class="keywordflow">if</span> (ClassId == <a class="code" href="a00805.html#a6ce548e51895ce0226ee145753a9c815">NO_CLASS</a>) {</div>
<div class="line">    <span class="comment">/* kludge - clean up constants and make into control knobs later */</span></div>
<div class="line">    Match = (feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506af859d8f455da531fb41201c80187dccf">CharNormLength</a>] *</div>
<div class="line">      feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506af859d8f455da531fb41201c80187dccf">CharNormLength</a>] * 500.0 +</div>
<div class="line">      feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>] *</div>
<div class="line">      feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>] * 8000.0 +</div>
<div class="line">      feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>] *</div>
<div class="line">      feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>] * 8000.0);</div>
<div class="line">    <span class="keywordflow">return</span> (1.0 - <a class="code" href="a00675.html#aabdd8bad43c2e04682813cb96494d5bb">NormEvidenceOf</a> (Match));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  BestMatch = <a class="code" href="a00577.html#a9adcee815220ec9db98062213806ed04">MAX_FLOAT32</a>;</div>
<div class="line">  Protos = <a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>[ClassId];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (DebugMatch) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\nChar norm for class %s\n&quot;</span>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId));</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  ProtoId = 0;</div>
<div class="line">  <a class="code" href="a00794.html#a2cf19ba78be6b54f66823d58f34f2a53">iterate</a>(Protos) {</div>
<div class="line">    Proto = (<a class="code" href="a00273.html">PROTOTYPE</a> *) <a class="code" href="a00794.html#a69547be764424f18b0be535400747978">first_node</a> (Protos);</div>
<div class="line">    Delta = feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>] - Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>];</div>
<div class="line">    Match = Delta * Delta * Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>];</div>
<div class="line">    <span class="keywordflow">if</span> (DebugMatch) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;YMiddle: Proto=%g, Delta=%g, Var=%g, Dist=%g\n&quot;</span>,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>], Delta,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>], Match);</div>
<div class="line">    }</div>
<div class="line">    Delta = feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>] - Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>];</div>
<div class="line">    Match += Delta * Delta * Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>];</div>
<div class="line">    <span class="keywordflow">if</span> (DebugMatch) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Height: Proto=%g, Delta=%g, Var=%g, Dist=%g\n&quot;</span>,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>], Delta,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>], Match);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Ry is width! See intfx.cpp.</span></div>
<div class="line">    Delta = feature.<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>] - Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>];</div>
<div class="line">    <span class="keywordflow">if</span> (DebugMatch) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Width: Proto=%g, Delta=%g, Var=%g\n&quot;</span>,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af9c4f61cdbf39f6494b4691799bd4fa6">Mean</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>], Delta,</div>
<div class="line">              Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>]);</div>
<div class="line">    }</div>
<div class="line">    Delta = Delta * Delta * Proto-&gt;<a class="code" href="a00273.html#af202ff952380614068536ea0b504285e">Weight</a>.<a class="code" href="a00162.html#a4b36c5b636aac27041dd340386f3801f">Elliptical</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>];</div>
<div class="line">    Delta *= <a class="code" href="a00675.html#a3882ddbdbe2c0e1c7f84ef7f01aae0a2">kWidthErrorWeighting</a>;</div>
<div class="line">    Match += Delta;</div>
<div class="line">    <span class="keywordflow">if</span> (DebugMatch) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Total Dist=%g, scaled=%g, sigmoid=%g, penalty=%g\n&quot;</span>,</div>
<div class="line">              Match, Match / <a class="code" href="a00675.html#a5b39e06af338d5d0623762a84246e7a6">classify_norm_adj_midpoint</a>,</div>
<div class="line">              <a class="code" href="a00675.html#aabdd8bad43c2e04682813cb96494d5bb">NormEvidenceOf</a>(Match), 256 * (1 - <a class="code" href="a00675.html#aabdd8bad43c2e04682813cb96494d5bb">NormEvidenceOf</a>(Match)));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (Match &lt; BestMatch)</div>
<div class="line">      BestMatch = Match;</div>
<div class="line"></div>
<div class="line">    ProtoId++;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> 1.0 - <a class="code" href="a00675.html#aabdd8bad43c2e04682813cb96494d5bb">NormEvidenceOf</a>(BestMatch);</div>
<div class="line">}                                <span class="comment">/* ComputeNormMatch */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af1f1f794092ce44dff7c242822b6cf68"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ConvertMatchesToChoices </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BLOB_CHOICE_LIST *&#160;</td>
          <td class="paramname"><em>Choices</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The function converts the given match ratings to the list of blob choices with ratings and certainties (used by the context checkers). If character fragments are present in the results, this function also makes sure that there is at least one non-fragmented classification included. For each classification result check the unicharset for "definite" ambiguities and modify the resulting Choices accordingly. </p>

<p>Definition at line <a class="el" href="a00620_source.html#l01675">1675</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  assert(Choices != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Rating;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Certainty;</div>
<div class="line">  BLOB_CHOICE_IT temp_it;</div>
<div class="line">  <span class="keywordtype">bool</span> contains_nonfrag = <span class="keyword">false</span>;</div>
<div class="line">  temp_it.set_to_list(Choices);</div>
<div class="line">  <span class="keywordtype">int</span> choices_length = 0;</div>
<div class="line">  <span class="comment">// With no shape_table_ maintain the previous MAX_MATCHES as the maximum</span></div>
<div class="line">  <span class="comment">// number of returned results, but with a shape_table_ we want to have room</span></div>
<div class="line">  <span class="comment">// for at least the biggest shape (which might contain hundreds of Indic</span></div>
<div class="line">  <span class="comment">// grapheme fragments) and more, so use double the size of the biggest shape</span></div>
<div class="line">  <span class="comment">// if that is more than the default.</span></div>
<div class="line">  <span class="keywordtype">int</span> max_matches = <a class="code" href="a00620.html#ae731492acc3b2e54043c2dfbf1338be6">MAX_MATCHES</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    max_matches = <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#ad130bbb0f12679804c93bbaa10bec04e">MaxNumUnichars</a>() * 2;</div>
<div class="line">    <span class="keywordflow">if</span> (max_matches &lt; <a class="code" href="a00620.html#ae731492acc3b2e54043c2dfbf1338be6">MAX_MATCHES</a>)</div>
<div class="line">      max_matches = <a class="code" href="a00620.html#ae731492acc3b2e54043c2dfbf1338be6">MAX_MATCHES</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; i++) {</div>
<div class="line">    <a class="code" href="a00291.html">ScoredClass</a> next = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i];</div>
<div class="line">    <span class="keywordtype">int</span> fontinfo_id = next.<a class="code" href="a00291.html#aef50f14f803115ac96f57bf3d7e519f9">fontinfo_id</a>;</div>
<div class="line">    <span class="keywordtype">int</span> fontinfo_id2 = next.<a class="code" href="a00291.html#ac30be99b1e1ac98855c624896f9f0389">fontinfo_id2</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> adapted = next.<a class="code" href="a00291.html#a090f44ac2eedadd72c93fb628dfaf167">adapted</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> current_is_frag = (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(next.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (temp_it.length()+1 == max_matches &amp;&amp;</div>
<div class="line">        !contains_nonfrag &amp;&amp; current_is_frag) {</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// look for a non-fragmented character to fill the</span></div>
<div class="line">                 <span class="comment">// last spot in Choices if only fragments are present</span></div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// BlobLength can never be legally 0, this means recognition failed.</span></div>
<div class="line">    <span class="comment">// But we must return a classification result because some invoking</span></div>
<div class="line">    <span class="comment">// functions (chopper/permuter) do not anticipate a null blob choice.</span></div>
<div class="line">    <span class="comment">// So we need to assign a poor, but not infinitely bad score.</span></div>
<div class="line">    <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a> == 0) {</div>
<div class="line">      Certainty = -20;</div>
<div class="line">      Rating = 100;    <span class="comment">// should be -certainty * real_blob_length</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      Rating = Certainty = next.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>;</div>
<div class="line">      Rating *= <a class="code" href="a00091.html#ab2ed08d2587e66a131f7fcd229102566">rating_scale</a> * Results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>;</div>
<div class="line">      Certainty *= -(<a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a054d69744519c2c7a89e7b1159347385">certainty_scale</a>);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> min_xheight, max_xheight;</div>
<div class="line">    denorm.<a class="code" href="a00126.html#a5b886acd9e1220ff409268e007adffe1">XHeightRange</a>(next.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>, box,</div>
<div class="line">                        &amp;min_xheight, &amp;max_xheight);</div>
<div class="line">    temp_it.add_to_end(<span class="keyword">new</span> <a class="code" href="a00052.html">BLOB_CHOICE</a>(next.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>, Rating, Certainty,</div>
<div class="line">                                        fontinfo_id, fontinfo_id2,</div>
<div class="line">                                        <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a77cdfcf9338d6565e6321a583392d5a1">get_script</a>(next.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>),</div>
<div class="line">                                        min_xheight, max_xheight, adapted));</div>
<div class="line">    contains_nonfrag |= !current_is_frag;  <span class="comment">// update contains_nonfrag</span></div>
<div class="line">    choices_length++;</div>
<div class="line">    <span class="keywordflow">if</span> (choices_length &gt;= max_matches) <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> = choices_length;</div>
<div class="line">}  <span class="comment">// ConvertMatchesToChoices</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af27d604585502bd447d52bf5daf15d0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ConvertProto </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00684.html#a04b1cd7341d318ccc4e679aec5cfad0e">PROTO</a>&#160;</td>
          <td class="paramname"><em>Proto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ProtoId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a>&#160;</td>
          <td class="paramname"><em>Class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l00528">528</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   Proto floating-pt proto to be converted to integer format</span></div>
<div class="line"><span class="comment"> **   ProtoId id of proto</span></div>
<div class="line"><span class="comment"> **   Class integer class to add converted proto to</span></div>
<div class="line"><span class="comment"> ** Globals: none</span></div>
<div class="line"><span class="comment"> ** Operation: This routine converts Proto to integer format and</span></div>
<div class="line"><span class="comment"> **   installs it as ProtoId in Class.</span></div>
<div class="line"><span class="comment"> ** Return: none</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Fri Feb  8 11:22:43 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00198.html">INT_PROTO</a> P;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Param;</div>
<div class="line"></div>
<div class="line">  assert(ProtoId &lt; Class-&gt;NumProtos);</div>
<div class="line"></div>
<div class="line">  P = <a class="code" href="a00660.html#aff1a8cea9b56061e344b3b3f256f5253">ProtoForProtoId</a>(Class, ProtoId);</div>
<div class="line"></div>
<div class="line">  Param = Proto-&gt;<a class="code" href="a00272.html#ae3211a725f109fbd40efc6cd154330f7">A</a> * 128;</div>
<div class="line">  P-&gt;<a class="code" href="a00198.html#a1a04b5d1566d1ec88d99da275208f064">A</a> = <a class="code" href="a00659.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, -128, 127, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"></div>
<div class="line">  Param = -Proto-&gt;<a class="code" href="a00272.html#a884630c87acb7606ac02516d1ea4ea9e">B</a> * 256;</div>
<div class="line">  P-&gt;<a class="code" href="a00198.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a> = <a class="code" href="a00659.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, 0, 255, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"></div>
<div class="line">  Param = Proto-&gt;<a class="code" href="a00272.html#a09d1e20c0a8362582127fa3554bb83ae">C</a> * 128;</div>
<div class="line">  P-&gt;<a class="code" href="a00198.html#af1c3246d7de60562deed8d58d292bb01">C</a> = <a class="code" href="a00659.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, -128, 127, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line"></div>
<div class="line">  Param = Proto-&gt;<a class="code" href="a00272.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a> * 256;</div>
<div class="line">  <span class="keywordflow">if</span> (Param &lt; 0 || Param &gt;= 256)</div>
<div class="line">    P-&gt;<a class="code" href="a00198.html#a3595512379d43a12f92efef287db17d9">Angle</a> = 0;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    P-&gt;<a class="code" href="a00198.html#a3595512379d43a12f92efef287db17d9">Angle</a> = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) Param;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* round proto length to nearest integer number of pico-features */</span></div>
<div class="line">  Param = (Proto-&gt;<a class="code" href="a00272.html#aa29d8aaab147327320e2bc94a821aad1">Length</a> / <a class="code" href="a00682.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>()) + 0.5;</div>
<div class="line">  Class-&gt;<a class="code" href="a00195.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId] = <a class="code" href="a00659.html#a12134f53d5a57bb1dc79acf2711aae5d">TruncateParam</a>(Param, 1, 255, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2)</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Converted ffeat to (A=%d,B=%d,C=%d,L=%d)&quot;</span>,</div>
<div class="line">            P-&gt;<a class="code" href="a00198.html#a1a04b5d1566d1ec88d99da275208f064">A</a>, P-&gt;<a class="code" href="a00198.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a>, P-&gt;<a class="code" href="a00198.html#af1c3246d7de60562deed8d58d292bb01">C</a>, Class-&gt;<a class="code" href="a00195.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>[ProtoId]);</div>
<div class="line">}                                <span class="comment">/* ConvertProto */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af3d15c15c9f2dce72a400233d4bf366f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> tesseract::Classify::CreateIntTemplates </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00684.html#ad299b5cb6e6ab5713fce00dbd6a787ed">CLASSES</a>&#160;</td>
          <td class="paramname"><em>FloatProtos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00387.html">UNICHARSET</a> &amp;&#160;</td>
          <td class="paramname"><em>target_unicharset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l00573">573</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                                              {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   FloatProtos prototypes in old floating pt format</span></div>
<div class="line"><span class="comment"> ** Globals: none</span></div>
<div class="line"><span class="comment"> ** Operation: This routine converts from the old floating point format</span></div>
<div class="line"><span class="comment"> **   to the new integer format.</span></div>
<div class="line"><span class="comment"> ** Return: New set of training templates in integer format.</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Thu Feb  7 14:40:42 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00200.html">INT_TEMPLATES</a> IntTemplates;</div>
<div class="line">  <a class="code" href="a00090.html">CLASS_TYPE</a> FClass;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> IClass;</div>
<div class="line">  <span class="keywordtype">int</span> ClassId;</div>
<div class="line">  <span class="keywordtype">int</span> ProtoId;</div>
<div class="line">  <span class="keywordtype">int</span> ConfigId;</div>
<div class="line"></div>
<div class="line">  IntTemplates = <a class="code" href="a00659.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (ClassId = 0; ClassId &lt; target_unicharset.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>(); ClassId++) {</div>
<div class="line">    FClass = &amp;(FloatProtos[ClassId]);</div>
<div class="line">    <span class="keywordflow">if</span> (FClass-&gt;<a class="code" href="a00090.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a> == 0 &amp;&amp; FClass-&gt;<a class="code" href="a00090.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a> == 0 &amp;&amp;</div>
<div class="line">        strcmp(target_unicharset.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId), <span class="stringliteral">&quot; &quot;</span>) != 0) {</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: no protos/configs for %s in CreateIntTemplates()\n&quot;</span>,</div>
<div class="line">              target_unicharset.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId));</div>
<div class="line">    }</div>
<div class="line">    assert(<a class="code" href="a00660.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a>(IntTemplates, ClassId));</div>
<div class="line">    IClass = <a class="code" href="a00659.html#af77150e8523be2b3f6449e194eb55e7b">NewIntClass</a>(FClass-&gt;<a class="code" href="a00090.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a>, FClass-&gt;<a class="code" href="a00090.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a>);</div>
<div class="line">    <a class="code" href="a00165.html">FontSet</a> fs;</div>
<div class="line">    fs.<a class="code" href="a00165.html#a2f474cedd75889b35a8b5f401eab3c01">size</a> = FClass-&gt;<a class="code" href="a00090.html#a42fd551c9f2ee48e5873ae7308df64b4">font_set</a>.<a class="code" href="a00388.html#a834de17f090dcfcc6625b01c5a627c2f" title="Return the size used.">size</a>();</div>
<div class="line">    fs.<a class="code" href="a00165.html#a466a7c0f34a22d2b112658de14f6a376">configs</a> = <span class="keyword">new</span> <span class="keywordtype">int</span>[fs.<a class="code" href="a00165.html#a2f474cedd75889b35a8b5f401eab3c01">size</a>];</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; fs.<a class="code" href="a00165.html#a2f474cedd75889b35a8b5f401eab3c01">size</a>; ++i) {</div>
<div class="line">      fs.<a class="code" href="a00165.html#a466a7c0f34a22d2b112658de14f6a376">configs</a>[i] = FClass-&gt;<a class="code" href="a00090.html#a42fd551c9f2ee48e5873ae7308df64b4">font_set</a>.<a class="code" href="a00388.html#a3b3107bc72d9edfe501eaba7404de7eb" title="Return the object from an id.">get</a>(i);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (this-&gt;<a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#ae2ca9cd7a9bf7837306df260c218772b" title="Return true if T is in the table.">contains</a>(fs)) {</div>
<div class="line">      IClass-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = this-&gt;<a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a4820bb7a54cf6ecda86856161c6d5a2f">get_id</a>(fs);</div>
<div class="line">      <span class="keyword">delete</span>[] fs.<a class="code" href="a00165.html#a466a7c0f34a22d2b112658de14f6a376">configs</a>;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      IClass-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = this-&gt;<a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a659534293ab0e46a46cab4421bebfb8f" title="Add an element in the table.">push_back</a>(fs);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00659.html#a66f71b82c006e385d6e3ce7c677c6ad8">AddIntClass</a>(IntTemplates, ClassId, IClass);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (ProtoId = 0; ProtoId &lt; FClass-&gt;<a class="code" href="a00090.html#aed122893fec98b9ebccee234bbb00292">NumProtos</a>; ProtoId++) {</div>
<div class="line">      <a class="code" href="a00659.html#a4c27266652a51cf8aaa866d299f57301">AddIntProto</a>(IClass);</div>
<div class="line">      <a class="code" href="a00091.html#af27d604585502bd447d52bf5daf15d0d">ConvertProto</a>(<a class="code" href="a00684.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ProtoId, IClass);</div>
<div class="line">      <a class="code" href="a00659.html#aec09adc2735bb4caaf226df7124e4ed7">AddProtoToProtoPruner</a>(<a class="code" href="a00684.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ProtoId, IClass,</div>
<div class="line">                            <a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2);</div>
<div class="line">      <a class="code" href="a00659.html#a117c6df38172671a3f3fce9cdb4f3299">AddProtoToClassPruner</a>(<a class="code" href="a00684.html#a3def7bc87c3ad9ad793128f0dc5b8fce">ProtoIn</a>(FClass, ProtoId), ClassId, IntTemplates);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (ConfigId = 0; ConfigId &lt; FClass-&gt;<a class="code" href="a00090.html#a452c42efe7ec87439ef16f1e51d57f2c">NumConfigs</a>; ConfigId++) {</div>
<div class="line">      <a class="code" href="a00659.html#a569488473772d42004fec43399e6d5a9">AddIntConfig</a>(IClass);</div>
<div class="line">      <a class="code" href="a00659.html#a57b07752bea2110e2503cf78747228c5">ConvertConfig</a>(FClass-&gt;<a class="code" href="a00090.html#ac5524279d10e5bafe306355d72309b69">Configurations</a>[ConfigId], ConfigId, IClass);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (IntTemplates);</div>
<div class="line">}                                <span class="comment">/* CreateIntTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af9a9def4a6b3bb1a2e36bceff2976c2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::DebugAdaptiveClassifier </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob whose classification is being debugged </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Results</td><td>results of match being debugged</td></tr>
  </table>
  </dd>
</dl>
<p>Globals: none</p>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Wed Mar 13 16:44:41 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01748">1748</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; i++) {</div>
<div class="line">    <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> &lt; Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>)</div>
<div class="line">      Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a> = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i];</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span> *Prompt =</div>
<div class="line">    <span class="stringliteral">&quot;Left-click in IntegerMatch Window to continue or right click to debug...&quot;</span>;</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> unichar_id = Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>;</div>
<div class="line">  <span class="keywordtype">int</span> shape_id = Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#ab3db24ffe2690f52d86053ba1f631520">shape_id</a>;</div>
<div class="line">  <span class="keywordtype">bool</span> adaptive_on = <span class="keyword">true</span>;</div>
<div class="line">  <span class="keywordtype">bool</span> pretrained_on = <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">char</span>* debug_mode;</div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">    <span class="keywordflow">if</span> (!pretrained_on)</div>
<div class="line">      debug_mode = <span class="stringliteral">&quot;Adaptive Templates Only&quot;</span>;</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!adaptive_on)</div>
<div class="line">      debug_mode = <span class="stringliteral">&quot;PreTrained Templates Only&quot;</span>;</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      debug_mode = <span class="stringliteral">&quot;All Templates&quot;</span>;</div>
<div class="line">    <a class="code" href="a00091.html#a44e1b8840fb841e621b902f3abdd8522">ShowMatchDisplay</a>();</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Debugging class %d = %s in mode %s ...&quot;</span>,</div>
<div class="line">            unichar_id, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(unichar_id), debug_mode);</div>
<div class="line">    <span class="keywordflow">if</span> (shape_id &gt;= 0 &amp;&amp; <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot; from shape %s\n&quot;</span>, <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a87937c115d25036a961833c8b8ab79dd">DebugStr</a>(shape_id).<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00091.html#abf81bc54d31591d9da5f95529583b99d">ShowBestMatchFor</a>(Blob, denorm, unichar_id, shape_id, adaptive_on,</div>
<div class="line">                     pretrained_on, Results);</div>
<div class="line">    <a class="code" href="a00659.html#a3827f6daeeb1efd88fa0bf418c83d984">UpdateMatchDisplay</a>();</div>
<div class="line">  } <span class="keywordflow">while</span> ((unichar_id = <a class="code" href="a00091.html#a76f4e180bcab3a7cd2da75d42b524eba">GetClassToDebug</a>(Prompt, &amp;adaptive_on,</div>
<div class="line">                                         &amp;pretrained_on, &amp;shape_id)) != 0);</div>
<div class="line">}                                <span class="comment">/* DebugAdaptiveClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aaa7b4a01a6f9bd1f088982a4011274e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::DisplayAdaptedChar </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00195.html">INT_CLASS_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>int_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01036">1036</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordtype">int</span> bloblength = 0;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> features;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* norm_array = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()];</div>
<div class="line">  <span class="keywordtype">int</span> num_features = <a class="code" href="a00091.html#a4bf0e47e0ae00a0cec215a887cef8c65">GetBaselineFeatures</a>(blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>,</div>
<div class="line">                                         features,</div>
<div class="line">                                         norm_array, &amp;bloblength);</div>
<div class="line">  <span class="keyword">delete</span> [] norm_array;</div>
<div class="line">  <a class="code" href="a00199.html">INT_RESULT_STRUCT</a> IntResult;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(int_class, <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>,</div>
<div class="line">            num_features, features,</div>
<div class="line">            &amp;IntResult, <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">            <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>, <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">  <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Best match to temp config %d = %4.1f%%.\n&quot;</span>,</div>
<div class="line">    IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>, (1.0 - IntResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>) * 100.0);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2) {</div>
<div class="line">    <a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ConfigMask;</div>
<div class="line">    ConfigMask = 1 &lt;&lt; IntResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>;</div>
<div class="line">    <a class="code" href="a00091.html#a44e1b8840fb841e621b902f3abdd8522">ShowMatchDisplay</a>();</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(int_class, <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, (<a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>)&amp;ConfigMask,</div>
<div class="line">              num_features, features,</div>
<div class="line">              &amp;IntResult, <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">              6 | 0x19, <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">    <a class="code" href="a00659.html#a3827f6daeeb1efd88fa0bf418c83d984">UpdateMatchDisplay</a>();</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8575af5f97d4037d4fdd2e21b477dd38"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::DoAdaptiveMatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine performs an adaptive classification. If we have not yet adapted to enough classes, a simple classification to the pre-trained templates is performed. Otherwise, we match the blob against the adapted templates. If the adapted templates do not match well, we try a match against the pre-trained templates. If an adapted template match is found, we do a match to any pre-trained templates which could be ambiguous. The results from all of these classifications are merged together into Results.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to be classified </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Results</td><td>place to put match results</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>PreTrainedTemplates built-in training templates</li>
<li>AdaptedTemplates templates adapted for this page</li>
<li>matcher_great_threshold rating limit for a great match</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 08:50:11 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01808">1808</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *Ambiguities;</div>
<div class="line"></div>
<div class="line">  AdaptiveMatcherCalls++;</div>
<div class="line">  <a class="code" href="a00620.html#aca8523f0becfd3cca333fd48d103735d">InitIntFX</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#ac4e39261d76ebdd092eeb754fe1e15c3">NumPermClasses</a> &lt; <a class="code" href="a00091.html#a727f2429705dabdd078d6748f0e81c42">matcher_permanent_classes_min</a> ||</div>
<div class="line">      <a class="code" href="a00091.html#a746dbbd1c99e99f3d213077cceedf80e">tess_cn_matching</a>) {</div>
<div class="line">    <a class="code" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier</a>(Blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, Results);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    Ambiguities = <a class="code" href="a00091.html#ab7022031939236cac2fe6b661e6f657b">BaselineClassifier</a>(Blob, denorm, <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>, Results);</div>
<div class="line">    <span class="keywordflow">if</span> ((Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> &gt; 0 &amp;&amp;</div>
<div class="line">         <a class="code" href="a00620.html#a212c1ba628a1cd30b51a902c35fb23eb">MarginalMatch</a> (Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>) &amp;&amp;</div>
<div class="line">         !<a class="code" href="a00091.html#a85fcc9966cddbc38adf1014dd0cd778c">tess_bn_matching</a>) ||</div>
<div class="line">        Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> == 0) {</div>
<div class="line">      <a class="code" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier</a>(Blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, Results);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (Ambiguities &amp;&amp; *Ambiguities &gt;= 0 &amp;&amp; !<a class="code" href="a00091.html#a85fcc9966cddbc38adf1014dd0cd778c">tess_bn_matching</a>) {</div>
<div class="line">      <a class="code" href="a00091.html#ac7501f294525f6dd7fca4a3512ae0dcf">AmbigClassifier</a>(Blob, denorm,</div>
<div class="line">                      <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>,</div>
<div class="line">                      <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>,</div>
<div class="line">                      Ambiguities,</div>
<div class="line">                      Results);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Force the blob to be classified as noise</span></div>
<div class="line">  <span class="comment">// if the results contain only fragments.</span></div>
<div class="line">  <span class="comment">// TODO(daria): verify that this is better than</span></div>
<div class="line">  <span class="comment">// just adding a NULL classification.</span></div>
<div class="line">  <span class="keywordflow">if</span> (!Results-&gt;<a class="code" href="a00032.html#ab6a520c3c59a1f1a3f4d1c27bf5d3000">HasNonfragment</a> || Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> == 0)</div>
<div class="line">    <a class="code" href="a00091.html#a8a68035cfc5ee866f2d39360072ab77c">ClassifyAsNoise</a>(Results);</div>
<div class="line">}   <span class="comment">/* DoAdaptiveMatch */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae5e4880c5acc91b77308fbd6ab706b13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::EndAdaptiveClassifier </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine performs cleanup operations on the adaptive classifier. It should be called before the program is terminated. Its main function is to save the adapted templates to a file.</p>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> current set of adapted templates</li>
<li><a class="el" href="a00091.html#a27fe54e49f64e61f40b4e50e8ff4084c">classify_save_adapted_templates</a> TRUE if templates should be saved</li>
<li><a class="el" href="a00091.html#adaa9bf9e188634ffa99c83204be2129f">classify_enable_adaptive_matcher</a> TRUE if adaptive matcher is enabled</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 19 14:37:06 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00476">476</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                     {</div>
<div class="line">  <a class="code" href="a00319.html">STRING</a> Filename;</div>
<div class="line">  FILE *File;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #ifndef SECURE_NAMES</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp;</div>
<div class="line">      <a class="code" href="a00091.html#adaa9bf9e188634ffa99c83204be2129f">classify_enable_adaptive_matcher</a> &amp;&amp; <a class="code" href="a00091.html#a27fe54e49f64e61f40b4e50e8ff4084c">classify_save_adapted_templates</a>) {</div>
<div class="line">    Filename = <a class="code" href="a00070.html#a5eea0d996032e28207d801a1ee92d388">imagefile</a> + <a class="code" href="a00620.html#a788df8e37c3d6f36e3d18a7bb7a603f0">ADAPT_TEMPLATE_SUFFIX</a>;</div>
<div class="line">    File = fopen (Filename.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(), <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (File == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Unable to save adapted templates to %s!\n&quot;</span>, Filename.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;\nSaving adapted templates to %s ...&quot;</span>, Filename.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">      fflush(stdout);</div>
<div class="line">      <a class="code" href="a00091.html#a1718afe45a09c6631f11ae224e6d5db6">WriteAdaptedTemplates</a>(File, <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">      fclose(File);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00618.html#accee3ce0fad02a088149b714621dc21d">free_adapted_templates</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00659.html#aed61c96f41cad7c9871e809124987ca8">free_int_templates</a>(<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#ace7f6baf4e425e1d50aac0d1383eb023">EndDangerousAmbigs</a>();</div>
<div class="line">  <a class="code" href="a00091.html#ab6e270cecf7e7c62e1319e7889caf716">FreeNormProtos</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a>);</div>
<div class="line">    <a class="code" href="a00771.html#adc1a7f52bb1fce0746e1e5725ad679f6">FreeBitVector</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <a class="code" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <a class="code" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">}                                <span class="comment">/* EndAdaptiveClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7d663f1e02d6e7b2d1783fdca6154a4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ExpandShapesAndApplyCorrections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *&#160;</td>
          <td class="paramname"><em>classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>debug</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bottom</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>top</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>cp_rating</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>blob_length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>cn_factors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00199.html">INT_RESULT_STRUCT</a> &amp;&#160;</td>
          <td class="paramname"><em>int_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>final_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01295">1295</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  <span class="comment">// Compute the fontinfo_ids.</span></div>
<div class="line">  <span class="keywordtype">int</span> fontinfo_id = kBlankFontinfoId;</div>
<div class="line">  <span class="keywordtype">int</span> fontinfo_id2 = kBlankFontinfoId;</div>
<div class="line">  <span class="keywordflow">if</span> (classes != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// Adapted result.</span></div>
<div class="line">    fontinfo_id = <a class="code" href="a00091.html#afae8a55c28ee68de92ab1b1dd37c6905">GetFontinfoId</a>(classes[class_id], int_result.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (int_result.<a class="code" href="a00199.html#a836e323aea6abcaa3f1a758f569fe0c9">Config2</a> &gt;= 0)</div>
<div class="line">      fontinfo_id2 = <a class="code" href="a00091.html#afae8a55c28ee68de92ab1b1dd37c6905">GetFontinfoId</a>(classes[class_id], int_result.<a class="code" href="a00199.html#a836e323aea6abcaa3f1a758f569fe0c9">Config2</a>);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// Pre-trained result.</span></div>
<div class="line">    fontinfo_id = <a class="code" href="a00091.html#a1002c7f80352c6ceac4af82ee35e5e06">ClassAndConfigIDToFontOrShapeID</a>(class_id, int_result.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (int_result.<a class="code" href="a00199.html#a836e323aea6abcaa3f1a758f569fe0c9">Config2</a> &gt;= 0) {</div>
<div class="line">      fontinfo_id2 = <a class="code" href="a00091.html#a1002c7f80352c6ceac4af82ee35e5e06">ClassAndConfigIDToFontOrShapeID</a>(class_id,</div>
<div class="line">                                                     int_result.<a class="code" href="a00199.html#a836e323aea6abcaa3f1a758f569fe0c9">Config2</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="comment">// Actually fontinfo_id is an index into the shape_table_ and it</span></div>
<div class="line">      <span class="comment">// contains a list of unchar_id/font_id pairs.</span></div>
<div class="line">      <span class="keywordtype">int</span> shape_id = fontinfo_id;</div>
<div class="line">      <span class="keyword">const</span> Shape&amp; shape = <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a9334161c64756c591ff7d4fca22277f5">GetShape</a>(fontinfo_id);</div>
<div class="line">      <span class="keywordtype">double</span> min_rating = 0.0;</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; shape.size(); ++c) {</div>
<div class="line">        <span class="keywordtype">int</span> unichar_id = shape[c].unichar_id;</div>
<div class="line">        fontinfo_id = shape[c].font_ids[0];</div>
<div class="line">        <span class="keywordflow">if</span> (shape[c].font_ids.size() &gt; 1)</div>
<div class="line">          fontinfo_id2 = shape[c].font_ids[1];</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fontinfo_id2 != kBlankFontinfoId)</div>
<div class="line">          fontinfo_id2 = <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a9334161c64756c591ff7d4fca22277f5">GetShape</a>(fontinfo_id2)[0].font_ids[0];</div>
<div class="line">        <span class="keywordtype">double</span> rating = <a class="code" href="a00091.html#a7c6031863d4dafb400551cc4f151f3b5">ComputeCorrectedRating</a>(debug, unichar_id, cp_rating,</div>
<div class="line">                                               int_result.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>,</div>
<div class="line">                                               int_result.<a class="code" href="a00199.html#a7b679d879f68fc70f4af3d983cea4036">FeatureMisses</a>,</div>
<div class="line">                                               bottom, top, blob_length,</div>
<div class="line">                                               cn_factors);</div>
<div class="line">        <span class="keywordflow">if</span> (c == 0 || rating &lt; min_rating)</div>
<div class="line">          min_rating = rating;</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa5f5f5b010151daf76255777aebeea18">get_enabled</a>(unichar_id)) {</div>
<div class="line">          <a class="code" href="a00091.html#a3681915077046082b4d99532a3f3da61">AddNewResult</a>(final_results, unichar_id, shape_id, rating,</div>
<div class="line">                       classes != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, int_result.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>,</div>
<div class="line">                       fontinfo_id, fontinfo_id2);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      int_result.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> = min_rating;</div>
<div class="line">      <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">double</span> rating = <a class="code" href="a00091.html#a7c6031863d4dafb400551cc4f151f3b5">ComputeCorrectedRating</a>(debug, class_id, cp_rating,</div>
<div class="line">                                         int_result.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>,</div>
<div class="line">                                         int_result.<a class="code" href="a00199.html#a7b679d879f68fc70f4af3d983cea4036">FeatureMisses</a>,</div>
<div class="line">                                         bottom, top, blob_length,</div>
<div class="line">                                         cn_factors);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa5f5f5b010151daf76255777aebeea18">get_enabled</a>(class_id)) {</div>
<div class="line">    <a class="code" href="a00091.html#a3681915077046082b4d99532a3f3da61">AddNewResult</a>(final_results, class_id, -1, rating,</div>
<div class="line">                 classes != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, int_result.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>,</div>
<div class="line">                 fontinfo_id, fontinfo_id2);</div>
<div class="line">  }</div>
<div class="line">  int_result.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> = rating;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af1ef43f77139dc879d27a510adcb4bb3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> tesseract::Classify::ExtractOutlineFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00679_source.html#l00036">36</a> of file <a class="el" href="a00679_source.html">outfeat.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **     Parameters:</span></div>
<div class="line"><span class="comment"> **             Blob            blob to extract pico-features from</span></div>
<div class="line"><span class="comment"> **             LineStats       statistics on text row blob is in</span></div>
<div class="line"><span class="comment"> **     Globals: none</span></div>
<div class="line"><span class="comment"> **     Operation: Convert each segment in the outline to a feature</span></div>
<div class="line"><span class="comment"> **             and return the features.</span></div>
<div class="line"><span class="comment"> **     Return: Outline-features for Blob.</span></div>
<div class="line"><span class="comment"> **     Exceptions: none</span></div>
<div class="line"><span class="comment"> **     History: 11/13/90, DSJ, Created.</span></div>
<div class="line"><span class="comment"> **             05/24/91, DSJ, Updated for either char or baseline normalize.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> Outlines;</div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> RemainingOutlines;</div>
<div class="line">  <a class="code" href="a00221.html">MFOUTLINE</a> Outline;</div>
<div class="line">  <a class="code" href="a00154.html">FEATURE_SET</a> FeatureSet;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> XScale, YScale;</div>
<div class="line"></div>
<div class="line">  FeatureSet = <a class="code" href="a00677.html#acdf1bcf73857cfc37fe8d667203bc875">NewFeatureSet</a> (<a class="code" href="a00680.html#ac29e72cf5bfbadc9a7b2490ffdda297f">MAX_OUTLINE_FEATURES</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (Blob == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <span class="keywordflow">return</span> (FeatureSet);</div>
<div class="line"></div>
<div class="line">  Outlines = <a class="code" href="a00669.html#a4acb6328d74e385e88c02c45e1306b97">ConvertBlob</a> (Blob);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a8cbc3c255f888cc49c713c0a7408d2ad">NormalizeOutlines</a>(Outlines, &amp;XScale, &amp;YScale);</div>
<div class="line">  RemainingOutlines = Outlines;</div>
<div class="line">  <a class="code" href="a00794.html#a2cf19ba78be6b54f66823d58f34f2a53">iterate</a>(RemainingOutlines) {</div>
<div class="line">    Outline = (<a class="code" href="a00670.html#a7ccab0cdf14413921e017ad0af14e1de">MFOUTLINE</a>) <a class="code" href="a00794.html#a69547be764424f18b0be535400747978">first_node</a> (RemainingOutlines);</div>
<div class="line">    <a class="code" href="a00679.html#a46e551093fc5d100adbb071067948bd9">ConvertToOutlineFeatures</a>(Outline, FeatureSet);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a> == <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>)</div>
<div class="line">    <a class="code" href="a00679.html#a31e740a46d077ad41735bbd17b0bef34">NormalizeOutlineX</a>(FeatureSet);</div>
<div class="line">  <a class="code" href="a00669.html#a553352ad44661adad2a80a24ac78aeaf">FreeOutlines</a>(Outlines);</div>
<div class="line">  <span class="keywordflow">return</span> (FeatureSet);</div>
<div class="line">}                                <span class="comment">/* ExtractOutlineFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad6d1f9f29655ffe18fab3832b113e00b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> tesseract::Classify::ExtractPicoFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00681_source.html#l00057">57</a> of file <a class="el" href="a00681_source.html">picofeat.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **     Parameters:</span></div>
<div class="line"><span class="comment"> **             Blob            blob to extract pico-features from</span></div>
<div class="line"><span class="comment"> **             LineStats       statistics on text row blob is in</span></div>
<div class="line"><span class="comment"> **     Globals:</span></div>
<div class="line"><span class="comment"> **             classify_norm_method    normalization method currently specified</span></div>
<div class="line"><span class="comment"> **     Operation: Dummy for now.</span></div>
<div class="line"><span class="comment"> **     Return: Pico-features for Blob.</span></div>
<div class="line"><span class="comment"> **     Exceptions: none</span></div>
<div class="line"><span class="comment"> **     History: 9/4/90, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> Outlines;</div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> RemainingOutlines;</div>
<div class="line">  <a class="code" href="a00221.html">MFOUTLINE</a> Outline;</div>
<div class="line">  <a class="code" href="a00154.html">FEATURE_SET</a> FeatureSet;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> XScale, YScale;</div>
<div class="line"></div>
<div class="line">  FeatureSet = <a class="code" href="a00677.html#acdf1bcf73857cfc37fe8d667203bc875">NewFeatureSet</a>(<a class="code" href="a00682.html#a547a9b8f4afa51bb6c9066d5848c068d">MAX_PICO_FEATURES</a>);</div>
<div class="line">  Outlines = <a class="code" href="a00669.html#a4acb6328d74e385e88c02c45e1306b97">ConvertBlob</a>(Blob);</div>
<div class="line">  <a class="code" href="a00091.html#a8cbc3c255f888cc49c713c0a7408d2ad">NormalizeOutlines</a>(Outlines, &amp;XScale, &amp;YScale);</div>
<div class="line">  RemainingOutlines = Outlines;</div>
<div class="line">  <a class="code" href="a00794.html#a2cf19ba78be6b54f66823d58f34f2a53">iterate</a>(RemainingOutlines) {</div>
<div class="line">    Outline = (<a class="code" href="a00670.html#a7ccab0cdf14413921e017ad0af14e1de">MFOUTLINE</a>) <a class="code" href="a00794.html#a69547be764424f18b0be535400747978">first_node</a> (RemainingOutlines);</div>
<div class="line">    <a class="code" href="a00681.html#a0ef34dbe10ce0b1c08b63a640c1f1009">ConvertToPicoFeatures2</a>(Outline, FeatureSet);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a> == <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>)</div>
<div class="line">    <a class="code" href="a00681.html#a0d34691eace89769641af5a13f448310">NormalizePicoX</a>(FeatureSet);</div>
<div class="line">  <a class="code" href="a00669.html#a553352ad44661adad2a80a24ac78aeaf">FreeOutlines</a>(Outlines);</div>
<div class="line">  <span class="keywordflow">return</span> (FeatureSet);</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* ExtractPicoFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab6e270cecf7e7c62e1319e7889caf716"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::FreeNormProtos </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00675_source.html#l00157">157</a> of file <a class="el" href="a00675_source.html">normmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>-&gt;<a class="code" href="a00240.html#a5fb6b18adc50b9ab250cad15f26450b2">NumProtos</a>; i++)</div>
<div class="line">      <a class="code" href="a00628.html#a7e5357920f0bded023b15d29ddf15ebf">FreeProtoList</a>(&amp;<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>[i]);</div>
<div class="line">    <a class="code" href="a00784.html#af846576ae65dc13e49ddc616e17baa27">Efree</a>(<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>);</div>
<div class="line">    <a class="code" href="a00784.html#af846576ae65dc13e49ddc616e17baa27">Efree</a>(<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>-&gt;<a class="code" href="a00240.html#a57382d35825f360d88f32032e05239f3">ParamDesc</a>);</div>
<div class="line">    <a class="code" href="a00784.html#af846576ae65dc13e49ddc616e17baa27">Efree</a>(<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>);</div>
<div class="line">    <a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62597f182a5e23c3b8a030c06e699e99"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00388.html">UnicityTable</a>&lt;<a class="el" href="a00163.html">FontInfo</a>&gt;&amp; tesseract::Classify::get_fontinfo_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00336">336</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>;</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a84d0021ef7ddbc98196801f9808fa33d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00388.html">UnicityTable</a>&lt;<a class="el" href="a00165.html">FontSet</a>&gt;&amp; tesseract::Classify::get_fontset_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00339">339</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
<div class="fragment"><div class="line">                                             {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>;</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1f21b989c93ff1d297b5bde442fc430c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::GetAdaptiveFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>IntFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a> *&#160;</td>
          <td class="paramname"><em>FloatFeatures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine sets up the feature extractor to extract baseline normalized pico-features.</p>
<p>The extracted pico-features are converted to integer form and placed in IntFeatures. The original floating-pt. features are returned in FloatFeatures.</p>
<p>Globals: none </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Blob</td><td>blob to extract features from </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">IntFeatures</td><td>array to fill with integer features </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">FloatFeatures</td><td>place to return actual floating-pt features</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Number of pico-features returned (0 if an error occurred) </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 17:55:18 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00854">854</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                              {</div>
<div class="line">  <a class="code" href="a00154.html">FEATURE_SET</a> Features;</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>.set_value(<a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>);</div>
<div class="line">  Features = <a class="code" href="a00091.html#ad6d1f9f29655ffe18fab3832b113e00b">ExtractPicoFeatures</a>(Blob);</div>
<div class="line"></div>
<div class="line">  NumFeatures = Features-&gt;<a class="code" href="a00154.html#a154a6ca419f3f16fccf11b7217351570">NumFeatures</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (NumFeatures &gt; <a class="code" href="a00620.html#a17b4f36c5132ab55beb280e0cc233228">UNLIKELY_NUM_FEAT</a>) {</div>
<div class="line">    <a class="code" href="a00677.html#a72b29c3d875eb9a2241385b1f1388b2d">FreeFeatureSet</a>(Features);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#ae1f3fc88bf28a4a169273bcf2515610e">ComputeIntFeatures</a>(Features, IntFeatures);</div>
<div class="line">  *FloatFeatures = Features;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> NumFeatures;</div>
<div class="line">}                                <span class="comment">/* GetAdaptiveFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57d34f380d093913f3c3e74f7a7a9840"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::GetAdaptThresholds </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00381.html">TWERD</a> *&#160;</td>
          <td class="paramname"><em>Word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;&#160;</td>
          <td class="paramname"><em>BestChoice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00395.html">WERD_CHOICE</a> &amp;&#160;</td>
          <td class="paramname"><em>BestRawChoice</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Thresholds</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine tries to estimate how tight the adaptation threshold should be set for each character in the current word. In general, the routine tries to set tighter thresholds for a character when the current set of templates would have made an error on that character. It tries to set a threshold tight enough to eliminate the error. Two different sets of rules can be used to determine the desired thresholds.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">Word</td><td>current word </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">BestChoice</td><td>best choice for current word with context </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">BestRawChoice</td><td>best choice for current word without context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">Thresholds</td><td>array of thresholds to be filled in</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>matcher_good_threshold</li>
<li>matcher_perfect_threshold</li>
<li>matcher_rating_margin</li>
</ul>
<dl class="section return"><dt>Returns:</dt><dd>none (results are returned in Thresholds) </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Fri May 31 09:22:08 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01869">1869</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line">  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#af564403205ca1603825a3a2f59727089">FindClassifierErrors</a>(<a class="code" href="a00091.html#a3d9ace4f4ae0ddf01942ced19410adbe">matcher_perfect_threshold</a>,</div>
<div class="line">                                 <a class="code" href="a00091.html#adc3a809a1a219f741a9e45a32e0d11bc">matcher_good_threshold</a>,</div>
<div class="line">                                 <a class="code" href="a00091.html#a7940573dfb85992433c6f51965a9fea5">matcher_rating_margin</a>,</div>
<div class="line">                                 Thresholds);</div>
<div class="line">}                              <span class="comment">/* GetAdaptThresholds */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4c186f6ec1019d17912d2cf36326f1f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> * tesseract::Classify::GetAmbiguities </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>CorrectClass</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine matches blob to the built-in templates to find out if there are any classes other than the correct class which are potential ambiguities.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to get classification ambiguities for </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">CorrectClass</td><td>correct class for Blob</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>CurrentRatings used by qsort compare routine</li>
<li>PreTrainedTemplates built-in templates</li>
</ul>
<dl class="section return"><dt>Returns:</dt><dd>String containing all possible ambiguous classes. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Fri Mar 15 08:08:22 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01898">1898</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                            {</div>
<div class="line">  <a class="code" href="a00032.html">ADAPT_RESULTS</a> *Results = <span class="keyword">new</span> <a class="code" href="a00032.html">ADAPT_RESULTS</a>();</div>
<div class="line">  <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *Ambiguities;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a450c3b1b225dfa0771edd50732e5d288">Initialize</a>();</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a0e552819a03cc6f169e18a58b16696a6">CharNormClassifier</a>(Blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, Results);</div>
<div class="line">  <a class="code" href="a00091.html#a0e35029ac0c77ad18d35f08c27c99d15">RemoveBadMatches</a>(Results);</div>
<div class="line">  qsort((<span class="keywordtype">void</span> *)Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>, Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>,</div>
<div class="line">        <span class="keyword">sizeof</span>(<a class="code" href="a00291.html">ScoredClass</a>), <a class="code" href="a00620.html#a82aaab0580160422d3587ca9cc533e60">CompareByRating</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* copy the class id&#39;s into an string of ambiguities - don&#39;t copy if</span></div>
<div class="line"><span class="comment">     the correct class is the only class id matched */</span></div>
<div class="line">  Ambiguities = (<a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a>) *</div>
<div class="line">                                        (Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> + 1));</div>
<div class="line">  <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> &gt; 1 ||</div>
<div class="line">      (Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> == 1 &amp;&amp;</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[0].<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a> != CorrectClass)) {</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; i++)</div>
<div class="line">      Ambiguities[i] = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>;</div>
<div class="line">    Ambiguities[i] = -1;</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    Ambiguities[0] = -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keyword">delete</span> Results;</div>
<div class="line">  <span class="keywordflow">return</span> Ambiguities;</div>
<div class="line">}                              <span class="comment">/* GetAmbiguities */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4bf0e47e0ae00a0cec215a887cef8c65"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::GetBaselineFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>IntFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>CharNormArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>BlobLength</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine calls the integer (Hardware) feature extractor if it has not been called before for this blob. The results from the feature extractor are placed into globals so that they can be used in other routines without re-extracting the features. It then copies the baseline features into the IntFeatures array provided by the caller.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to extract features from </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Templates</td><td>used to compute char norm adjustments </td></tr>
    <tr><td class="paramname">IntFeatures</td><td>array to fill with integer features </td></tr>
    <tr><td class="paramname">CharNormArray</td><td>array to fill with dummy char norm adjustments </td></tr>
    <tr><td class="paramname">BlobLength</td><td>length of blob in baseline-normalized units</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>FeaturesHaveBeenExtracted TRUE if fx has been done</li>
<li>BaselineFeatures holds extracted baseline feat</li>
<li>CharNormFeatures holds extracted char norm feat</li>
<li>FXInfo holds misc. FX info</li>
</ul>
<dl class="section return"><dt>Returns:</dt><dd>Number of features extracted or 0 if an error occured. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue May 28 10:40:52 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l01957">1957</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">  <span class="keyword">register</span> <a class="code" href="a00196.html">INT_FEATURE</a> Src, Dest, End;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!FeaturesHaveBeenExtracted) {</div>
<div class="line">    FeaturesOK = <a class="code" href="a00655.html#a508a06732c67c00efc9db362bd8b970e">ExtractIntFeat</a>(Blob, denorm, BaselineFeatures,</div>
<div class="line">                                CharNormFeatures, &amp;FXInfo, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">    FeaturesHaveBeenExtracted = <a class="code" href="a00409.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!FeaturesOK) {</div>
<div class="line">    *BlobLength = FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>;</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (Src = BaselineFeatures, End = Src + FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>, Dest = IntFeatures;</div>
<div class="line">       Src &lt; End;</div>
<div class="line">       *Dest++ = *Src++);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#ac0de90c99552cdc286f934d344790085">ClearCharNormArray</a>(CharNormArray);</div>
<div class="line">  *BlobLength = FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>;</div>
<div class="line">  <span class="keywordflow">return</span> FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>;</div>
<div class="line">}                              <span class="comment">/* GetBaselineFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1076d5d08686e48d39ef3eb07e711fb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::GetCharNormFeatures </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>IntFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>PrunerNormArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>CharNormArray</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>BlobLength</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *&#160;</td>
          <td class="paramname"><em>FeatureOutlineArray</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine calls the integer (Hardware) feature extractor if it has not been called before for this blob.</p>
<p>The results from the feature extractor are placed into globals so that they can be used in other routines without re-extracting the features.</p>
<p>It then copies the char norm features into the IntFeatures array provided by the caller.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to extract features from </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Templates</td><td>used to compute char norm adjustments </td></tr>
    <tr><td class="paramname">IntFeatures</td><td>array to fill with integer features </td></tr>
    <tr><td class="paramname">PrunerNormArray</td><td>Array of factors from blob normalization process </td></tr>
    <tr><td class="paramname">CharNormArray</td><td>array to fill with dummy char norm adjustments </td></tr>
    <tr><td class="paramname">BlobLength</td><td>length of blob in baseline-normalized units </td></tr>
    <tr><td class="paramname">FeatureOutlineArray</td><td>Globals:<ul>
<li>FeaturesHaveBeenExtracted TRUE if fx has been done</li>
<li>BaselineFeatures holds extracted baseline feat</li>
<li>CharNormFeatures holds extracted char norm feat</li>
<li>FXInfo holds misc. FX info</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Number of features extracted or 0 if an error occured. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue May 28 10:40:52 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02045">2045</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                              {</div>
<div class="line">  <span class="keyword">register</span> <a class="code" href="a00196.html">INT_FEATURE</a> Src, Dest, End;</div>
<div class="line">  <a class="code" href="a00155.html">FEATURE</a> NormFeature;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> Baseline, Scale;</div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> FeatureOutlineIndex[<a class="code" href="a00407.html#a4f7caedc4bed99355cae19efa51ade51">MAX_NUM_INT_FEATURES</a>];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!FeaturesHaveBeenExtracted) {</div>
<div class="line">    FeaturesOK = <a class="code" href="a00655.html#a508a06732c67c00efc9db362bd8b970e">ExtractIntFeat</a>(Blob, denorm, BaselineFeatures,</div>
<div class="line">                                CharNormFeatures, &amp;FXInfo,</div>
<div class="line">                                FeatureOutlineIndex);</div>
<div class="line">    FeaturesHaveBeenExtracted = <a class="code" href="a00409.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!FeaturesOK) {</div>
<div class="line">    *BlobLength = FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>;</div>
<div class="line">    <span class="keywordflow">return</span> (0);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (Src = CharNormFeatures, End = Src + FXInfo.<a class="code" href="a00197.html#ac2c7a180de0d0778efed530aa06e47ad">NumCN</a>, Dest = IntFeatures;</div>
<div class="line">       Src &lt; End;</div>
<div class="line">       *Dest++ = *Src++);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0;  FeatureOutlineArray &amp;&amp; i &lt; FXInfo.<a class="code" href="a00197.html#ac2c7a180de0d0778efed530aa06e47ad">NumCN</a>; ++i) {</div>
<div class="line">    FeatureOutlineArray[i] = FeatureOutlineIndex[i];</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  NormFeature = <a class="code" href="a00677.html#a32a08c42617c8dd6a156c1c8d7fb2cbb">NewFeature</a>(&amp;CharNormDesc);</div>
<div class="line">  Baseline = <a class="code" href="a00621.html#a011c4f289bef07581a2aed5570f1918c">BASELINE_OFFSET</a>;</div>
<div class="line">  Scale = <a class="code" href="a00670.html#a91645597f620e8307a65e8ab35d963b8">MF_SCALE_FACTOR</a>;</div>
<div class="line">  NormFeature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a9309b18966f93d05a857e8ee0f81c557">CharNormY</a>] = (FXInfo.<a class="code" href="a00197.html#a7acb1b39e74035eb698d8ab2ca8f689e">Ymean</a> - Baseline) * Scale;</div>
<div class="line">  NormFeature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506af859d8f455da531fb41201c80187dccf">CharNormLength</a>] =</div>
<div class="line">    FXInfo.<a class="code" href="a00197.html#afea938630215615240c35afad4e6df0e">Length</a> * Scale / <a class="code" href="a00674.html#a528f356e3cb082911b33645da06ccf04">LENGTH_COMPRESSION</a>;</div>
<div class="line">  NormFeature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506a5a6745d4958b44c8c3481742021428f9">CharNormRx</a>] = FXInfo.<a class="code" href="a00197.html#a761357b2a8e539be5dd5be9ab6427535">Rx</a> * Scale;</div>
<div class="line">  NormFeature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00674.html#ab5ff0a2380362fa488e17c0c1b858506ac21a54078a6ec6e1470a21d65feb58d5">CharNormRy</a>] = FXInfo.<a class="code" href="a00197.html#a5bc44d7c44209bf894b7c806839cb62d">Ry</a> * Scale;</div>
<div class="line">  <a class="code" href="a00091.html#a8f49de2f8da7b066bd8ece0641edcca1">ComputeCharNormArrays</a>(NormFeature, Templates, CharNormArray, PrunerNormArray);</div>
<div class="line">  *BlobLength = FXInfo.<a class="code" href="a00197.html#a1ad9961af805ce0f4d6f8f4c5e60d368">NumBL</a>;</div>
<div class="line">  <span class="keywordflow">return</span> (FXInfo.<a class="code" href="a00197.html#ac2c7a180de0d0778efed530aa06e47ad">NumCN</a>);</div>
<div class="line">}                              <span class="comment">/* GetCharNormFeatures */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a76f4e180bcab3a7cd2da75d42b524eba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> tesseract::Classify::GetClassToDebug </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>Prompt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>adaptive_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>pretrained_on</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>shape_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l01432">1432</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                       {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   Prompt  prompt to print while waiting for input from window</span></div>
<div class="line"><span class="comment"> ** Globals: none</span></div>
<div class="line"><span class="comment"> ** Operation: This routine prompts the user with Prompt and waits</span></div>
<div class="line"><span class="comment"> **   for the user to enter something in the debug window.</span></div>
<div class="line"><span class="comment"> ** Return: Character entered in the debug window.</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Thu Mar 21 16:55:13 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, Prompt);</div>
<div class="line">  <a class="code" href="a00323.html">SVEvent</a>* ev;</div>
<div class="line">  <a class="code" href="a00941.html#a3688a0cf2f95d10a57e095222ccfe9a0">SVEventType</a> ev_type;</div>
<div class="line">  <span class="keywordtype">int</span> unichar_id = INVALID_UNICHAR_ID;</div>
<div class="line">  <span class="comment">// Wait until a click or popup event.</span></div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">    ev = <a class="code" href="a00659.html#a3e2601e005e31466f29ed35791e280dc">IntMatchWindow</a>-&gt;<a class="code" href="a00294.html#a0b820b3fe7a2ce083da0784e9339a1ad">AwaitEvent</a>(<a class="code" href="a00941.html#a3688a0cf2f95d10a57e095222ccfe9a0a6eec81ed585bda7ff47ec38918cb2a0e">SVET_ANY</a>);</div>
<div class="line">    ev_type = ev-&gt;<a class="code" href="a00323.html#a5bf8585bd1901b9103eb2783f8afe508">type</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (ev_type == <a class="code" href="a00941.html#a3688a0cf2f95d10a57e095222ccfe9a0a3752863b11af097f289eb55405df8fa5">SVET_POPUP</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="a00323.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="a00660.html#aaf26255ca73d9de95dc331fda7b25059a911e6b43103ceebb21666a23b77a0f73">IDA_SHAPE_INDEX</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">          *shape_id = atoi(ev-&gt;<a class="code" href="a00323.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);</div>
<div class="line">          *adaptive_on = <span class="keyword">false</span>;</div>
<div class="line">          *pretrained_on = <span class="keyword">true</span>;</div>
<div class="line">          <span class="keywordflow">if</span> (*shape_id &gt;= 0 &amp;&amp; *shape_id &lt; shape_table_-&gt;NumShapes()) {</div>
<div class="line">            <span class="keywordtype">int</span> font_id;</div>
<div class="line">            <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#ade3f46eb910d83302b04f9f530277290">GetFirstUnicharAndFont</a>(*shape_id, &amp;unichar_id,</div>
<div class="line">                                                 &amp;font_id);</div>
<div class="line">            <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Shape %d, first unichar=%d, font=%d\n&quot;</span>,</div>
<div class="line">                    *shape_id, unichar_id, font_id);</div>
<div class="line">            <span class="keywordflow">return</span> unichar_id;</div>
<div class="line">          }</div>
<div class="line">          <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Shape index &#39;%s&#39; not found in shape table\n&quot;</span>, ev-&gt;<a class="code" href="a00323.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;No shape table loaded!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(ev-&gt;<a class="code" href="a00323.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>)) {</div>
<div class="line">          unichar_id = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(ev-&gt;<a class="code" href="a00323.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);</div>
<div class="line">          <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="a00323.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="a00660.html#aaf26255ca73d9de95dc331fda7b25059ad993f1c95a8775a97134029a0637e793">IDA_ADAPTIVE</a>) {</div>
<div class="line">            *adaptive_on = <span class="keyword">true</span>;</div>
<div class="line">            *pretrained_on = <span class="keyword">false</span>;</div>
<div class="line">            *shape_id = -1;</div>
<div class="line">          } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="a00323.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="a00660.html#aaf26255ca73d9de95dc331fda7b25059a7e375f63c9aa7b991d070fb71afdf8a2">IDA_STATIC</a>) {</div>
<div class="line">            *adaptive_on = <span class="keyword">false</span>;</div>
<div class="line">            *pretrained_on = <span class="keyword">true</span>;</div>
<div class="line">          } <span class="keywordflow">else</span> {</div>
<div class="line">            *adaptive_on = <span class="keyword">true</span>;</div>
<div class="line">            *pretrained_on = <span class="keyword">true</span>;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (ev-&gt;<a class="code" href="a00323.html#ad0db5c2aa893a41b6c6f65b9d3f62318">command_id</a> == <a class="code" href="a00660.html#aaf26255ca73d9de95dc331fda7b25059ad993f1c95a8775a97134029a0637e793">IDA_ADAPTIVE</a> || <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">            *shape_id = -1;</div>
<div class="line">            <span class="keywordflow">return</span> unichar_id;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s = 0; s &lt; <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a924919daeadb48539e3d68c65013c173">NumShapes</a>(); ++s) {</div>
<div class="line">            <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a9334161c64756c591ff7d4fca22277f5">GetShape</a>(s).<a class="code" href="a00303.html#a736c652adf59c9e1bdc68756f7e1e7e6">ContainsUnichar</a>(unichar_id)) {</div>
<div class="line">              <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s\n&quot;</span>, <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#a87937c115d25036a961833c8b8ab79dd">DebugStr</a>(s).<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Char class &#39;%s&#39; not found in unicharset&quot;</span>,</div>
<div class="line">                  ev-&gt;<a class="code" href="a00323.html#a6e0de466c57df117c731bfb4db68fc79">parameter</a>);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">delete</span> ev;</div>
<div class="line">  } <span class="keywordflow">while</span> (ev_type != <a class="code" href="a00941.html#a3688a0cf2f95d10a57e095222ccfe9a0a2afe407abe8c055c45765b85d20e7946">SVET_CLICK</a>);</div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}                                <span class="comment">/* GetClassToDebug */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a83e4207353a1bb07adfaa6a82a74c9ce"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00129.html">Dict</a>&amp; tesseract::Classify::getDict </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00062">62</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
<div class="fragment"><div class="line">                  {</div>
<div class="line">    <span class="keywordflow">return</span> dict_;</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afae8a55c28ee68de92ab1b1dd37c6905"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::GetFontinfoId </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a>&#160;</td>
          <td class="paramname"><em>Class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td>
          <td class="paramname"><em>ConfigId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00618_source.html#l00190">190</a> of file <a class="el" href="a00618_source.html">adaptive.cpp</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  <span class="keywordflow">return</span> (<a class="code" href="a00619.html#a45d630ce43777ee1ab16048b0a846813">ConfigIsPermanent</a>(Class, ConfigId) ?</div>
<div class="line">      <a class="code" href="a00619.html#aea4d5dd0059c222f111f9537af74a325">PermConfigFor</a>(Class, ConfigId)-&gt;FontinfoId :</div>
<div class="line">      <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(Class, ConfigId)-&gt;FontinfoId);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee9e5bd336bf1a37a7a1f3b712eb045d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::InitAdaptedClass </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>FontinfoId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a>&#160;</td>
          <td class="paramname"><em>Class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine creates a new adapted class and uses Blob as the model for the first config in that class.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to model new class after </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">ClassId</td><td>id of the class to be initialized </td></tr>
    <tr><td class="paramname">FontinfoId</td><td>font information inferred from pre-trained templates </td></tr>
    <tr><td class="paramname">Class</td><td>adapted class to be initialized </td></tr>
    <tr><td class="paramname">Templates</td><td>adapted templates to add new class to</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> dummy mask with all 1's</li>
<li>BaselineCutoffs kludge needed to get cutoffs</li>
<li><a class="el" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> kludge needed to get cutoffs</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu Mar 14 12:49:39 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00758">758</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                           {</div>
<div class="line">  <a class="code" href="a00154.html">FEATURE_SET</a> Features;</div>
<div class="line">  <span class="keywordtype">int</span> Fid, Pid;</div>
<div class="line">  <a class="code" href="a00155.html">FEATURE</a> Feature;</div>
<div class="line">  <span class="keywordtype">int</span> NumFeatures;</div>
<div class="line">  <a class="code" href="a00349.html">TEMP_PROTO</a> TempProto;</div>
<div class="line">  <a class="code" href="a00272.html">PROTO</a> Proto;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> IClass;</div>
<div class="line">  <a class="code" href="a00348.html">TEMP_CONFIG</a> <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>.set_value(<a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>);</div>
<div class="line">  Features = <a class="code" href="a00091.html#af1ef43f77139dc879d27a510adcb4bb3">ExtractOutlineFeatures</a>(Blob);</div>
<div class="line">  NumFeatures = Features-&gt;<a class="code" href="a00154.html#a154a6ca419f3f16fccf11b7217351570">NumFeatures</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (NumFeatures &gt; <a class="code" href="a00620.html#a17b4f36c5132ab55beb280e0cc233228">UNLIKELY_NUM_FEAT</a> || NumFeatures &lt;= 0) {</div>
<div class="line">    <a class="code" href="a00677.html#a72b29c3d875eb9a2241385b1f1388b2d">FreeFeatureSet</a>(Features);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  Config = <a class="code" href="a00618.html#af29bddcf8cc7f50548382c9594716559">NewTempConfig</a>(NumFeatures - 1, FontinfoId);</div>
<div class="line">  <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(Class, 0) = <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* this is a kludge to construct cutoffs for adapted templates */</span></div>
<div class="line">  <span class="keywordflow">if</span> (Templates == <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>)</div>
<div class="line">    BaselineCutoffs[ClassId] = CharNormCutoffs[ClassId];</div>
<div class="line"></div>
<div class="line">  IClass = <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (Fid = 0; Fid &lt; Features-&gt;<a class="code" href="a00154.html#a154a6ca419f3f16fccf11b7217351570">NumFeatures</a>; Fid++) {</div>
<div class="line">    Pid = <a class="code" href="a00659.html#a4c27266652a51cf8aaa866d299f57301">AddIntProto</a> (IClass);</div>
<div class="line">    assert (Pid != <a class="code" href="a00805.html#a4d2ae3978d57e3b05f984a0fedc51812">NO_PROTO</a>);</div>
<div class="line"></div>
<div class="line">    Feature = Features-&gt;<a class="code" href="a00154.html#a4664d6a22a9d12f4011de4d877664c45">Features</a>[Fid];</div>
<div class="line">    TempProto = <a class="code" href="a00618.html#a5dec565ee3ad1656d02860db322e4448">NewTempProto</a> ();</div>
<div class="line">    Proto = &amp;(TempProto-&gt;<a class="code" href="a00349.html#acf720eb61d4a91e84d949a6f772ea7c5">Proto</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* compute proto params - NOTE that Y_DIM_OFFSET must be used because</span></div>
<div class="line"><span class="comment">       ConvertProto assumes that the Y dimension varies from -0.5 to 0.5</span></div>
<div class="line"><span class="comment">       instead of the -0.25 to 0.75 used in baseline normalization */</span></div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a> = Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00680.html#ab73697b859e4921472c6cf1de43267a1a0bb02f3ddb0f407e51cbf8967c3d78cb">OutlineFeatDir</a>];</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a54dd1cca86a1fd5c9ead8499cba99784">X</a> = Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00680.html#ab73697b859e4921472c6cf1de43267a1ab72d959dbf0e92bfdb6f3ebf9d0b35e6">OutlineFeatX</a>];</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a8dcd81037c1bc672e97ef7a54306dd93">Y</a> = Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00680.html#ab73697b859e4921472c6cf1de43267a1ae64bdd03ed6e7dd59482f7e2d8054379">OutlineFeatY</a>] - <a class="code" href="a00620.html#ac5fe456fd5a30097c95a104b29c45cc3">Y_DIM_OFFSET</a>;</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#aa29d8aaab147327320e2bc94a821aad1">Length</a> = Feature-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00680.html#ab73697b859e4921472c6cf1de43267a1afc77106ded4ebd69ae6c596a2536e741">OutlineFeatLength</a>];</div>
<div class="line">    <a class="code" href="a00683.html#ac0d58978bbcf0c732ae94fb554bccd3b">FillABC</a>(Proto);</div>
<div class="line"></div>
<div class="line">    TempProto-&gt;<a class="code" href="a00349.html#a93992200ebfddd13e25d0e9122af9b5b">ProtoId</a> = Pid;</div>
<div class="line">    <a class="code" href="a00772.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a> (Config-&gt;<a class="code" href="a00348.html#a2ea5edb90b556766fce2105dcdfe3141">Protos</a>, Pid);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#af27d604585502bd447d52bf5daf15d0d">ConvertProto</a>(Proto, Pid, IClass);</div>
<div class="line">    <a class="code" href="a00659.html#aec09adc2735bb4caaf226df7124e4ed7">AddProtoToProtoPruner</a>(Proto, Pid, IClass,</div>
<div class="line">                          <a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2);</div>
<div class="line"></div>
<div class="line">    Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a> = <a class="code" href="a00793.html#a9c4294375af81ab4c133b6b5a3679a16">push</a> (Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a>, TempProto);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00677.html#a72b29c3d875eb9a2241385b1f1388b2d">FreeFeatureSet</a>(Features);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00659.html#a569488473772d42004fec43399e6d5a9">AddIntConfig</a>(IClass);</div>
<div class="line">  <a class="code" href="a00659.html#a57b07752bea2110e2503cf78747228c5">ConvertConfig</a> (<a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, 0, IClass);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Added new class &#39;%s&#39; with class id %d and %d protos.\n&quot;</span>,</div>
<div class="line">             <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId), ClassId, NumFeatures);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt; 1)</div>
<div class="line">      <a class="code" href="a00091.html#aaa7b4a01a6f9bd1f088982a4011274e5">DisplayAdaptedChar</a>(Blob, denorm, IClass);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00619.html#a1d2aa2b696e73525cb57373fcc5a83ae">IsEmptyAdaptedClass</a>(Class))</div>
<div class="line">    (Templates-&gt;<a class="code" href="a00033.html#aa644a299b7046916ce731566866df325">NumNonEmptyClasses</a>)++;</div>
<div class="line">}                                <span class="comment">/* InitAdaptedClass */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f9389a2d855d2a59e7892d3ba884887"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::InitAdaptiveClassifier </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>load_pre_trained_templates</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine reads in the training information needed by the adaptive classifier and saves it into global variables. Parameters: load_pre_trained_templates Indicates whether the pre-trained templates (inttemp, normproto and pffmtable components) should be lodaded. Should only be set to true if the necesary classifier components are present in the [lang].traineddata file. Globals: BuiltInTemplatesFile file to get built-in temps from BuiltInCutoffsFile file to get avg. feat per class from classify_use_pre_adapted_templates enables use of pre-adapted templates </p>
<dl class="section note"><dt>Note:</dt><dd>History: Mon Mar 11 12:49:34 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00545">545</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="a00091.html#adaa9bf9e188634ffa99c83204be2129f">classify_enable_adaptive_matcher</a>)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    <a class="code" href="a00091.html#ae5e4880c5acc91b77308fbd6ab706b13">EndAdaptiveClassifier</a>();  <span class="comment">// Don&#39;t leak with multiple inits.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// If there is no language_data_path_prefix, the classifier will be</span></div>
<div class="line">  <span class="comment">// adaptive only.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a259fbb37f1e940892938c71496c4d6ba">language_data_path_prefix</a>.<a class="code" href="a00319.html#a168505a533eda60219c93e25adf4cdc5">length</a>() &gt; 0 &amp;&amp;</div>
<div class="line">      load_pre_trained_templates) {</div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a303e0f9733b2a55796b0178ba184f6b2">SeekToStart</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899adfd87e838c95bfbdab3d08399e36b362">TESSDATA_INTTEMP</a>));</div>
<div class="line">    <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a> =</div>
<div class="line">      <a class="code" href="a00091.html#a98459996e5e6ab1dc1de71411fd32b89">ReadIntTemplates</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#ad5be8f7fcf884390b22f02788330d82f">GetDataFilePtr</a>());</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a4c1d7ef19d7917740f1034980d0876fc">DebugLevel</a>() &gt; 0) <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Loaded inttemp\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a303e0f9733b2a55796b0178ba184f6b2">SeekToStart</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899ae3c25bcbffa5055814464c04388a8035">TESSDATA_SHAPE_TABLE</a>)) {</div>
<div class="line">      <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> = <span class="keyword">new</span> ShapeTable(<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (!<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>-&gt;<a class="code" href="a00307.html#adfba8cbf1c85a12b6b826d332614072f">DeSerialize</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a47ec55378864d4e0a97793c08aea75c0">swap</a>(),</div>
<div class="line">                                     <a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#ad5be8f7fcf884390b22f02788330d82f">GetDataFilePtr</a>())) {</div>
<div class="line">        <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Error loading shape table!\n&quot;</span>);</div>
<div class="line">        <span class="keyword">delete</span> <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>;</div>
<div class="line">        <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a4c1d7ef19d7917740f1034980d0876fc">DebugLevel</a>() &gt; 0) {</div>
<div class="line">        <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Successfully loaded shape table!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a303e0f9733b2a55796b0178ba184f6b2">SeekToStart</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899afe6ffc645055800e632965abcbc9c501">TESSDATA_PFFMTABLE</a>));</div>
<div class="line">    <a class="code" href="a00091.html#a49a37c1ce02f5e114f0d57e49871b802">ReadNewCutoffs</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#ad5be8f7fcf884390b22f02788330d82f">GetDataFilePtr</a>(),</div>
<div class="line">                   <a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a47ec55378864d4e0a97793c08aea75c0">swap</a>(),</div>
<div class="line">                   <a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a89a94291dc1a6bb20fd28c04bfc0c1c4">GetEndOffset</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899afe6ffc645055800e632965abcbc9c501">TESSDATA_PFFMTABLE</a>),</div>
<div class="line">                   CharNormCutoffs);</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a4c1d7ef19d7917740f1034980d0876fc">DebugLevel</a>() &gt; 0) <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Loaded pffmtable\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a303e0f9733b2a55796b0178ba184f6b2">SeekToStart</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899a54f23d768a3b4d9d8cfd2513f5101d66">TESSDATA_NORMPROTO</a>));</div>
<div class="line">    <a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a> =</div>
<div class="line">      <a class="code" href="a00091.html#aabd742c09ff530922005e015a9e8bc2b">ReadNormProtos</a>(<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#ad5be8f7fcf884390b22f02788330d82f">GetDataFilePtr</a>(),</div>
<div class="line">                     <a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a89a94291dc1a6bb20fd28c04bfc0c1c4">GetEndOffset</a>(<a class="code" href="a00995.html#a5f278974ef80900b460194614d4f1899a54f23d768a3b4d9d8cfd2513f5101d66">TESSDATA_NORMPROTO</a>));</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a4a585cb38d5b19b5caedb7aded4a679a">tessdata_manager</a>.<a class="code" href="a00359.html#a4c1d7ef19d7917740f1034980d0876fc">DebugLevel</a>() &gt; 0) <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Loaded normproto\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#ac248b864f3f5effc9225c6f68d4b9e5b">Init</a>(&amp;<a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a>, <a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">  <a class="code" href="a00655.html#a1281b17b87e56c99d53fe6bb1f7c2d55">InitIntegerFX</a>();</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">  <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a> = <a class="code" href="a00771.html#a502314dc3ee4b178df067713b324b868">NewBitVector</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">  <a class="code" href="a00772.html#a137dcf6c3453d2a2b5cbfa7d369c754f">set_all_bits</a>(<a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>));</div>
<div class="line">  <a class="code" href="a00772.html#a137dcf6c3453d2a2b5cbfa7d369c754f">set_all_bits</a>(<a class="code" href="a00091.html#a3306f7dc2f0df8c08a9933493262a2c9">PrunedProtos</a>, <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>));</div>
<div class="line">  <a class="code" href="a00772.html#a137dcf6c3453d2a2b5cbfa7d369c754f">set_all_bits</a>(<a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>, <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>));</div>
<div class="line">  <a class="code" href="a00772.html#a33e25946d45a1e004a961dc46cb5226a">zero_all_bits</a>(<a class="code" href="a00091.html#a04608dab39f896c0358b42c228a7ef32">AllProtosOff</a>, <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>));</div>
<div class="line">  <a class="code" href="a00772.html#a33e25946d45a1e004a961dc46cb5226a">zero_all_bits</a>(<a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a>, <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>));</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++) {</div>
<div class="line">     BaselineCutoffs[i] = 0;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a52c6bf81f09a61859f999707e37c47f0">classify_use_pre_adapted_templates</a>) {</div>
<div class="line">    FILE *File;</div>
<div class="line">    <a class="code" href="a00319.html">STRING</a> Filename;</div>
<div class="line"></div>
<div class="line">    Filename = <a class="code" href="a00070.html#a5eea0d996032e28207d801a1ee92d388">imagefile</a>;</div>
<div class="line">    Filename += <a class="code" href="a00620.html#a788df8e37c3d6f36e3d18a7bb7a603f0">ADAPT_TEMPLATE_SUFFIX</a>;</div>
<div class="line">    File = fopen(Filename.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(), <span class="stringliteral">&quot;rb&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (File == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00091.html#a28ddc270cb5d2613f5f0f24ad53a5a21">NewAdaptedTemplates</a>(<span class="keyword">true</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="preprocessor">      #ifndef SECURE_NAMES</span></div>
<div class="line"><span class="preprocessor"></span>      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;\nReading pre-adapted templates from %s ...\n&quot;</span>,</div>
<div class="line">              Filename.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">      fflush(stdout);</div>
<div class="line"><span class="preprocessor">      #endif</span></div>
<div class="line"><span class="preprocessor"></span>      <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00091.html#aa74ebd96d85efc39d71c37985e50c8aa">ReadAdaptedTemplates</a>(File);</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">      fclose(File);</div>
<div class="line">      <a class="code" href="a00091.html#a15d6951abc586793270de0825bdb7dd7">PrintAdaptedTemplates</a>(stdout, <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++) {</div>
<div class="line">        BaselineCutoffs[i] = CharNormCutoffs[i];</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">      <a class="code" href="a00618.html#accee3ce0fad02a088149b714621dc21d">free_adapted_templates</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00091.html#a28ddc270cb5d2613f5f0f24ad53a5a21">NewAdaptedTemplates</a>(<span class="keyword">true</span>);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* InitAdaptiveClassifier */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0a6455e61097b98b01d180cd0b2748c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::LearnPieces </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>threshold</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240">CharSegmentationType</a>&#160;</td>
          <td class="paramname"><em>segmentation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>correct_text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00396.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l00394">394</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line">  <span class="comment">// TODO(daria) Remove/modify this if/when we want</span></div>
<div class="line">  <span class="comment">// to train and/or adapt to n-grams.</span></div>
<div class="line">  <span class="keywordflow">if</span> (segmentation != <a class="code" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240ab74e41d8efe1a9beae832eb1652096f5">CST_WHOLE</a> &amp;&amp;</div>
<div class="line">      (segmentation != <a class="code" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240af7f038dab34772b9ddb631d46aa4126a">CST_FRAGMENT</a> || <a class="code" href="a00091.html#ab9c25bf0ebc01c57728e19b2bbc980ef">disable_character_fragments</a>))</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (length &gt; 1) {</div>
<div class="line">    <a class="code" href="a00540.html#a919dc51833c934e6738e5e18d2dd43f6">join_pieces</a>(word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>, word-&gt;<a class="code" href="a00396.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>,</div>
<div class="line">                start, start + length - 1);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00346.html">TBLOB</a>* blob = word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; start; ++i)</div>
<div class="line">    blob = blob-&gt;<a class="code" href="a00346.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;</div>
<div class="line">  <span class="comment">// Rotate the blob if needed for classification.</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00126.html">DENORM</a>* denorm = &amp;word-&gt;<a class="code" href="a00396.html#a202d9d5d2a462d84012011c689e16605">denorm</a>;</div>
<div class="line">  <a class="code" href="a00346.html">TBLOB</a>* rotated_blob = blob-&gt;<a class="code" href="a00346.html#a01a7a878b92170eaa04d65435b0ef4cc">ClassifyNormalizeIfNeeded</a>(&amp;denorm);</div>
<div class="line">  <span class="keywordflow">if</span> (rotated_blob == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    rotated_blob = blob;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">// Draw debug windows showing the blob that is being learned if needed.</span></div>
<div class="line">  <span class="keywordflow">if</span> (strcmp(<a class="code" href="a00091.html#abdd8831d44ce5ea36f7bbee1ed9c4e8a">classify_learn_debug_str</a>.string(), correct_text) == 0) {</div>
<div class="line">    <a class="code" href="a00091.html#a6e36e01c8147d95bbd64c6609e1b8f45">RefreshDebugWindow</a>(&amp;learn_debug_win_, <span class="stringliteral">&quot;LearnPieces&quot;</span>, 600,</div>
<div class="line">                       word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#a8278c9db39975f181ad074bf343ea402">bounding_box</a>());</div>
<div class="line">    rotated_blob-&gt;plot(learn_debug_win_, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a9d8c87be486dead41d198d6b97a22174">ScrollView::GREEN</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a3147083bcb68eb690858099c736e6857">ScrollView::BROWN</a>);</div>
<div class="line">    learn_debug_win_-&gt;<a class="code" href="a00294.html#a0830a51981a20c8700b5ec49137e46e9">Update</a>();</div>
<div class="line">    <a class="code" href="a00773.html#a51dc37eb580fe7f758275685e5ce0d59">window_wait</a>(learn_debug_win_);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a> &amp;&amp; segmentation == <a class="code" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240af7f038dab34772b9ddb631d46aa4126a">CST_FRAGMENT</a>) {</div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(learn_fragments_debug_win_ != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);  <span class="comment">// set up in LearnWord</span></div>
<div class="line">    blob-&gt;<a class="code" href="a00346.html#aea2abdf5701d97f2aece1a5fbabaf77e">plot</a>(learn_fragments_debug_win_,</div>
<div class="line">               <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a3147083bcb68eb690858099c736e6857">ScrollView::BROWN</a>);</div>
<div class="line">    learn_fragments_debug_win_-&gt;<a class="code" href="a00294.html#a0830a51981a20c8700b5ec49137e46e9">Update</a>();</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">  #endif  // GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00996.html#ab85cc7ce156038d7a91fc6b51085c72e">filename</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>.set_value(<a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a>);  <span class="comment">// force char norm spc 30/11/93</span></div>
<div class="line">    <a class="code" href="a00091.html#a85fcc9966cddbc38adf1014dd0cd778c">tess_bn_matching</a>.set_value(<span class="keyword">false</span>);    <span class="comment">// turn it off</span></div>
<div class="line">    <a class="code" href="a00091.html#a746dbbd1c99e99f3d213077cceedf80e">tess_cn_matching</a>.set_value(<span class="keyword">false</span>);</div>
<div class="line">    <a class="code" href="a00622.html#aa38d9ea697967c87442bc9a97a64f7e5">LearnBlob</a>(<a class="code" href="a00091.html#a6ebcfd2968c704f99efd40075ecdb138">feature_defs_</a>, <a class="code" href="a00996.html#ab85cc7ce156038d7a91fc6b51085c72e">filename</a>, rotated_blob, *denorm,</div>
<div class="line">              correct_text);</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(correct_text)) {</div>
<div class="line">    <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> class_id = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(correct_text);</div>
<div class="line">    <span class="keywordtype">int</span> font_id = word-&gt;<a class="code" href="a00396.html#a37a6c598c67dcbcce6af7fbd6e2c595f">fontinfo</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div>
<div class="line">                ? <a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a4820bb7a54cf6ecda86856161c6d5a2f">get_id</a>(*word-&gt;<a class="code" href="a00396.html#a37a6c598c67dcbcce6af7fbd6e2c595f">fontinfo</a>)</div>
<div class="line">                : 0;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Adapting to char = %s, thr= %g font_id= %d\n&quot;</span>,</div>
<div class="line">              <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(class_id), threshold, font_id);</div>
<div class="line">    <span class="comment">// If filename is not NULL we are doing recognition</span></div>
<div class="line">    <span class="comment">// (as opposed to training), so we must have already set word fonts.</span></div>
<div class="line">    <a class="code" href="a00091.html#a53629ef3f5562677ae096bbce864e5ab">AdaptToChar</a>(rotated_blob, *denorm, class_id, font_id, threshold);</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Can&#39;t adapt to %s not in unicharset\n&quot;</span>, correct_text);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (rotated_blob != blob) {</div>
<div class="line">    <span class="keyword">delete</span> rotated_blob;</div>
<div class="line">    <span class="keyword">delete</span> denorm;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00540.html#ac76b2d230d4c44cb0346f516b8a7134a">break_pieces</a>(blob, word-&gt;<a class="code" href="a00396.html#adefe2273d7f4b36fcbe7ae420bfd077a">seam_array</a>, start, start + length - 1);</div>
<div class="line">}  <span class="comment">// LearnPieces.</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbbd86871758c036d7ba2af682abb45f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::LearnWord </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>rejmap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00396.html">WERD_RES</a> *&#160;</td>
          <td class="paramname"><em>word</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l00254">254</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">  <span class="keywordtype">int</span> word_len = word-&gt;<a class="code" href="a00396.html#ae524416d2398009c92a5678105f3cbfb">correct_text</a>.<a class="code" href="a00175.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (word_len == 0) <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">float</span>* thresholds = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00996.html#ab85cc7ce156038d7a91fc6b51085c72e">filename</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// Adaption mode.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a> || word-&gt;<a class="code" href="a00396.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line">        <span class="comment">// If word-&gt;best_choice is not recorded at the top of accumulator&#39;s</span></div>
<div class="line">        <span class="comment">// best choices (which could happen for choices that are</span></div>
<div class="line">        <span class="comment">// altered with ReplaceAmbig()) we skip the adaption.</span></div>
<div class="line">        !<a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().CurrentBestChoiceIs(*(word-&gt;<a class="code" href="a00396.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>)))</div>
<div class="line">      <span class="keywordflow">return</span>;  <span class="comment">// Can&#39;t or won&#39;t adapt.</span></div>
<div class="line"></div>
<div class="line">    NumWordsAdaptedTo++;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n\nAdapting to word = %s\n&quot;</span>,</div>
<div class="line">              word-&gt;<a class="code" href="a00396.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>-&gt;<a class="code" href="a00395.html#a9f084172bbfc8604af49788aad12da36">debug_string</a>().<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>());</div>
<div class="line">    thresholds = <span class="keyword">new</span> <span class="keywordtype">float</span>[word_len];</div>
<div class="line">    <a class="code" href="a00091.html#a57d34f380d093913f3c3e74f7a7a9840">GetAdaptThresholds</a>(word-&gt;<a class="code" href="a00396.html#a211ab5c5a13123ee7bdc7459d3363f9d">rebuild_word</a>, word-&gt;<a class="code" href="a00396.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, *word-&gt;<a class="code" href="a00396.html#a3d42ac7ec121263e757c9b7160dfd50d">best_choice</a>,</div>
<div class="line">                       *word-&gt;<a class="code" href="a00396.html#ab4d02a7548dab0a4522f02ed90e48100">raw_choice</a>, thresholds);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">int</span> start_blob = 0;</div>
<div class="line">  <span class="keywordtype">char</span> prev_map_char = <span class="charliteral">&#39;0&#39;</span>;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (learn_fragmented_word_debug_win_ != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <a class="code" href="a00773.html#a51dc37eb580fe7f758275685e5ce0d59">window_wait</a>(learn_fragmented_word_debug_win_);</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00091.html#a6e36e01c8147d95bbd64c6609e1b8f45">RefreshDebugWindow</a>(&amp;learn_fragments_debug_win_, <span class="stringliteral">&quot;LearnPieces&quot;</span>, 400,</div>
<div class="line">                       word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#a8278c9db39975f181ad074bf343ea402">bounding_box</a>());</div>
<div class="line">    <a class="code" href="a00091.html#a6e36e01c8147d95bbd64c6609e1b8f45">RefreshDebugWindow</a>(&amp;learn_fragmented_word_debug_win_, <span class="stringliteral">&quot;LearnWord&quot;</span>, 200,</div>
<div class="line">                       word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#a8278c9db39975f181ad074bf343ea402">bounding_box</a>());</div>
<div class="line">    word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#afe89f2f31b48fa578028f2527b55e144">plot</a>(learn_fragmented_word_debug_win_);</div>
<div class="line">    <a class="code" href="a00294.html#a0830a51981a20c8700b5ec49137e46e9">ScrollView::Update</a>();</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">  #endif  // GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ch = 0; ch &lt; word_len; ++ch) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a>) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\nLearning %s\n&quot;</span>,  word-&gt;<a class="code" href="a00396.html#ae524416d2398009c92a5678105f3cbfb">correct_text</a>[ch].string());</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordtype">char</span> rej_map_char = rejmap != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? *rejmap++ : <span class="charliteral">&#39;1&#39;</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (word-&gt;<a class="code" href="a00396.html#ae524416d2398009c92a5678105f3cbfb">correct_text</a>[ch].<a class="code" href="a00175.html#a690cd403343d371ed7763fdaf3ed71d2">length</a>() &gt; 0 &amp;&amp; rej_map_char == <span class="charliteral">&#39;1&#39;</span>) {</div>
<div class="line">      <span class="keywordtype">float</span> threshold = thresholds != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? thresholds[ch] : 0.0f;</div>
<div class="line"></div>
<div class="line">      <a class="code" href="a00091.html#a0a6455e61097b98b01d180cd0b2748c9">LearnPieces</a>(<a class="code" href="a00996.html#ab85cc7ce156038d7a91fc6b51085c72e">filename</a>, start_blob, word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch],</div>
<div class="line">                  threshold, <a class="code" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240ab74e41d8efe1a9beae832eb1652096f5">CST_WHOLE</a>, word-&gt;<a class="code" href="a00396.html#ae524416d2398009c92a5678105f3cbfb">correct_text</a>[ch].string(), word);</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch] &gt; 1 &amp;&amp; !<a class="code" href="a00091.html#ab9c25bf0ebc01c57728e19b2bbc980ef">disable_character_fragments</a>) {</div>
<div class="line">        <span class="comment">// Check that the character breaks into meaningful fragments</span></div>
<div class="line">        <span class="comment">// that each match a whole character with at least</span></div>
<div class="line">        <span class="comment">// classify_character_fragments_garbage_certainty_threshold</span></div>
<div class="line">        <span class="keywordtype">bool</span> garbage = <span class="keyword">false</span>;</div>
<div class="line">        <a class="code" href="a00346.html">TBLOB</a>* frag_blob = word-&gt;<a class="code" href="a00396.html#ad1d449f93bb0150bc7ef0d9b59ed27ba">chopped_word</a>-&gt;<a class="code" href="a00381.html#aeec31d57df04c8dac1cf3e6990d358a7">blobs</a>;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; start_blob; ++i) frag_blob = frag_blob-&gt;<a class="code" href="a00346.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;</div>
<div class="line">        <span class="keywordtype">int</span> frag;</div>
<div class="line">        for (frag = 0; frag &lt; word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch]; ++frag) {</div>
<div class="line">          <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a342dfc4f244244bd1bc211ea910e2b12">classify_character_fragments_garbage_certainty_threshold</a> &lt; 0) {</div>
<div class="line">            garbage |= <a class="code" href="a00091.html#ab72f687048a2e1eba44b8ae2cfb07fa9">LooksLikeGarbage</a>(word-&gt;<a class="code" href="a00396.html#a202d9d5d2a462d84012011c689e16605">denorm</a>, frag_blob);</div>
<div class="line">          }</div>
<div class="line">          frag_blob = frag_blob-&gt;<a class="code" href="a00346.html#a88a541f55c8bfd63a9f0c419189499bb">next</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Learn the fragments.</span></div>
<div class="line">        <span class="keywordflow">if</span> (!garbage) {</div>
<div class="line">          <span class="keywordtype">bool</span> pieces_all_natural = word-&gt;<a class="code" href="a00396.html#a96ed4fc2d1583d0e35e088432ab00a21">PiecesAllNatural</a>(start_blob,</div>
<div class="line">              word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch]);</div>
<div class="line">          <span class="keywordflow">if</span> (pieces_all_natural || !<a class="code" href="a00091.html#a22717c4d299d3a52683ad90114b20200">prioritize_division</a>) {</div>
<div class="line">            <span class="keywordflow">for</span> (frag = 0; frag &lt; word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch]; ++frag) {</div>
<div class="line">              <a class="code" href="a00175.html">GenericVector&lt;STRING&gt;</a> tokens;</div>
<div class="line">              word-&gt;<a class="code" href="a00396.html#ae524416d2398009c92a5678105f3cbfb">correct_text</a>[ch].split(<span class="charliteral">&#39; &#39;</span>, &amp;tokens);</div>
<div class="line"></div>
<div class="line">              tokens[0] = <a class="code" href="a00074.html#ab7a7a173907f187f44677d2ad2679e09">CHAR_FRAGMENT::to_string</a>(</div>
<div class="line">                  tokens[0].<span class="keywordtype">string</span>(), frag, word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch],</div>
<div class="line">                  pieces_all_natural);</div>
<div class="line"></div>
<div class="line">              <a class="code" href="a00319.html">STRING</a> full_string;</div>
<div class="line">              <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; tokens.<a class="code" href="a00175.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>(); i++) {</div>
<div class="line">                full_string += tokens[i];</div>
<div class="line">                <span class="keywordflow">if</span> (i != tokens.<a class="code" href="a00175.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>() - 1)</div>
<div class="line">                  full_string += <span class="charliteral">&#39; &#39;</span>;</div>
<div class="line">              }</div>
<div class="line">              <a class="code" href="a00091.html#a0a6455e61097b98b01d180cd0b2748c9">LearnPieces</a>(<a class="code" href="a00996.html#ab85cc7ce156038d7a91fc6b51085c72e">filename</a>, start_blob + frag, 1,</div>
<div class="line">                          threshold, <a class="code" href="a00995.html#afe12112c1ca56d41c919d0f18dfdf240af7f038dab34772b9ddb631d46aa4126a">CST_FRAGMENT</a>, full_string.<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(), word);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">// TODO(rays): re-enable this part of the code when we switch to the</span></div>
<div class="line">      <span class="comment">// new classifier that needs to see examples of garbage.</span></div>
<div class="line">      <span class="comment">/*</span></div>
<div class="line"><span class="comment">      char next_map_char = ch + 1 &lt; word_len</span></div>
<div class="line"><span class="comment">                           ? (rejmap != NULL ? *rejmap : &#39;1&#39;)</span></div>
<div class="line"><span class="comment">                           : &#39;0&#39;;</span></div>
<div class="line"><span class="comment">      if (word-&gt;best_state[ch] &gt; 1) {</span></div>
<div class="line"><span class="comment">        // If the next blob is good, make junk with the rightmost fragment.</span></div>
<div class="line"><span class="comment">        if (ch + 1 &lt; word_len &amp;&amp; word-&gt;correct_text[ch + 1].length() &gt; 0 &amp;&amp;</span></div>
<div class="line"><span class="comment">            next_map_char == &#39;1&#39;) {</span></div>
<div class="line"><span class="comment">          LearnPieces(filename, start_blob + word-&gt;best_state[ch] - 1,</span></div>
<div class="line"><span class="comment">                      word-&gt;best_state[ch + 1] + 1,</span></div>
<div class="line"><span class="comment">                      threshold, CST_IMPROPER, INVALID_UNICHAR, word);</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment">        // If the previous blob is good, make junk with the leftmost fragment.</span></div>
<div class="line"><span class="comment">        if (ch &gt; 0 &amp;&amp; word-&gt;correct_text[ch - 1].length() &gt; 0 &amp;&amp;</span></div>
<div class="line"><span class="comment">            prev_map_char == &#39;1&#39;) {</span></div>
<div class="line"><span class="comment">          LearnPieces(filename, start_blob - word-&gt;best_state[ch - 1],</span></div>
<div class="line"><span class="comment">                      word-&gt;best_state[ch - 1] + 1,</span></div>
<div class="line"><span class="comment">                      threshold, CST_IMPROPER, INVALID_UNICHAR, word);</span></div>
<div class="line"><span class="comment">        }</span></div>
<div class="line"><span class="comment">      }</span></div>
<div class="line"><span class="comment">      // If the next blob is good, make a join with it.</span></div>
<div class="line"><span class="comment">      if (ch + 1 &lt; word_len &amp;&amp; word-&gt;correct_text[ch + 1].length() &gt; 0 &amp;&amp;</span></div>
<div class="line"><span class="comment">          next_map_char == &#39;1&#39;) {</span></div>
<div class="line"><span class="comment">        STRING joined_text = word-&gt;correct_text[ch];</span></div>
<div class="line"><span class="comment">        joined_text += word-&gt;correct_text[ch + 1];</span></div>
<div class="line"><span class="comment">        LearnPieces(filename, start_blob,</span></div>
<div class="line"><span class="comment">                    word-&gt;best_state[ch] + word-&gt;best_state[ch + 1],</span></div>
<div class="line"><span class="comment">                    threshold, CST_NGRAM, joined_text.string(), word);</span></div>
<div class="line"><span class="comment">      }</span></div>
<div class="line"><span class="comment">      */</span></div>
<div class="line">    }</div>
<div class="line">    start_blob += word-&gt;<a class="code" href="a00396.html#ab3c9354a32a99c3283f4ac411b5f9b93">best_state</a>[ch];</div>
<div class="line">    prev_map_char = rej_map_char;</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] thresholds;</div>
<div class="line">}  <span class="comment">// LearnWord.</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab72f687048a2e1eba44b8ae2cfb07fa9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::LooksLikeGarbage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01991">1991</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  BLOB_CHOICE_LIST *ratings = <span class="keyword">new</span> BLOB_CHOICE_LIST();</div>
<div class="line">  <a class="code" href="a00091.html#a1f058451e32538b4dc2c853b82bc6600">AdaptiveClassifier</a>(blob, denorm, ratings, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  BLOB_CHOICE_IT ratings_it(ratings);</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00387.html">UNICHARSET</a> &amp;<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a> = <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a635ce00ba9aa24247563d26ae26da631">getUnicharset</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0c8e4bf5e3032c6468b909b6aca7f416">classify_debug_character_fragments</a>) {</div>
<div class="line">    <a class="code" href="a00534.html#a2de5b7d5a020bb9823091dbece4ea36e">print_ratings_list</a>(<span class="stringliteral">&quot;======================\nLooksLikeGarbage() got &quot;</span>,</div>
<div class="line">                       ratings, unicharset);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (ratings_it.mark_cycle_pt(); !ratings_it.cycled_list();</div>
<div class="line">       ratings_it.forward()) {</div>
<div class="line">    <span class="keywordflow">if</span> (unicharset.<a class="code" href="a00387.html#af08440927e3b87f99bd3a3fbd8e126dc">get_fragment</a>(ratings_it.data()-&gt;unichar_id()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keyword">delete</span> ratings;</div>
<div class="line">    <span class="keywordflow">return</span> (ratings_it.data()-&gt;certainty() &lt;</div>
<div class="line">            <a class="code" href="a00091.html#a342dfc4f244244bd1bc211ea910e2b12">classify_character_fragments_garbage_certainty_threshold</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> ratings;</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;  <span class="comment">// no whole characters in ratings</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a59900939784eac1e2e6ebfec1f82bb58"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::MakeNewTemporaryConfig </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>FontinfoId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>NumFeatures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a>&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a>&#160;</td>
          <td class="paramname"><em>FloatFeatures</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Templates</td><td>adapted templates to add new config to </td></tr>
    <tr><td class="paramname">ClassId</td><td>class id to associate with new config </td></tr>
    <tr><td class="paramname">FontinfoId</td><td>font information inferred from pre-trained templates </td></tr>
    <tr><td class="paramname">NumFeatures</td><td>number of features in IntFeatures </td></tr>
    <tr><td class="paramname">Features</td><td>features describing model for new config </td></tr>
    <tr><td class="paramname">FloatFeatures</td><td>floating-pt representation of features</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>The id of the new config created, a negative integer in case of error. </dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Fri Mar 15 08:49:46 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02136">2136</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> IClass;</div>
<div class="line">  <a class="code" href="a00031.html">ADAPT_CLASS</a> Class;</div>
<div class="line">  <a class="code" href="a00805.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> OldProtos[<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>];</div>
<div class="line">  <a class="code" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a> BadFeatures[<a class="code" href="a00407.html#a4f7caedc4bed99355cae19efa51ade51">MAX_NUM_INT_FEATURES</a>];</div>
<div class="line">  <span class="keywordtype">int</span> NumOldProtos;</div>
<div class="line">  <span class="keywordtype">int</span> NumBadFeatures;</div>
<div class="line">  <span class="keywordtype">int</span> MaxProtoId, OldMaxProtoId;</div>
<div class="line">  <span class="keywordtype">int</span> BlobLength = 0;</div>
<div class="line">  <span class="keywordtype">int</span> MaskSize;</div>
<div class="line">  <span class="keywordtype">int</span> ConfigId;</div>
<div class="line">  <a class="code" href="a00348.html">TEMP_CONFIG</a> <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <span class="keywordtype">int</span> debug_level = <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 3)</div>
<div class="line">    debug_level =</div>
<div class="line">        <a class="code" href="a00660.html#aa2ca7d346731ee98e1ef445c0313d0db">PRINT_MATCH_SUMMARY</a> | <a class="code" href="a00660.html#af5131c6984c3afc47e8344ae4a440ccd">PRINT_FEATURE_MATCHES</a> | <a class="code" href="a00660.html#aed2eae56505e79fb4ad49057437bd377">PRINT_PROTO_MATCHES</a>;</div>
<div class="line"></div>
<div class="line">  IClass = <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId);</div>
<div class="line">  Class = Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (IClass-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> &gt;= <a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>) {</div>
<div class="line">    ++NumAdaptationsFailed;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Cannot make new temporary config: maximum number exceeded.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  OldMaxProtoId = IClass-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> - 1;</div>
<div class="line"></div>
<div class="line">  NumOldProtos = <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aca707de9917b1cf3f19859aa94762ec8">FindGoodProtos</a>(IClass, <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00091.html#a974e5b3b4ee8b184a3af4ba782750dd7">AllConfigsOff</a>,</div>
<div class="line">                                    BlobLength, NumFeatures, Features,</div>
<div class="line">                                    OldProtos, <a class="code" href="a00091.html#a3d74369343952e81efa5ac8858d5e9d1">classify_adapt_proto_threshold</a>,</div>
<div class="line">                                    debug_level);</div>
<div class="line"></div>
<div class="line">  MaskSize = <a class="code" href="a00772.html#a905ff9b6c51cb231dd8baf1713a3c9b8">WordsInVectorOfSize</a>(<a class="code" href="a00660.html#a3e890a5d21d8456ad197510fd7caf277">MAX_NUM_PROTOS</a>);</div>
<div class="line">  <a class="code" href="a00772.html#a33e25946d45a1e004a961dc46cb5226a">zero_all_bits</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, MaskSize);</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; NumOldProtos; i++)</div>
<div class="line">    <a class="code" href="a00772.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, OldProtos[i]);</div>
<div class="line"></div>
<div class="line">  NumBadFeatures = <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#a174bbfbb928c62b6e36c4f116e480de0">FindBadFeatures</a>(IClass, <a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>,</div>
<div class="line">                                       BlobLength, NumFeatures, Features,</div>
<div class="line">                                       BadFeatures,</div>
<div class="line">                                       <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">                                       debug_level);</div>
<div class="line"></div>
<div class="line">  MaxProtoId = <a class="code" href="a00091.html#adc0facdf672d23f65612b56b4a5f523a">MakeNewTempProtos</a>(FloatFeatures, NumBadFeatures, BadFeatures,</div>
<div class="line">                                 IClass, Class, <a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (MaxProtoId == <a class="code" href="a00805.html#a4d2ae3978d57e3b05f984a0fedc51812">NO_PROTO</a>) {</div>
<div class="line">    ++NumAdaptationsFailed;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Cannot make new temp protos: maximum number exceeded.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  ConfigId = <a class="code" href="a00659.html#a569488473772d42004fec43399e6d5a9">AddIntConfig</a>(IClass);</div>
<div class="line">  <a class="code" href="a00659.html#a57b07752bea2110e2503cf78747228c5">ConvertConfig</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, ConfigId, IClass);</div>
<div class="line">  Config = <a class="code" href="a00618.html#af29bddcf8cc7f50548382c9594716559">NewTempConfig</a>(MaxProtoId, FontinfoId);</div>
<div class="line">  <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(Class, ConfigId) = <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>;</div>
<div class="line">  <a class="code" href="a00772.html#ae535f23da300bdf6ea284fc5e85ca14a">copy_all_bits</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, Config-&gt;<a class="code" href="a00348.html#a2ea5edb90b556766fce2105dcdfe3141">Protos</a>, Config-&gt;<a class="code" href="a00348.html#ab21bd28ad8f7448dcdc327ac13dbe553">ProtoVectorSize</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1)</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Making new temp config %d fontinfo id %d&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; using %d old and %d new protos.\n&quot;</span>,</div>
<div class="line">            ConfigId, Config-&gt;<a class="code" href="a00348.html#a76b02dedaede2e6e34653155be6f8c7b">FontinfoId</a>,</div>
<div class="line">            NumOldProtos, MaxProtoId - OldMaxProtoId);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> ConfigId;</div>
<div class="line">}                              <span class="comment">/* MakeNewTemporaryConfig */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc0facdf672d23f65612b56b4a5f523a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00805.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> tesseract::Classify::MakeNewTempProtos </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00678.html#ac0c2f756ba2c7f34a21efbe13a49ac39">FEATURE_SET</a>&#160;</td>
          <td class="paramname"><em>Features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>NumBadFeat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a>&#160;</td>
          <td class="paramname"><em>BadFeat</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a>&#160;</td>
          <td class="paramname"><em>IClass</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a>&#160;</td>
          <td class="paramname"><em>Class</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>&#160;</td>
          <td class="paramname"><em>TempProtoMask</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine finds sets of sequential bad features that all have the same angle and converts each set into a new temporary proto. The temp proto is added to the proto pruner for IClass, pushed onto the list of temp protos in Class, and added to TempProtoMask.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Features</td><td>floating-pt features describing new character </td></tr>
    <tr><td class="paramname">NumBadFeat</td><td>number of bad features to turn into protos </td></tr>
    <tr><td class="paramname">BadFeat</td><td>feature id's of bad features </td></tr>
    <tr><td class="paramname">IClass</td><td>integer class templates to add new protos to </td></tr>
    <tr><td class="paramname">Class</td><td>adapted class templates to add new protos to </td></tr>
    <tr><td class="paramname">TempProtoMask</td><td>proto mask to add new protos to</td></tr>
  </table>
  </dd>
</dl>
<p>Globals: none</p>
<dl class="section return"><dt>Returns:</dt><dd>Max proto id in class after all protos have been added. Exceptions: none History: Fri Mar 15 11:39:38 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02233">2233</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  <a class="code" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a> *ProtoStart;</div>
<div class="line">  <a class="code" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a> *ProtoEnd;</div>
<div class="line">  <a class="code" href="a00805.html#a2223404e7ad809dd36193cc195377f56">FEATURE_ID</a> *LastBad;</div>
<div class="line">  <a class="code" href="a00349.html">TEMP_PROTO</a> TempProto;</div>
<div class="line">  <a class="code" href="a00272.html">PROTO</a> Proto;</div>
<div class="line">  <a class="code" href="a00155.html">FEATURE</a> F1, F2;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> X1, X2, Y1, Y2;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> A1, A2, AngleDelta;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> SegmentLength;</div>
<div class="line">  <a class="code" href="a00805.html#ac80a5d84c2805bfd10ac129d949f8b80">PROTO_ID</a> Pid;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (ProtoStart = BadFeat, LastBad = ProtoStart + NumBadFeat;</div>
<div class="line">       ProtoStart &lt; LastBad; ProtoStart = ProtoEnd) {</div>
<div class="line">    F1 = Features-&gt;<a class="code" href="a00154.html#a4664d6a22a9d12f4011de4d877664c45">Features</a>[*ProtoStart];</div>
<div class="line">    X1 = F1-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aacaf28d56154a908256d7b3beb62977e2fc">PicoFeatX</a>];</div>
<div class="line">    Y1 = F1-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca43884de5e2e87be26f9642b50135f98a">PicoFeatY</a>];</div>
<div class="line">    A1 = F1-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca9895f2baa648985ab8ee5586c1563511">PicoFeatDir</a>];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (ProtoEnd = ProtoStart + 1,</div>
<div class="line">         SegmentLength = <a class="code" href="a00682.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>();</div>
<div class="line">         ProtoEnd &lt; LastBad;</div>
<div class="line">         ProtoEnd++, SegmentLength += <a class="code" href="a00682.html#a35f5a174efc9c6197837aaf5544c78f2">GetPicoFeatureLength</a>()) {</div>
<div class="line">      F2 = Features-&gt;<a class="code" href="a00154.html#a4664d6a22a9d12f4011de4d877664c45">Features</a>[*ProtoEnd];</div>
<div class="line">      X2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aacaf28d56154a908256d7b3beb62977e2fc">PicoFeatX</a>];</div>
<div class="line">      Y2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca43884de5e2e87be26f9642b50135f98a">PicoFeatY</a>];</div>
<div class="line">      A2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca9895f2baa648985ab8ee5586c1563511">PicoFeatDir</a>];</div>
<div class="line"></div>
<div class="line">      AngleDelta = fabs(A1 - A2);</div>
<div class="line">      <span class="keywordflow">if</span> (AngleDelta &gt; 0.5)</div>
<div class="line">        AngleDelta = 1.0 - AngleDelta;</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">if</span> (AngleDelta &gt; <a class="code" href="a00091.html#a76bc2aed534982a6b67afe8a6653b04f">matcher_clustering_max_angle_delta</a> ||</div>
<div class="line">          fabs(X1 - X2) &gt; SegmentLength ||</div>
<div class="line">          fabs(Y1 - Y2) &gt; SegmentLength)</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    F2 = Features-&gt;<a class="code" href="a00154.html#a4664d6a22a9d12f4011de4d877664c45">Features</a>[*(ProtoEnd - 1)];</div>
<div class="line">    X2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aacaf28d56154a908256d7b3beb62977e2fc">PicoFeatX</a>];</div>
<div class="line">    Y2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca43884de5e2e87be26f9642b50135f98a">PicoFeatY</a>];</div>
<div class="line">    A2 = F2-&gt;<a class="code" href="a00155.html#ace52f36cfcba955504f4a24f86a897b4">Params</a>[<a class="code" href="a00682.html#ac00e1c5d2ac3096e0928e2186aee1aaca9895f2baa648985ab8ee5586c1563511">PicoFeatDir</a>];</div>
<div class="line"></div>
<div class="line">    Pid = <a class="code" href="a00659.html#a4c27266652a51cf8aaa866d299f57301">AddIntProto</a>(IClass);</div>
<div class="line">    <span class="keywordflow">if</span> (Pid == <a class="code" href="a00805.html#a4d2ae3978d57e3b05f984a0fedc51812">NO_PROTO</a>)</div>
<div class="line">      <span class="keywordflow">return</span> (<a class="code" href="a00805.html#a4d2ae3978d57e3b05f984a0fedc51812">NO_PROTO</a>);</div>
<div class="line"></div>
<div class="line">    TempProto = <a class="code" href="a00618.html#a5dec565ee3ad1656d02860db322e4448">NewTempProto</a>();</div>
<div class="line">    Proto = &amp;(TempProto-&gt;<a class="code" href="a00349.html#acf720eb61d4a91e84d949a6f772ea7c5">Proto</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* compute proto params - NOTE that Y_DIM_OFFSET must be used because</span></div>
<div class="line"><span class="comment">       ConvertProto assumes that the Y dimension varies from -0.5 to 0.5</span></div>
<div class="line"><span class="comment">       instead of the -0.25 to 0.75 used in baseline normalization */</span></div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#aa29d8aaab147327320e2bc94a821aad1">Length</a> = SegmentLength;</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a6cc7458f385f9c4673e1ce9a6dc9e80a">Angle</a> = A1;</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a54dd1cca86a1fd5c9ead8499cba99784">X</a> = (X1 + X2) / 2.0;</div>
<div class="line">    Proto-&gt;<a class="code" href="a00272.html#a8dcd81037c1bc672e97ef7a54306dd93">Y</a> = (Y1 + Y2) / 2.0 - <a class="code" href="a00620.html#ac5fe456fd5a30097c95a104b29c45cc3">Y_DIM_OFFSET</a>;</div>
<div class="line">    <a class="code" href="a00683.html#ac0d58978bbcf0c732ae94fb554bccd3b">FillABC</a>(Proto);</div>
<div class="line"></div>
<div class="line">    TempProto-&gt;<a class="code" href="a00349.html#a93992200ebfddd13e25d0e9122af9b5b">ProtoId</a> = Pid;</div>
<div class="line">    <a class="code" href="a00772.html#ab02d606cf8dca49ccadb00248bdbafe9">SET_BIT</a>(<a class="code" href="a00091.html#a26b1c76382f418bf5a78bad15b23b8ad">TempProtoMask</a>, Pid);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#af27d604585502bd447d52bf5daf15d0d">ConvertProto</a>(Proto, Pid, IClass);</div>
<div class="line">    <a class="code" href="a00659.html#aec09adc2735bb4caaf226df7124e4ed7">AddProtoToProtoPruner</a>(Proto, Pid, IClass,</div>
<div class="line">                          <a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 2);</div>
<div class="line"></div>
<div class="line">    Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a> = <a class="code" href="a00793.html#a9c4294375af81ab4c133b6b5a3679a16">push</a>(Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a>, TempProto);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> IClass-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> - 1;</div>
<div class="line">}                              <span class="comment">/* MakeNewTempProtos */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aefb0cfe284dd67601798f7ae510b787f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::MakePermanent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ConfigId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Templates</td><td>current set of adaptive templates </td></tr>
    <tr><td class="paramname">ClassId</td><td>class containing config to be made permanent </td></tr>
    <tr><td class="paramname">ConfigId</td><td>config to be made permanent </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">Blob</td><td>current blob being adapted to</td></tr>
  </table>
  </dd>
</dl>
<p>Globals: none</p>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu Mar 14 15:54:08 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02323">2323</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                          {</div>
<div class="line">  <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *Ambigs;</div>
<div class="line">  <a class="code" href="a00348.html">TEMP_CONFIG</a> <a class="code" href="a00929.html#a1630a3dc82a9a7cef07bb6153df9eb9c">Config</a>;</div>
<div class="line">  <a class="code" href="a00031.html">ADAPT_CLASS</a> Class;</div>
<div class="line">  <a class="code" href="a00270.html">PROTO_KEY</a> ProtoKey;</div>
<div class="line"></div>
<div class="line">  Class = Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId];</div>
<div class="line">  Config = <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(Class, ConfigId);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00619.html#a43dd293941046156e425af5080c56228">MakeConfigPermanent</a>(Class, ConfigId);</div>
<div class="line">  <span class="keywordflow">if</span> (Class-&gt;<a class="code" href="a00031.html#afe5769d3f67549e0938480aab2d2b1cd">NumPermConfigs</a> == 0)</div>
<div class="line">    Templates-&gt;<a class="code" href="a00033.html#ac4e39261d76ebdd092eeb754fe1e15c3">NumPermClasses</a>++;</div>
<div class="line">  Class-&gt;<a class="code" href="a00031.html#afe5769d3f67549e0938480aab2d2b1cd">NumPermConfigs</a>++;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Initialize permanent config.</span></div>
<div class="line">  Ambigs = <a class="code" href="a00091.html#af4c186f6ec1019d17912d2cf36326f1f">GetAmbiguities</a>(Blob, denorm, ClassId);</div>
<div class="line">  <a class="code" href="a00264.html">PERM_CONFIG</a> Perm = (<a class="code" href="a00619.html#a461ee34b392d9264f8ff553d28029c52">PERM_CONFIG</a>) <a class="code" href="a00583.html#a4f4e6728de23eb0530f9bdc8b3a114d3">alloc_struct</a>(<span class="keyword">sizeof</span>(<a class="code" href="a00264.html">PERM_CONFIG_STRUCT</a>),</div>
<div class="line">                                                <span class="stringliteral">&quot;PERM_CONFIG_STRUCT&quot;</span>);</div>
<div class="line">  Perm-&gt;<a class="code" href="a00264.html#ad64b24b19468c44594a84a71f5515bf8">Ambigs</a> = Ambigs;</div>
<div class="line">  Perm-&gt;<a class="code" href="a00264.html#a81ce1dd96fbaed7c30c47bc6a1d19d92">FontinfoId</a> = Config-&gt;<a class="code" href="a00348.html#a76b02dedaede2e6e34653155be6f8c7b">FontinfoId</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Free memory associated with temporary config (since ADAPTED_CONFIG</span></div>
<div class="line">  <span class="comment">// is a union we need to clean up before we record permanent config).</span></div>
<div class="line">  ProtoKey.<a class="code" href="a00270.html#a88e8ec3116b1ca5e8c0a57a2236f83ed">Templates</a> = Templates;</div>
<div class="line">  ProtoKey.<a class="code" href="a00270.html#a45ade2ad8d07fe98968e6a6795680f0a">ClassId</a> = ClassId;</div>
<div class="line">  ProtoKey.<a class="code" href="a00270.html#ab4a673ae9bd6272302ea460d336bc80e">ConfigId</a> = ConfigId;</div>
<div class="line">  Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a> = <a class="code" href="a00793.html#a1fa3ecce52a0563f595b8f1428cc1211">delete_d</a>(Class-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a>, &amp;ProtoKey, <a class="code" href="a00620.html#aeb798d8e9e1be9d25261b8a604910d0d">MakeTempProtoPerm</a>);</div>
<div class="line">  <a class="code" href="a00618.html#a69bbd5a22930a7f4cc2d85f49b468b67">FreeTempConfig</a>(Config);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Record permanent config.</span></div>
<div class="line">  <a class="code" href="a00619.html#aea4d5dd0059c222f111f9537af74a325">PermConfigFor</a>(Class, ConfigId) = Perm;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Making config %d for %s (ClassId %d) permanent:&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; fontinfo id %d, ambiguities &#39;&quot;</span>,</div>
<div class="line">            ConfigId, <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(ClassId).<span class="keywordtype">string</span>(),</div>
<div class="line">            ClassId, <a class="code" href="a00619.html#aea4d5dd0059c222f111f9537af74a325">PermConfigFor</a>(Class, ConfigId)-&gt;FontinfoId);</div>
<div class="line">    <span class="keywordflow">for</span> (<a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> *AmbigsPointer = Ambigs;</div>
<div class="line">        *AmbigsPointer &gt;= 0; ++AmbigsPointer)</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(*AmbigsPointer));</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;&#39;.\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">}                              <span class="comment">/* MakePermanent */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9df3ff8623acd0ab30286ace7362045c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::MasterMatcher </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>&#160;</td>
          <td class="paramname"><em>num_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00196.html">INT_FEATURE_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>norm_factors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a1e42b7a7460500ee9e8b3d09a1f0330d">ADAPT_CLASS</a> *&#160;</td>
          <td class="paramname"><em>classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>debug</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_classes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>blob_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00658.html#aad58739a624ab51ab180aac3342c6efc">CLASS_PRUNER_RESULTS</a>&#160;</td>
          <td class="paramname"><em>results</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>final_results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Factored-out calls to <a class="el" href="a00201.html">IntegerMatcher</a> based on class pruner results. Returns integer matcher results inside CLASS_PRUNER_RESULTS structure. </p>

<p>Definition at line <a class="el" href="a00620_source.html#l01257">1257</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                           {</div>
<div class="line">  <span class="keywordtype">int</span> top = blob_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">  <span class="keywordtype">int</span> bottom = blob_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; c &lt; num_classes; c++) {</div>
<div class="line">    <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id = results[c].Class;</div>
<div class="line">    <a class="code" href="a00199.html">INT_RESULT_STRUCT</a>&amp; int_result = results[c].IMResult;</div>
<div class="line">    <a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> protos = classes != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? classes[class_id]-&gt;<a class="code" href="a00031.html#a0dd8b01d8c5cc59c77098cdb268ce1ea">PermProtos</a></div>
<div class="line">                                        : <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>;</div>
<div class="line">    <a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> configs = classes != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ? classes[class_id]-&gt;<a class="code" href="a00031.html#ad19f8e0d6520b447871c5d958b367bf4">PermConfigs</a></div>
<div class="line">                                         : <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(templates, class_id),</div>
<div class="line">              protos, configs,</div>
<div class="line">              num_features, features,</div>
<div class="line">              &amp;int_result, <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>, debug,</div>
<div class="line">              <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">    <span class="keywordtype">bool</span> debug = <a class="code" href="a00091.html#a59d2ce9a817ab97d37a459ca2459cf8e">matcher_debug_level</a> &gt;= 2 || <a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt; 1;</div>
<div class="line">    <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(classes, debug, class_id, bottom, top,</div>
<div class="line">                                    results[c].Rating,</div>
<div class="line">                                    final_results-&gt;<a class="code" href="a00032.html#a96c25b6f847b7f8ebc3817ee73f73236">BlobLength</a>, norm_factors,</div>
<div class="line">                                    int_result, final_results);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28ddc270cb5d2613f5f0f24ad53a5a21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> tesseract::Classify::NewAdaptedTemplates </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>InitFromUnicharset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates memory for adapted tempates. each char in unicharset to the newly created templates</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">InitFromUnicharset</td><td>if true, add an empty class for </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Ptr to new adapted templates.</dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Globals: none </dd>
<dd>
Exceptions: none </dd>
<dd>
History: Fri Mar 8 10:15:28 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00618_source.html#l00167">167</a> of file <a class="el" href="a00618_source.html">adaptive.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line">  <a class="code" href="a00033.html">ADAPT_TEMPLATES</a> Templates;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">  Templates = (<a class="code" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00033.html">ADAPT_TEMPLATES_STRUCT</a>));</div>
<div class="line"></div>
<div class="line">  Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a> = <a class="code" href="a00659.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a> ();</div>
<div class="line">  Templates-&gt;<a class="code" href="a00033.html#ac4e39261d76ebdd092eeb754fe1e15c3">NumPermClasses</a> = 0;</div>
<div class="line">  Templates-&gt;<a class="code" href="a00033.html#aa644a299b7046916ce731566866df325">NumNonEmptyClasses</a> = 0;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Insert an empty class for each unichar id in unicharset */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++) {</div>
<div class="line">    Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[i] = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (InitFromUnicharset &amp;&amp; i &lt; <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>()) {</div>
<div class="line">      <a class="code" href="a00618.html#a24dee29813d20462932722df976fd062">AddAdaptedClass</a>(Templates, <a class="code" href="a00618.html#ab0586da849c1ffcb5f1ba8c7de9c571a">NewAdaptedClass</a>(), i);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (Templates);</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* NewAdaptedTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8cbc3c255f888cc49c713c0a7408d2ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::NormalizeOutlines </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00407.html#aa200acf94add0e61783bfcd5965bb645">LIST</a>&#160;</td>
          <td class="paramname"><em>Outlines</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *&#160;</td>
          <td class="paramname"><em>XScale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> *&#160;</td>
          <td class="paramname"><em>YScale</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00669_source.html#l00346">346</a> of file <a class="el" href="a00669_source.html">mfoutline.cpp</a>.</p>
<div class="fragment"><div class="line">                                                  {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   Outlines  list of outlines to be normalized</span></div>
<div class="line"><span class="comment"> **   XScale    x-direction scale factor used by routine</span></div>
<div class="line"><span class="comment"> **   YScale    y-direction scale factor used by routine</span></div>
<div class="line"><span class="comment"> ** Globals:</span></div>
<div class="line"><span class="comment"> **   classify_norm_method  method being used for normalization</span></div>
<div class="line"><span class="comment"> **   classify_char_norm_range map radius of gyration to this value</span></div>
<div class="line"><span class="comment"> ** Operation: This routine normalizes every outline in Outlines</span></div>
<div class="line"><span class="comment"> **   according to the currently selected normalization method.</span></div>
<div class="line"><span class="comment"> **   It also returns the scale factors that it used to do this</span></div>
<div class="line"><span class="comment"> **   scaling.  The scale factors returned represent the x and</span></div>
<div class="line"><span class="comment"> **   y sizes in the normalized coordinate system that correspond</span></div>
<div class="line"><span class="comment"> **   to 1 pixel in the original coordinate system.</span></div>
<div class="line"><span class="comment"> ** Return: none (Outlines are changed and XScale and YScale are updated)</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Fri Dec 14 08:14:55 1990, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00221.html">MFOUTLINE</a> Outline;</div>
<div class="line">  <a class="code" href="a00245.html">OUTLINE_STATS</a> OutlineStats;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> BaselineScale;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">switch</span> (<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>) {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a>:</div>
<div class="line">      <a class="code" href="a00669.html#a84a628621cc7dc5eb36614c785a098a9">ComputeOutlineStats</a>(Outlines, &amp;OutlineStats);</div>
<div class="line"></div>
<div class="line">      <span class="comment">/* limit scale factor to avoid overscaling small blobs (.,`&#39;),</span></div>
<div class="line"><span class="comment">         thin blobs (l1ift), and merged blobs */</span></div>
<div class="line">      *XScale = *YScale = BaselineScale = <a class="code" href="a00670.html#a91645597f620e8307a65e8ab35d963b8">MF_SCALE_FACTOR</a>;</div>
<div class="line">      *XScale *= OutlineStats.<a class="code" href="a00245.html#afb6d2229fa00b3a255aa11efa7894527">Ry</a>;</div>
<div class="line">      *YScale *= OutlineStats.<a class="code" href="a00245.html#a44df0e96a471cc5e0380b52d04eec549">Rx</a>;</div>
<div class="line">      <span class="keywordflow">if</span> (*XScale &lt; <a class="code" href="a00091.html#a8ffda27cc071fa6c63c406fe9749f276">classify_min_norm_scale_x</a>)</div>
<div class="line">        *XScale = <a class="code" href="a00091.html#a8ffda27cc071fa6c63c406fe9749f276">classify_min_norm_scale_x</a>;</div>
<div class="line">      <span class="keywordflow">if</span> (*YScale &lt; <a class="code" href="a00091.html#a0d1928e7dac3c17776220d35f08a48ec">classify_min_norm_scale_y</a>)</div>
<div class="line">        *YScale = <a class="code" href="a00091.html#a0d1928e7dac3c17776220d35f08a48ec">classify_min_norm_scale_y</a>;</div>
<div class="line">      <span class="keywordflow">if</span> (*XScale &gt; <a class="code" href="a00091.html#a3f89a54fbee53fa65e3d2c2947dab449">classify_max_norm_scale_x</a> &amp;&amp;</div>
<div class="line">          *YScale &lt;= <a class="code" href="a00091.html#addf6334cb29c021e52587f20ac5b30b2">classify_max_norm_scale_y</a>)</div>
<div class="line">        *XScale = <a class="code" href="a00091.html#a3f89a54fbee53fa65e3d2c2947dab449">classify_max_norm_scale_x</a>;</div>
<div class="line">      *XScale = <a class="code" href="a00091.html#a7bef23fa815b3c02261800ca82b05911">classify_char_norm_range</a> * BaselineScale / *XScale;</div>
<div class="line">      *YScale = <a class="code" href="a00091.html#a7bef23fa815b3c02261800ca82b05911">classify_char_norm_range</a> * BaselineScale / *YScale;</div>
<div class="line"></div>
<div class="line">      <a class="code" href="a00794.html#a2cf19ba78be6b54f66823d58f34f2a53">iterate</a>(Outlines) {</div>
<div class="line">        Outline = (<a class="code" href="a00670.html#a7ccab0cdf14413921e017ad0af14e1de">MFOUTLINE</a>) <a class="code" href="a00794.html#a69547be764424f18b0be535400747978">first_node</a> (Outlines);</div>
<div class="line">        <a class="code" href="a00669.html#a5918c653f568c2a6e5aa43569c01f346">CharNormalizeOutline</a> (Outline,</div>
<div class="line">          OutlineStats.<a class="code" href="a00245.html#a2e72d57afc14290aef97b17bba52cd98">x</a>, OutlineStats.<a class="code" href="a00245.html#a27f428c88f5d21ad9125a93c30d73699">y</a>,</div>
<div class="line">          *XScale, *YScale);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>:</div>
<div class="line">      <a class="code" href="a00794.html#a2cf19ba78be6b54f66823d58f34f2a53">iterate</a>(Outlines) {</div>
<div class="line">        Outline = (<a class="code" href="a00670.html#a7ccab0cdf14413921e017ad0af14e1de">MFOUTLINE</a>) <a class="code" href="a00794.html#a69547be764424f18b0be535400747978">first_node</a>(Outlines);</div>
<div class="line">        <a class="code" href="a00669.html#a30b1492f0756c31499da0157ecba50ff">NormalizeOutline</a>(Outline, 0.0);</div>
<div class="line">      }</div>
<div class="line">      *XScale = *YScale = <a class="code" href="a00670.html#a91645597f620e8307a65e8ab35d963b8">MF_SCALE_FACTOR</a>;</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* NormalizeOutlines */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a15d6951abc586793270de0825bdb7dd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::PrintAdaptedTemplates </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine prints a summary of the adapted templates in Templates to File.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">File</td><td>open text file to print Templates to </td></tr>
    <tr><td class="paramname">Templates</td><td>adapted templates to print to File</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Globals: none </dd>
<dd>
Exceptions: none </dd>
<dd>
History: Wed Mar 20 13:35:29 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00618_source.html#l00273">273</a> of file <a class="el" href="a00618_source.html">adaptive.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                          {</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> IClass;</div>
<div class="line">  <a class="code" href="a00031.html">ADAPT_CLASS</a> AClass;</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">  #ifndef SECURE_NAMES</span></div>
<div class="line"><span class="preprocessor"></span>  fprintf (File, <span class="stringliteral">&quot;\n\nSUMMARY OF ADAPTED TEMPLATES:\n\n&quot;</span>);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;Num classes = %d;  Num permanent classes = %d\n\n&quot;</span>,</div>
<div class="line">           Templates-&gt;<a class="code" href="a00033.html#aa644a299b7046916ce731566866df325">NumNonEmptyClasses</a>, Templates-&gt;<a class="code" href="a00033.html#ac4e39261d76ebdd092eeb754fe1e15c3">NumPermClasses</a>);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;   Id  NC NPC  NP NPP\n&quot;</span>);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;------------------------\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; (Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>)-&gt;NumClasses; i++) {</div>
<div class="line">    IClass = Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[i];</div>
<div class="line">    AClass = Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[i];</div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="a00619.html#a1d2aa2b696e73525cb57373fcc5a83ae">IsEmptyAdaptedClass</a> (AClass)) {</div>
<div class="line">      fprintf (File, <span class="stringliteral">&quot;%5d  %s %3d %3d %3d %3d\n&quot;</span>,</div>
<div class="line">        i, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(i),</div>
<div class="line">      IClass-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>, AClass-&gt;<a class="code" href="a00031.html#afe5769d3f67549e0938480aab2d2b1cd">NumPermConfigs</a>,</div>
<div class="line">      IClass-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>,</div>
<div class="line">      IClass-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a> - <a class="code" href="a00793.html#acd4ea858d7133e40518e0832ff9d94b2">count</a> (AClass-&gt;<a class="code" href="a00031.html#a879b5ee2f46335fe784fd4c266f8a37c">TempProtos</a>));</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="preprocessor"></span>  fprintf (File, <span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* PrintAdaptedTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aad46f714847619694546e9ea2784402c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::PrintAdaptiveMatchResults </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine writes the matches in Results to File.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">File</td><td>open text file to write Results to </td></tr>
    <tr><td class="paramname">Results</td><td>match results to write to File</td></tr>
  </table>
  </dd>
</dl>
<p>Globals: none</p>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Mon Mar 18 09:24:53 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02424">2424</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                           {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; ++i) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;%s(%d), shape %d, %.2f  &quot;</span>,</div>
<div class="line">            <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a2543f3cb2b8da0160a87088940cc58d2">debug_str</a>(Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>).<a class="code" href="a00319.html#a32beee43ecab1bed8bebc3466896ad6e">string</a>(),</div>
<div class="line">            Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>, Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#ab3db24ffe2690f52d86053ba1f631520">shape_id</a>,</div>
<div class="line">            Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[i].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> * 100.0);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">}                              <span class="comment">/* PrintAdaptiveMatchResults */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8c350afec3f633660d20eb98226a40d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::PrintAdaptiveStatistics </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Print to File the statistics which have been gathered for the adaptive matcher.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">File</td><td>open text file to print adaptive statistics to</td></tr>
  </table>
  </dd>
</dl>
<p>Globals: none</p>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Thu Apr 18 14:37:37 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00659">659</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line"><span class="preprocessor">  #ifndef SECURE_NAMES</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\nADAPTIVE MATCHER STATISTICS:\n&quot;</span>);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\tNum blobs classified = %d\n&quot;</span>, AdaptiveMatcherCalls);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\tNum classes output   = %d (Avg = %4.2f)\n&quot;</span>,</div>
<div class="line">    NumClassesOutput,</div>
<div class="line">    ((AdaptiveMatcherCalls == 0) ? (0.0) :</div>
<div class="line">  ((<span class="keywordtype">float</span>) NumClassesOutput / AdaptiveMatcherCalls)));</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\t\tBaseline Classifier: %4d calls (%4.2f classes/call)\n&quot;</span>,</div>
<div class="line">    BaselineClassifierCalls,</div>
<div class="line">    ((BaselineClassifierCalls == 0) ? (0.0) :</div>
<div class="line">  ((<span class="keywordtype">float</span>) NumBaselineClassesTried / BaselineClassifierCalls)));</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\t\tCharNorm Classifier: %4d calls (%4.2f classes/call)\n&quot;</span>,</div>
<div class="line">    CharNormClassifierCalls,</div>
<div class="line">    ((CharNormClassifierCalls == 0) ? (0.0) :</div>
<div class="line">  ((<span class="keywordtype">float</span>) NumCharNormClassesTried / CharNormClassifierCalls)));</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\t\tAmbig    Classifier: %4d calls (%4.2f classes/call)\n&quot;</span>,</div>
<div class="line">    AmbigClassifierCalls,</div>
<div class="line">    ((AmbigClassifierCalls == 0) ? (0.0) :</div>
<div class="line">  ((<span class="keywordtype">float</span>) NumAmbigClassesTried / AmbigClassifierCalls)));</div>
<div class="line"></div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\nADAPTIVE LEARNER STATISTICS:\n&quot;</span>);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\tNumber of words adapted to: %d\n&quot;</span>, NumWordsAdaptedTo);</div>
<div class="line">  fprintf (File, <span class="stringliteral">&quot;\tNumber of chars adapted to: %d\n&quot;</span>, NumCharsAdaptedTo);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a15d6951abc586793270de0825bdb7dd7">PrintAdaptedTemplates</a>(File, <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line"><span class="preprocessor">  #endif</span></div>
<div class="line"><span class="preprocessor"></span>}                                <span class="comment">/* PrintAdaptiveStatistics */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af60b52006bbea0cc1727d543c3fcd1ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::PruneClasses </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00200.html">INT_TEMPLATES_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>int_templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00196.html">INT_FEATURE_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>normalization_factors</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a> *&#160;</td>
          <td class="paramname"><em>expected_num_features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00108.html">CP_RESULT_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00657_source.html#l00406">406</a> of file <a class="el" href="a00657_source.html">intmatcher.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **  Operation:</span></div>
<div class="line"><span class="comment"> **    Prunes the classes using a modified fast match table.</span></div>
<div class="line"><span class="comment"> **    Returns a sorted list of classes along with the number</span></div>
<div class="line"><span class="comment"> **      of pruned classes in that list.</span></div>
<div class="line"><span class="comment"> **  Return: Number of pruned classes.</span></div>
<div class="line"><span class="comment"> **  Exceptions: none</span></div>
<div class="line"><span class="comment"> **  History: Tue Feb 19 10:24:24 MST 1991, RWM, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  ClassPruner pruner(int_templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">  <span class="comment">// Compute initial match scores for all classes.</span></div>
<div class="line">  pruner.ComputeScores(int_templates, num_features, features);</div>
<div class="line">  <span class="comment">// Adjust match scores for number of expected features.</span></div>
<div class="line">  pruner.AdjustForExpectedNumFeatures(expected_num_features,</div>
<div class="line">                                      <a class="code" href="a00091.html#a2f3faf7d282a1b58b10b3866693a4f08">classify_cp_cutoff_strength</a>);</div>
<div class="line">  <span class="comment">// Apply disabled classes in unicharset - only works without a shape_table.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    pruner.DisableDisabledClasses(<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);</div>
<div class="line">  <span class="comment">// If fragments are disabled, remove them, also only without a shape table.</span></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#ab9c25bf0ebc01c57728e19b2bbc980ef">disable_character_fragments</a> &amp;&amp; <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    pruner.DisableFragments(<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// If we have good x-heights, apply the given normalization factors.</span></div>
<div class="line">  <span class="keywordflow">if</span> (normalization_factors != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    pruner.NormalizeForXheight(<a class="code" href="a00091.html#a406c1644ce61dfb376ae9975f89c54ba">classify_class_pruner_multiplier</a>,</div>
<div class="line">                               normalization_factors);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    pruner.NoNormalization();</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Do the actual pruning and sort the short-list.</span></div>
<div class="line">  pruner.PruneAndSort(<a class="code" href="a00091.html#a6e0102d0d21b6151893a199cc84a6e93">classify_class_pruner_threshold</a>,</div>
<div class="line">                      <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt; 2) {</div>
<div class="line">    pruner.DebugMatch(*<span class="keyword">this</span>, int_templates, features);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a0f934f0b39cb869d2a4973269fb696cf">classify_debug_level</a> &gt; 1) {</div>
<div class="line">    pruner.SummarizeResult(*<span class="keyword">this</span>, int_templates, expected_num_features,</div>
<div class="line">                           <a class="code" href="a00091.html#a406c1644ce61dfb376ae9975f89c54ba">classify_class_pruner_multiplier</a>,</div>
<div class="line">                           normalization_factors);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Convert to the expected output format.</span></div>
<div class="line">  <span class="keywordflow">return</span> pruner.SetupResults(results);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa74ebd96d85efc39d71c37985e50c8aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> tesseract::Classify::ReadAdaptedTemplates </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a set of adapted templates from File and return a ptr to the templates.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">File</td><td>open text file to read adapted templates from </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Ptr to adapted templates read from File.</dd></dl>
<dl class="section note"><dt>Note:</dt><dd>Globals: none </dd>
<dd>
Exceptions: none </dd>
<dd>
History: Mon Mar 18 15:18:10 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00618_source.html#l00371">371</a> of file <a class="el" href="a00618_source.html">adaptive.cpp</a>.</p>
<div class="fragment"><div class="line">                                                         {</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <a class="code" href="a00033.html">ADAPT_TEMPLATES</a> Templates;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* first read the high level adaptive template struct */</span></div>
<div class="line">  Templates = (<a class="code" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00033.html">ADAPT_TEMPLATES_STRUCT</a>));</div>
<div class="line">  fread ((<span class="keywordtype">char</span> *) Templates, <span class="keyword">sizeof</span> (<a class="code" href="a00033.html">ADAPT_TEMPLATES_STRUCT</a>), 1, File);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then read in the basic integer templates */</span></div>
<div class="line">  Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a> = <a class="code" href="a00091.html#a98459996e5e6ab1dc1de71411fd32b89">ReadIntTemplates</a> (File);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then read in the adaptive info for each class */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; (Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>)-&gt;NumClasses; i++) {</div>
<div class="line">    Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[i] = <a class="code" href="a00618.html#a0319827551564cc4815347fafb12ebc6">ReadAdaptedClass</a> (File);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (Templates);</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* ReadAdaptedTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3cc9d5fe19f6d641fdfb133179ea70a4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ReadClassFile </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00683_source.html#l00293">293</a> of file <a class="el" href="a00683_source.html">protos.cpp</a>.</p>
<div class="fragment"><div class="line">                             {</div>
<div class="line"> FILE *File;</div>
<div class="line"> <span class="keywordtype">char</span> TextLine[<a class="code" href="a00777.html#accaf8215779c8836f3f25f722e77550e">CHARS_PER_LINE</a>];</div>
<div class="line"> <span class="keywordtype">char</span> unichar[<a class="code" href="a00777.html#accaf8215779c8836f3f25f722e77550e">CHARS_PER_LINE</a>];</div>
<div class="line"></div>
<div class="line"> <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Reading training data from &#39;%s&#39; ...&quot;</span>,</div>
<div class="line">          static_cast&lt;STRING&gt;(<a class="code" href="a00683.html#abdf276348661f25846b3638c463ca932">classify_training_file</a>).<span class="keywordtype">string</span>());</div>
<div class="line"> fflush(stdout);</div>
<div class="line"></div>
<div class="line"> File = <a class="code" href="a00776.html#ae3226f9d05617de0b7174bc7b7fce5b6">open_file</a>(static_cast&lt;STRING&gt;(<a class="code" href="a00683.html#abdf276348661f25846b3638c463ca932">classify_training_file</a>).<span class="keywordtype">string</span>(), <span class="stringliteral">&quot;r&quot;</span>);</div>
<div class="line"> <span class="keywordflow">while</span> (fgets (TextLine, <a class="code" href="a00777.html#accaf8215779c8836f3f25f722e77550e">CHARS_PER_LINE</a>, File) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"></div>
<div class="line">   sscanf(TextLine, <span class="stringliteral">&quot;%s&quot;</span>, unichar);</div>
<div class="line">   <a class="code" href="a00683.html#a46b69bc764f35e3e56c3a429cab6a4b6">ReadClassFromFile</a> (File, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar));</div>
<div class="line">   fgets(TextLine, <a class="code" href="a00777.html#accaf8215779c8836f3f25f722e77550e">CHARS_PER_LINE</a>, File);</div>
<div class="line">   fgets(TextLine, <a class="code" href="a00777.html#accaf8215779c8836f3f25f722e77550e">CHARS_PER_LINE</a>, File);</div>
<div class="line"> }</div>
<div class="line"> fclose(File);</div>
<div class="line"> <a class="code" href="a00777.html#a1185f064cc7bdd3f2a433da85a834c37">new_line</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a98459996e5e6ab1dc1de71411fd32b89"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> tesseract::Classify::ReadIntTemplates </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l00786">786</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                                   {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   File    open file to read templates from</span></div>
<div class="line"><span class="comment"> ** Globals: none</span></div>
<div class="line"><span class="comment"> ** Operation: This routine reads a set of integer templates from</span></div>
<div class="line"><span class="comment"> **   File.  File must already be open and must be in the</span></div>
<div class="line"><span class="comment"> **   correct binary format.</span></div>
<div class="line"><span class="comment"> ** Return: Pointer to integer templates read from File.</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Wed Feb 27 11:48:46 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <span class="keywordtype">int</span> i, j, w, x, y, z;</div>
<div class="line">  <a class="code" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> swap;</div>
<div class="line">  <span class="keywordtype">int</span> nread;</div>
<div class="line">  <span class="keywordtype">int</span> unicharset_size;</div>
<div class="line">  <span class="keywordtype">int</span> version_id = 0;</div>
<div class="line">  <a class="code" href="a00200.html">INT_TEMPLATES</a> Templates;</div>
<div class="line">  <a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>* Pruner;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> Class;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *Lengths;</div>
<div class="line">  <a class="code" href="a00271.html">PROTO_SET</a> ProtoSet;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* variables for conversion from older inttemp formats */</span></div>
<div class="line">  <span class="keywordtype">int</span> b, bit_number, last_cp_bit_number, new_b, new_i, new_w;</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> class_id, max_class_id;</div>
<div class="line">  <a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a> *IndexFor = <span class="keyword">new</span> <a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> *ClassIdFor = <span class="keyword">new</span> <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line">  <a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a> **TempClassPruner =</div>
<div class="line">      <span class="keyword">new</span> <a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>*[<a class="code" href="a00660.html#aab6762087ba3ad713e2d76c3b19de53c">MAX_NUM_CLASS_PRUNERS</a>];</div>
<div class="line">  <a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> SetBitsForMask =           <span class="comment">// word with NUM_BITS_PER_CLASS</span></div>
<div class="line">    (1 &lt;&lt; <a class="code" href="a00660.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>) - 1;  <span class="comment">// set starting at bit 0</span></div>
<div class="line">  <a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> Mask, NewMask, ClassBits;</div>
<div class="line">  <span class="keywordtype">int</span> MaxNumConfigs = <a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>;</div>
<div class="line">  <span class="keywordtype">int</span> WerdsPerConfigVec = <a class="code" href="a00660.html#a884e587328e6d76dfc5e2abe80b9120a">WERDS_PER_CONFIG_VEC</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* first read the high level template struct */</span></div>
<div class="line">  Templates = <a class="code" href="a00659.html#a020880b72d2d68c69edba44494fce647">NewIntTemplates</a>();</div>
<div class="line">  <span class="comment">// Read Templates in parts for 64 bit compatibility.</span></div>
<div class="line">  <span class="keywordflow">if</span> (fread(&amp;unicharset_size, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File) != 1)</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (fread(&amp;Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>,</div>
<div class="line">            <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>), 1, File) != 1 ||</div>
<div class="line">      fread(&amp;Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>,</div>
<div class="line">            <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>), 1, File) != 1)</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">  <span class="comment">// Swap status is determined automatically.</span></div>
<div class="line">  swap = Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a> &lt; 0 ||</div>
<div class="line">    Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a> &gt; <a class="code" href="a00660.html#aab6762087ba3ad713e2d76c3b19de53c">MAX_NUM_CLASS_PRUNERS</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (swap) {</div>
<div class="line">    <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>);</div>
<div class="line">    <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">    <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;unicharset_size);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> &lt; 0) {</div>
<div class="line">    <span class="comment">// This file has a version id!</span></div>
<div class="line">    version_id = -Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (fread(&amp;Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>),</div>
<div class="line">              1, File) != 1)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (swap)</div>
<div class="line">      <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (version_id &lt; 3) {</div>
<div class="line">    MaxNumConfigs = <a class="code" href="a00659.html#a140c8d6cda6a254c6bf42e7caa0390fc">OLD_MAX_NUM_CONFIGS</a>;</div>
<div class="line">    WerdsPerConfigVec = <a class="code" href="a00659.html#aed02bb4e2adadad4fad1e2fc91e4643d">OLD_WERDS_PER_CONFIG_VEC</a>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (version_id &lt; 2) {</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; unicharset_size; ++i) {</div>
<div class="line">      <span class="keywordflow">if</span> (fread(&amp;IndexFor[i], <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a8d41499d38c24d39b221ab0c158fe5a8">inT16</a>), 1, File) != 1)</div>
<div class="line">        <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; ++i) {</div>
<div class="line">      <span class="keywordflow">if</span> (fread(&amp;ClassIdFor[i], <span class="keyword">sizeof</span>(<a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>), 1, File) != 1)</div>
<div class="line">        <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (swap) {</div>
<div class="line">      <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)</div>
<div class="line">        <a class="code" href="a00576.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;IndexFor[i]);</div>
<div class="line">      <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)</div>
<div class="line">        <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ClassIdFor[i]);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then read in the class pruners */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {</div>
<div class="line">    Pruner = <span class="keyword">new</span> <a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>;</div>
<div class="line">    <span class="keywordflow">if</span> ((nread =</div>
<div class="line">         fread(Pruner, 1, <span class="keyword">sizeof</span>(<a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>),</div>
<div class="line">                File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>))</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (swap) {</div>
<div class="line">      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; x++) {</div>
<div class="line">        <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; y++) {</div>
<div class="line">          <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; z++) {</div>
<div class="line">            <span class="keywordflow">for</span> (w = 0; w &lt; <a class="code" href="a00660.html#ab1e3efe229080aaa98b0df47adf46666">WERDS_PER_CP_VECTOR</a>; w++) {</div>
<div class="line">              <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Pruner-&gt;<a class="code" href="a00089.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][w]);</div>
<div class="line">            }</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (version_id &lt; 2) {</div>
<div class="line">      TempClassPruner[i] = Pruner;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i] = Pruner;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* fix class pruners if they came from an old version of inttemp */</span></div>
<div class="line">  <span class="keywordflow">if</span> (version_id &lt; 2) {</div>
<div class="line">    <span class="comment">// Allocate enough class pruners to cover all the class ids.</span></div>
<div class="line">    max_class_id = 0;</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++)</div>
<div class="line">      <span class="keywordflow">if</span> (ClassIdFor[i] &gt; max_class_id)</div>
<div class="line">        max_class_id = ClassIdFor[i];</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt;= <a class="code" href="a00660.html#a9e1bd1cdfd022a108d578009fe49ec51">CPrunerIdFor</a>(max_class_id); i++) {</div>
<div class="line">      Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i] = <span class="keyword">new</span> <a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>;</div>
<div class="line">      memset(Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i], 0, <span class="keyword">sizeof</span>(<a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>));</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Convert class pruners from the old format (indexed by class index)</span></div>
<div class="line">    <span class="comment">// to the new format (indexed by class id).</span></div>
<div class="line">    last_cp_bit_number = <a class="code" href="a00660.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a> * Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> - 1;</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {</div>
<div class="line">      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; x++)</div>
<div class="line">        <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; y++)</div>
<div class="line">          <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="a00660.html#aa675c40a77644a629ba6dd651e1befd5">NUM_CP_BUCKETS</a>; z++)</div>
<div class="line">            <span class="keywordflow">for</span> (w = 0; w &lt; <a class="code" href="a00660.html#ab1e3efe229080aaa98b0df47adf46666">WERDS_PER_CP_VECTOR</a>; w++) {</div>
<div class="line">              <span class="keywordflow">if</span> (TempClassPruner[i]-&gt;p[x][y][z][w] == 0)</div>
<div class="line">                <span class="keywordflow">continue</span>;</div>
<div class="line">              <span class="keywordflow">for</span> (b = 0; b &lt; <a class="code" href="a00660.html#a65e33e9e10361d8dc9c7760ee256beac">BITS_PER_WERD</a>; b += <a class="code" href="a00660.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>) {</div>
<div class="line">                bit_number = i * <a class="code" href="a00660.html#a0f9366ce0f73b02b2e9bc07a42cb0a00">BITS_PER_CP_VECTOR</a> + w * BITS_PER_WERD + b;</div>
<div class="line">                <span class="keywordflow">if</span> (bit_number &gt; last_cp_bit_number)</div>
<div class="line">                  <span class="keywordflow">break</span>; <span class="comment">// the rest of the bits in this word are not used</span></div>
<div class="line">                class_id = ClassIdFor[bit_number / <a class="code" href="a00660.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>];</div>
<div class="line">                <span class="comment">// Single out NUM_BITS_PER_CLASS bits relating to class_id.</span></div>
<div class="line">                Mask = SetBitsForMask &lt;&lt; b;</div>
<div class="line">                ClassBits = TempClassPruner[i]-&gt;<a class="code" href="a00089.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][w] &amp; Mask;</div>
<div class="line">                <span class="comment">// Move these bits to the new position in which they should</span></div>
<div class="line">                <span class="comment">// appear (indexed corresponding to the class_id).</span></div>
<div class="line">                new_i = <a class="code" href="a00660.html#a9e1bd1cdfd022a108d578009fe49ec51">CPrunerIdFor</a>(class_id);</div>
<div class="line">                new_w = <a class="code" href="a00660.html#a99d69701db6f22923e8c4027000f1bd7">CPrunerWordIndexFor</a>(class_id);</div>
<div class="line">                new_b = <a class="code" href="a00660.html#aa49eb773d3e7ef52fd291fcfb1464a83">CPrunerBitIndexFor</a>(class_id) * <a class="code" href="a00660.html#ae803270a6532aba72c1a20bacbf4594e">NUM_BITS_PER_CLASS</a>;</div>
<div class="line">                <span class="keywordflow">if</span> (new_b &gt; b) {</div>
<div class="line">                  ClassBits &lt;&lt;= (new_b - b);</div>
<div class="line">                } <span class="keywordflow">else</span> {</div>
<div class="line">                  ClassBits &gt;&gt;= (b - new_b);</div>
<div class="line">                }</div>
<div class="line">                <span class="comment">// Copy bits relating to class_id to the correct position</span></div>
<div class="line">                <span class="comment">// in Templates-&gt;ClassPruner.</span></div>
<div class="line">                NewMask = SetBitsForMask &lt;&lt; new_b;</div>
<div class="line">                Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[new_i]-&gt;<a class="code" href="a00089.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][new_w] &amp;= ~NewMask;</div>
<div class="line">                Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[new_i]-&gt;<a class="code" href="a00089.html#a4f3da8d4ff4a13f77982c919e20d279a">p</a>[x][y][z][new_w] |= ClassBits;</div>
<div class="line">              }</div>
<div class="line">            }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++) {</div>
<div class="line">      <span class="keyword">delete</span> TempClassPruner[i];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then read in each class */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++) {</div>
<div class="line">    <span class="comment">/* first read in the high level struct for the class */</span></div>
<div class="line">    Class = (<a class="code" href="a00660.html#a8c3e30dcc19d515ce47bc6db3b02cf84">INT_CLASS</a>) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00195.html">INT_CLASS_STRUCT</a>));</div>
<div class="line">    <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>), 1, File) != 1 ||</div>
<div class="line">        fread(&amp;Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>), 1, File) != 1 ||</div>
<div class="line">        fread(&amp;Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>), 1, File) != 1)</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (version_id == 0) {</div>
<div class="line">      <span class="comment">// Only version 0 writes 5 pointless pointers to the file.</span></div>
<div class="line">      <span class="keywordflow">for</span> (j = 0; j &lt; 5; ++j) {</div>
<div class="line">        <span class="keywordtype">int</span> junk;</div>
<div class="line">        <span class="keywordflow">if</span> (fread(&amp;junk, <span class="keyword">sizeof</span>(junk), 1, File) != 1)</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (version_id &lt; 4) {</div>
<div class="line">      <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; ++j) {</div>
<div class="line">        <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="a00195.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File) != 1)</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (swap) {</div>
<div class="line">        <a class="code" href="a00576.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>);</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; j++)</div>
<div class="line">          <a class="code" href="a00576.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="a00195.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j]);</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> &lt; MaxNumConfigs);</div>
<div class="line">      <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>; ++j) {</div>
<div class="line">        <span class="keywordflow">if</span> (fread(&amp;Class-&gt;<a class="code" href="a00195.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File) != 1)</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (swap) {</div>
<div class="line">        <a class="code" href="a00576.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>);</div>
<div class="line">        <span class="keywordflow">for</span> (j = 0; j &lt; MaxNumConfigs; j++)</div>
<div class="line">          <a class="code" href="a00576.html#a3c77aeb5931af9236d1d7fdecf7129be">Reverse16</a>(&amp;Class-&gt;<a class="code" href="a00195.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j]);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (version_id &lt; 2) {</div>
<div class="line">      <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, ClassIdFor[i]) = Class;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) = Class;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* then read in the proto lengths */</span></div>
<div class="line">    Lengths = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) &gt; 0) {</div>
<div class="line">      Lengths = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *)<a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) * <a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class));</div>
<div class="line">      <span class="keywordflow">if</span> ((nread =</div>
<div class="line">           fread((<span class="keywordtype">char</span> *)Lengths, <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>),</div>
<div class="line">                 <a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a>(Class), File)) != <a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class))</div>
<div class="line">        <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    Class-&gt;<a class="code" href="a00195.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a> = Lengths;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* then read in the proto sets */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; j++) {</div>
<div class="line">      ProtoSet = (<a class="code" href="a00660.html#a75a17f28eba3fb341330351ef2ee9d87">PROTO_SET</a>)<a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a>(<span class="keyword">sizeof</span>(<a class="code" href="a00271.html">PROTO_SET_STRUCT</a>));</div>
<div class="line">      <span class="keywordflow">if</span> (version_id &lt; 3) {</div>
<div class="line">        <span class="keywordflow">if</span> ((nread =</div>
<div class="line">             fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>, 1,</div>
<div class="line">                    <span class="keyword">sizeof</span>(<a class="code" href="a00660.html#a2881fe4fb9235ee1ce2f53ed52b5444c">PROTO_PRUNER</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00660.html#a2881fe4fb9235ee1ce2f53ed52b5444c">PROTO_PRUNER</a>))</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="a00660.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a>; x++) {</div>
<div class="line">          <span class="keywordflow">if</span> ((nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#a1a04b5d1566d1ec88d99da275208f064">A</a>, 1,</div>
<div class="line">                             <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) ||</div>
<div class="line">              (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#ae3a26a69bb3e3dcc7138fa036d3cb9e8">B</a>, 1,</div>
<div class="line">                             <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ||</div>
<div class="line">              (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#af1c3246d7de60562deed8d58d292bb01">C</a>, 1,</div>
<div class="line">                             <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) ||</div>
<div class="line">              (nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#a3595512379d43a12f92efef287db17d9">Angle</a>, 1,</div>
<div class="line">                             <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>))</div>
<div class="line">            <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">          <span class="keywordflow">for</span> (y = 0; y &lt; WerdsPerConfigVec; y++)</div>
<div class="line">            <span class="keywordflow">if</span> ((nread = fread((<span class="keywordtype">char</span> *) &amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>[y], 1,</div>
<div class="line">                               <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a>), File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a>))</div>
<div class="line">              <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">        }</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> ((nread =</div>
<div class="line">             fread((<span class="keywordtype">char</span> *) ProtoSet, 1, <span class="keyword">sizeof</span>(<a class="code" href="a00271.html">PROTO_SET_STRUCT</a>),</div>
<div class="line">                   File)) != <span class="keyword">sizeof</span>(<a class="code" href="a00271.html">PROTO_SET_STRUCT</a>))</div>
<div class="line">          <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Bad read of inttemp!\n&quot;</span>);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (swap) {</div>
<div class="line">        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="a00660.html#a27a551120dac583bcc4134580a447768">NUM_PP_PARAMS</a>; x++)</div>
<div class="line">          <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="a00660.html#adeffbbd837fc18e8812f77c58469444b">NUM_PP_BUCKETS</a>; y++)</div>
<div class="line">            <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="a00660.html#a56d28cb646571fa14db5eb2ced4a5302">WERDS_PER_PP_VECTOR</a>; z++)</div>
<div class="line">              <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ProtoSet-&gt;<a class="code" href="a00271.html#a6c4fddbacb407bdda234dfe3d1835df4">ProtoPruner</a>[x][y][z]);</div>
<div class="line">        <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="a00660.html#ac6c8bf8f6110ef3cfc4bcd13d52c475c">PROTOS_PER_PROTO_SET</a>; x++)</div>
<div class="line">          <span class="keywordflow">for</span> (y = 0; y &lt; WerdsPerConfigVec; y++)</div>
<div class="line">            <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;ProtoSet-&gt;<a class="code" href="a00271.html#aec92455cfcae19d9a7278ab3e8733d11">Protos</a>[x].<a class="code" href="a00198.html#a897689cf42ad3255533f8d26f5fb4eb8">Configs</a>[y]);</div>
<div class="line">      }</div>
<div class="line">      Class-&gt;<a class="code" href="a00195.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[j] = ProtoSet;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (version_id &lt; 4)</div>
<div class="line">      Class-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a> = -1;</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      fread(&amp;Class-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File);</div>
<div class="line">      <span class="keywordflow">if</span> (swap)</div>
<div class="line">        <a class="code" href="a00576.html#a7bb3b6a97c833fe8630a7b129917b985">Reverse32</a>(&amp;Class-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (version_id &lt; 2) {</div>
<div class="line">    <span class="comment">/* add an empty NULL class with class id 0 */</span></div>
<div class="line">    assert(<a class="code" href="a00660.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a> (Templates, 0));</div>
<div class="line">    <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, 0) = <a class="code" href="a00659.html#af77150e8523be2b3f6449e194eb55e7b">NewIntClass</a> (1, 1);</div>
<div class="line">    <a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, 0)-&gt;font_set_id = -1;</div>
<div class="line">    Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>++;</div>
<div class="line">    <span class="comment">/* make sure the classes are contiguous */</span></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++) {</div>
<div class="line">      <span class="keywordflow">if</span> (i &lt; Templates-&gt;NumClasses) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">          fprintf(stderr, <span class="stringliteral">&quot;Non-contiguous class ids in inttemp\n&quot;</span>);</div>
<div class="line">          exit(1);</div>
<div class="line">        }</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (Templates, i) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">          fprintf(stderr, <span class="stringliteral">&quot;Class id %d exceeds NumClassesIn (Templates) %d\n&quot;</span>,</div>
<div class="line">                  i, Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>);</div>
<div class="line">          exit(1);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (version_id &gt;= 4) {</div>
<div class="line">    this-&gt;<a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File, <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a4a8355da6e96695bb003d778da05a95b">read_info</a>), swap);</div>
<div class="line">    <span class="keywordflow">if</span> (version_id &gt;= 5) {</div>
<div class="line">      this-&gt;<a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File,</div>
<div class="line">                                 <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a8643fbecc8aa5b606e53a534ad14d491">read_spacing_info</a>),</div>
<div class="line">                                 swap);</div>
<div class="line">    }</div>
<div class="line">    this-&gt;<a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a31e2edb3f92024b211332a850723d237" title="swap is used to switch the endianness.">read</a>(File, <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a718a9f9121464dbaa6ef73c5f9dc6d5e">read_set</a>), swap);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Clean up.</span></div>
<div class="line">  <span class="keyword">delete</span>[] IndexFor;</div>
<div class="line">  <span class="keyword">delete</span>[] ClassIdFor;</div>
<div class="line">  <span class="keyword">delete</span>[] TempClassPruner;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> (Templates);</div>
<div class="line">}                                <span class="comment">/* ReadIntTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a49a37c1ce02f5e114f0d57e49871b802"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ReadNewCutoffs </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>CutoffFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>swap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#ac53c9cafaf7fe16f985994c49f6b0964">inT64</a>&#160;</td>
          <td class="paramname"><em>end_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00633.html#a5f54131664d48951e46f5e4952350582">CLASS_CUTOFF_ARRAY</a>&#160;</td>
          <td class="paramname"><em>Cutoffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00632_source.html#l00042">42</a> of file <a class="el" href="a00632_source.html">cutoffs.cpp</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **     Parameters:</span></div>
<div class="line"><span class="comment"> **             Filename        name of file containing cutoff definitions</span></div>
<div class="line"><span class="comment"> **             Cutoffs         array to put cutoffs into</span></div>
<div class="line"><span class="comment"> **     Globals: none</span></div>
<div class="line"><span class="comment"> **     Operation: Open Filename, read in all of the class-id/cutoff pairs</span></div>
<div class="line"><span class="comment"> **             and insert them into the Cutoffs array.  Cutoffs are</span></div>
<div class="line"><span class="comment"> **             indexed in the array by class id.  Unused entries in the</span></div>
<div class="line"><span class="comment"> **             array are set to an arbitrarily high cutoff value.</span></div>
<div class="line"><span class="comment"> **     Return: none</span></div>
<div class="line"><span class="comment"> **     Exceptions: none</span></div>
<div class="line"><span class="comment"> **     History: Wed Feb 20 09:38:26 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <span class="keywordtype">char</span> Class[<a class="code" href="a00610.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 1];</div>
<div class="line">  <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ClassId;</div>
<div class="line">  <span class="keywordtype">int</span> Cutoff;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (!shapetable_cutoffs_.<a class="code" href="a00175.html#aa4f5b1bc0d044fbd1fc77363b798c39c">DeSerialize</a>(swap, CutoffFile)) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Error during read of shapetable pffmtable!\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>; i++)</div>
<div class="line">    Cutoffs[i] = <a class="code" href="a00632.html#a5243f4a6e700ddc871cc53130efbea1b">MAX_CUTOFF</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> ((end_offset &lt; 0 || ftell(CutoffFile) &lt; end_offset) &amp;&amp;</div>
<div class="line">         fscanf(CutoffFile, <span class="stringliteral">&quot;%&quot;</span> <a class="code" href="a00632.html#a4eb176890e7426e710ac2670a66394d7">REALLY_QUOTE_IT</a>(<a class="code" href="a00610.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a>) <span class="stringliteral">&quot;s %d&quot;</span>,</div>
<div class="line">                Class, &amp;Cutoff) == 2) {</div>
<div class="line">    <span class="keywordflow">if</span> (strcmp(Class, <span class="stringliteral">&quot;NULL&quot;</span>) == 0) {</div>
<div class="line">      ClassId = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(<span class="stringliteral">&quot; &quot;</span>);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      ClassId = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(Class);</div>
<div class="line">    }</div>
<div class="line">    Cutoffs[ClassId] = Cutoff;</div>
<div class="line">    <a class="code" href="a00576.html#a2ddd0a4cdfa269201be6c7716ae94b0a">SkipNewline</a>(CutoffFile);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* ReadNewCutoffs */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aabd742c09ff530922005e015a9e8bc2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00240.html">NORM_PROTOS</a> * tesseract::Classify::ReadNormProtos </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#ac53c9cafaf7fe16f985994c49f6b0964">inT64</a>&#160;</td>
          <td class="paramname"><em>end_offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00675_source.html#l00230">230</a> of file <a class="el" href="a00675_source.html">normmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> **     Parameters:</span></div>
<div class="line"><span class="comment"> **             File    open text file to read normalization protos from</span></div>
<div class="line"><span class="comment"> **     Globals: none</span></div>
<div class="line"><span class="comment"> **     Operation: This routine allocates a new data structure to hold</span></div>
<div class="line"><span class="comment"> **             a set of character normalization protos.  It then fills in</span></div>
<div class="line"><span class="comment"> **             the data structure by reading from the specified File.</span></div>
<div class="line"><span class="comment"> **     Return: Character normalization protos.</span></div>
<div class="line"><span class="comment"> **     Exceptions: none</span></div>
<div class="line"><span class="comment"> **     History: Wed Dec 19 16:38:49 1990, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00240.html">NORM_PROTOS</a> *<a class="code" href="a00091.html#ad4c94be5d5738afb4115a12cad2e3efa">NormProtos</a>;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line">  <span class="keywordtype">char</span> unichar[2 * <a class="code" href="a00610.html#a902bc40c9d89802bc063afe30ce9e708">UNICHAR_LEN</a> + 1];</div>
<div class="line">  <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id;</div>
<div class="line">  <a class="code" href="a00221.html">LIST</a> Protos;</div>
<div class="line">  <span class="keywordtype">int</span> NumProtos;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* allocate and initialization data structure */</span></div>
<div class="line">  NormProtos = (<a class="code" href="a00240.html">NORM_PROTOS</a> *) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (<span class="keyword">sizeof</span> (<a class="code" href="a00240.html">NORM_PROTOS</a>));</div>
<div class="line">  NormProtos-&gt;<a class="code" href="a00240.html#a5fb6b18adc50b9ab250cad15f26450b2">NumProtos</a> = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>();</div>
<div class="line">  NormProtos-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a> = (<a class="code" href="a00221.html">LIST</a> *) <a class="code" href="a00784.html#a55f2088f1a7b3333bb5c7275ab726bba">Emalloc</a> (NormProtos-&gt;<a class="code" href="a00240.html#a5fb6b18adc50b9ab250cad15f26450b2">NumProtos</a> * <span class="keyword">sizeof</span>(<a class="code" href="a00221.html">LIST</a>));</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; NormProtos-&gt;<a class="code" href="a00240.html#a5fb6b18adc50b9ab250cad15f26450b2">NumProtos</a>; i++)</div>
<div class="line">    NormProtos-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>[i] = <a class="code" href="a00794.html#ae212530ca629c67513698e988c705a5a">NIL_LIST</a>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read file header and save in data structure */</span></div>
<div class="line">  NormProtos-&gt;<a class="code" href="a00240.html#ac21f8ddf002a7453a011d2993b48aed8">NumParams</a> = <a class="code" href="a00630.html#aa72cb3d213dfc2a7e49bc0e4df860388">ReadSampleSize</a> (File);</div>
<div class="line">  NormProtos-&gt;<a class="code" href="a00240.html#a57382d35825f360d88f32032e05239f3">ParamDesc</a> = <a class="code" href="a00630.html#ae37f86e537cc934a27b5cb8c3dfd3173">ReadParamDesc</a> (File, NormProtos-&gt;<a class="code" href="a00240.html#ac21f8ddf002a7453a011d2993b48aed8">NumParams</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* read protos for each class into a separate list */</span></div>
<div class="line">  <span class="keywordflow">while</span> ((end_offset &lt; 0 || ftell(File) &lt; end_offset) &amp;&amp;</div>
<div class="line">         fscanf(File, <span class="stringliteral">&quot;%s %d&quot;</span>, unichar, &amp;NumProtos) == 2) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(unichar)) {</div>
<div class="line">      unichar_id = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(unichar);</div>
<div class="line">      Protos = NormProtos-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>[unichar_id];</div>
<div class="line">      <span class="keywordflow">for</span> (i = 0; i &lt; NumProtos; i++)</div>
<div class="line">        Protos =</div>
<div class="line">            <a class="code" href="a00793.html#a1019c2e1108695bb4f33f83e02ee62ad">push_last</a> (Protos, <a class="code" href="a00630.html#ae695f7912de20580483721573348f10d">ReadPrototype</a> (File, NormProtos-&gt;<a class="code" href="a00240.html#ac21f8ddf002a7453a011d2993b48aed8">NumParams</a>));</div>
<div class="line">      NormProtos-&gt;<a class="code" href="a00240.html#ada1e6e21410af2577e978c63d0517f26">Protos</a>[unichar_id] = Protos;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Error: unichar %s in normproto file is not in unichar set.\n&quot;</span>,</div>
<div class="line">              unichar);</div>
<div class="line">      <span class="keywordflow">for</span> (i = 0; i &lt; NumProtos; i++)</div>
<div class="line">        <a class="code" href="a00628.html#aa5d7083be183c7a4e2b2fa746a560a7b">FreePrototype</a>(<a class="code" href="a00630.html#ae695f7912de20580483721573348f10d">ReadPrototype</a> (File, NormProtos-&gt;<a class="code" href="a00240.html#ac21f8ddf002a7453a011d2993b48aed8">NumParams</a>));</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00576.html#a2ddd0a4cdfa269201be6c7716ae94b0a">SkipNewline</a>(File);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> (NormProtos);</div>
<div class="line">}                                <span class="comment">/* ReadNormProtos */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6e36e01c8147d95bbd64c6609e1b8f45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::RefreshDebugWindow </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> **&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>wbox</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l00228">228</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line"><span class="preprocessor">  #ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keyword">const</span> <span class="keywordtype">int</span> kSampleSpaceWidth = 500;</div>
<div class="line">  <span class="keywordflow">if</span> (*win == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    *win = <span class="keyword">new</span> <a class="code" href="a00294.html">ScrollView</a>(msg, 100, y_offset, kSampleSpaceWidth * 2, 200,</div>
<div class="line">                          kSampleSpaceWidth * 2, 200, <span class="keyword">true</span>);</div>
<div class="line">  }</div>
<div class="line">  (*win)-&gt;Clear();</div>
<div class="line">  (*win)-&gt;Pen(64, 64, 64);</div>
<div class="line">  (*win)-&gt;Line(-kSampleSpaceWidth, <a class="code" href="a00506.html#abe10ce41bf7240ae8a053dea471d6ed5">kBlnBaselineOffset</a>,</div>
<div class="line">               kSampleSpaceWidth, <a class="code" href="a00506.html#abe10ce41bf7240ae8a053dea471d6ed5">kBlnBaselineOffset</a>);</div>
<div class="line">  (*win)-&gt;Line(-kSampleSpaceWidth, <a class="code" href="a00506.html#af974e6755e636c8bc7cbe57e3bcbdd73">kBlnXHeight</a> + <a class="code" href="a00506.html#abe10ce41bf7240ae8a053dea471d6ed5">kBlnBaselineOffset</a>,</div>
<div class="line">               kSampleSpaceWidth, <a class="code" href="a00506.html#af974e6755e636c8bc7cbe57e3bcbdd73">kBlnXHeight</a> + <a class="code" href="a00506.html#abe10ce41bf7240ae8a053dea471d6ed5">kBlnBaselineOffset</a>);</div>
<div class="line">  (*win)-&gt;ZoomToRectangle(wbox.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), wbox.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),</div>
<div class="line">                          wbox.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), wbox.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());</div>
<div class="line"><span class="preprocessor">  #endif  // GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e35029ac0c77ad18d35f08c27c99d15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::RemoveBadMatches </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine steps thru each matching class in Results and removes it from the match list if its rating is worse than the BestRating plus a pad. In other words, all good matches get moved to the front of the classes array.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Results</td><td>contains matches to be filtered</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>matcher_bad_match_pad defines a "bad match"</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Mar 12 13:51:03 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02450">2450</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line">  <span class="keywordtype">int</span> Next, NextGood;</div>
<div class="line">  <a class="code" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a> BadMatchThreshold;</div>
<div class="line">  <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span>* romans = <span class="stringliteral">&quot;i v x I V X&quot;</span>;</div>
<div class="line">  BadMatchThreshold = Results-&gt;<a class="code" href="a00032.html#a7cfeae71a3b1fddd0e2dd1b369c6d15b">best_match</a>.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> + <a class="code" href="a00091.html#a10595e84248f68a98f8e73bcdb6ae89a">matcher_bad_match_pad</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a57e449d38b255fe82e61d88ded8b0020">classify_bln_numeric_mode</a>) {</div>
<div class="line">    <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id_one = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(<span class="stringliteral">&quot;1&quot;</span>) ?</div>
<div class="line">        <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(<span class="stringliteral">&quot;1&quot;</span>) : -1;</div>
<div class="line">    <a class="code" href="a00610.html#a8578b19fa1ff5ca75080db1a18ecc32e">UNICHAR_ID</a> unichar_id_zero = <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a9f8861ffb917e7341c821928da5865f0">contains_unichar</a>(<span class="stringliteral">&quot;0&quot;</span>) ?</div>
<div class="line">        <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ae786fa834962ef4d6dbf8300c6c5d456">unichar_to_id</a>(<span class="stringliteral">&quot;0&quot;</span>) : -1;</div>
<div class="line">    <a class="code" href="a00291.html">ScoredClass</a> scored_one = <a class="code" href="a00620.html#ab41bdc1f072e458bb14d644c1106b56a">ScoredUnichar</a>(Results, unichar_id_one);</div>
<div class="line">    <a class="code" href="a00291.html">ScoredClass</a> scored_zero = <a class="code" href="a00620.html#ab41bdc1f072e458bb14d644c1106b56a">ScoredUnichar</a>(Results, unichar_id_zero);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (Next = NextGood = 0; Next &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; Next++) {</div>
<div class="line">      <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> &lt;= BadMatchThreshold) {</div>
<div class="line">        <a class="code" href="a00291.html">ScoredClass</a> match = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next];</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#ad1dd0929edfb0e9e4905cc2fbeff42c2">get_isalpha</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>) ||</div>
<div class="line">            strstr(romans,</div>
<div class="line">                   <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood++] = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next];</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa0838c2b6fafdc34416794b6afe698f8">eq</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>, <span class="stringliteral">&quot;l&quot;</span>) &amp;&amp;</div>
<div class="line">                   scored_one.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> &gt;= BadMatchThreshold) {</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood] = scored_one;</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> = match.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>;</div>
<div class="line">          NextGood++;</div>
<div class="line">        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#aa0838c2b6fafdc34416794b6afe698f8">eq</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>, <span class="stringliteral">&quot;O&quot;</span>) &amp;&amp;</div>
<div class="line">                   scored_zero.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> &gt;= BadMatchThreshold) {</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood] = scored_zero;</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> = match.<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a>;</div>
<div class="line">          NextGood++;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keywordflow">for</span> (Next = NextGood = 0; Next &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; Next++) {</div>
<div class="line">      <span class="keywordflow">if</span> (Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next].<a class="code" href="a00291.html#aa410f972971cfb2df154972833783f72">rating</a> &lt;= BadMatchThreshold)</div>
<div class="line">        Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood++] = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> = NextGood;</div>
<div class="line">}                              <span class="comment">/* RemoveBadMatches */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af15e83a02b369b820d40c8920b4275e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::RemoveExtraPuncs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine discards extra digits or punctuation from the results. We keep only the top 2 punctuation answers and the top 1 digit answer if present.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Results</td><td>contains matches to be filtered</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>History: Tue Mar 12 13:51:03 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02503">2503</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line">  <span class="keywordtype">int</span> Next, NextGood;</div>
<div class="line">  <span class="keywordtype">int</span> punc_count;              <span class="comment">/*no of garbage characters */</span></div>
<div class="line">  <span class="keywordtype">int</span> digit_count;</div>
<div class="line">  <span class="comment">/*garbage characters */</span></div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">char</span> punc_chars[] = <span class="stringliteral">&quot;. , ; : / ` ~ &#39; - = \\ | \&quot; ! _ ^&quot;</span>;</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">char</span> digit_chars[] = <span class="stringliteral">&quot;0 1 2 3 4 5 6 7 8 9&quot;</span>;</div>
<div class="line"></div>
<div class="line">  punc_count = 0;</div>
<div class="line">  digit_count = 0;</div>
<div class="line">  <span class="keywordflow">for</span> (Next = NextGood = 0; Next &lt; Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a>; Next++) {</div>
<div class="line">    <a class="code" href="a00291.html">ScoredClass</a> match = Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[Next];</div>
<div class="line">    <span class="keywordflow">if</span> (strstr(punc_chars,</div>
<div class="line">               <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (punc_count &lt; 2)</div>
<div class="line">        Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood++] = match;</div>
<div class="line">      punc_count++;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (strstr(digit_chars,</div>
<div class="line">                 <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(match.<a class="code" href="a00291.html#ac067f8f00b90b65e9e8348355a771736">unichar_id</a>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (digit_count &lt; 1)</div>
<div class="line">          Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood++] = match;</div>
<div class="line">        digit_count++;</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        Results-&gt;<a class="code" href="a00032.html#a6ea8673cf9af04e0f0559ddcea630e61">match</a>[NextGood++] = match;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  Results-&gt;<a class="code" href="a00032.html#a5b86ffcce686898891300193f1998239">NumMatches</a> = NextGood;</div>
<div class="line">}                              <span class="comment">/* RemoveExtraPuncs */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a350f6cb6e7ce9f53ae468908a91c6148"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ResetAdaptiveClassifierInternal </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l00636">636</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                               {</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt; 0) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Resetting adaptive classifier (NumAdaptationsFailed=%d)\n&quot;</span>,</div>
<div class="line">            NumAdaptationsFailed);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00618.html#accee3ce0fad02a088149b714621dc21d">free_adapted_templates</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>);</div>
<div class="line">  <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a> = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  NumAdaptationsFailed = 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a62ffff7932680b25784bfca5079ce347"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ResetFeaturesHaveBeenExtracted </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l01985">1985</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  FeaturesHaveBeenExtracted = <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5a3045639a3db979a8d1eb6dc4343e3b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::SetAdaptiveThreshold </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#a6a3da5f1db8d485c0d2f5a7ba526c4a0">FLOAT32</a>&#160;</td>
          <td class="paramname"><em>Threshold</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine resets the internal thresholds inside the integer matcher to correspond to the specified threshold.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Threshold</td><td>threshold for creating new templates</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>matcher_good_threshold default good match rating</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Tue Apr 9 08:33:13 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02548">2548</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">  Threshold = (Threshold == <a class="code" href="a00091.html#adc3a809a1a219f741a9e45a32e0d11bc">matcher_good_threshold</a>) ? 0.9: (1.0 - Threshold);</div>
<div class="line">  <a class="code" href="a00091.html#a3d74369343952e81efa5ac8858d5e9d1">classify_adapt_proto_threshold</a>.set_value(</div>
<div class="line">      ClipToRange&lt;int&gt;(255 * Threshold, 0, 255));</div>
<div class="line">  <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>.set_value(</div>
<div class="line">      ClipToRange&lt;int&gt;(255 * Threshold, 0, 255));</div>
<div class="line">}                              <span class="comment">/* SetAdaptiveThreshold */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae66827073cdeea6a59dd16fd7cf5d297"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::SettupPass1 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine prepares the adaptive matcher for the start of the first pass. Learning is enabled (unless it is disabled for the whole program).</p>
<dl class="section note"><dt>Note:</dt><dd>this is somewhat redundant, it simply says that if learning is enabled then it will remain enabled on the first pass. If it is disabled, then it will remain disabled. This is only put here to make it very clear that learning is controlled directly by the global setting of EnableLearning.</dd></dl>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a> set to TRUE by this routine</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Mon Apr 15 16:39:29 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00710">710</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  <a class="code" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a> = <a class="code" href="a00091.html#a7691700e9742ecdc10e0f8ee75682991">classify_enable_learning</a>;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#aec7160ce69f6f7d478110b95b729d523" title="Sets up stopper variables in preparation for the first pass.">SettupStopperPass1</a>();</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* SettupPass1 */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5ad207ab75e8a69c35c225313268788b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::SettupPass2 </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine prepares the adaptive matcher for the start of the second pass. Further learning is disabled.</p>
<p>Globals:</p>
<ul>
<li><a class="el" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a> set to FALSE by this routine</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Mon Apr 15 16:39:29 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l00730">730</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  <a class="code" href="a00091.html#a7d0ccfd06421346d8cda0f1b76fd8516">EnableLearning</a> = <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line">  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a29f0c2e6c8a7b5fb44bb39ce47ceef84" title="Sets up stopper variables in preparation for the second pass.">SettupStopperPass2</a>();</div>
<div class="line"></div>
<div class="line">}                                <span class="comment">/* SettupPass2 */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5d8e80f8bd4a5779921f543c6eef796c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="a00307.html">ShapeTable</a>* tesseract::Classify::shape_table </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00066">66</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a>;</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a319cfe59c8e82e697375a351e3c604b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::ShapeIDToClassID </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shape_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02746">2746</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0; <span class="keywordtype">id</span> &lt; <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; ++id) {</div>
<div class="line">    <span class="keywordtype">int</span> font_set_id = <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[id]-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>;</div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(font_set_id &gt;= 0);</div>
<div class="line">    <span class="keyword">const</span> FontSet &amp;fs = <a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a3b3107bc72d9edfe501eaba7404de7eb" title="Return the object from an id.">get</a>(font_set_id);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> config = 0; config &lt; fs.size; ++config) {</div>
<div class="line">      <span class="keywordflow">if</span> (fs.configs[config] == shape_id)</div>
<div class="line">        <span class="keywordflow">return</span> id;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Shape %d not found\n&quot;</span>, shape_id);</div>
<div class="line">  <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abf81bc54d31591d9da5f95529583b99d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ShowBestMatchFor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>ClassId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>shape_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>AdaptiveOn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>PreTrainedOn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html">ADAPT_RESULTS</a> *&#160;</td>
          <td class="paramname"><em>Results</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine compares Blob to both sets of templates (adaptive and pre-trained) and then displays debug information for the config which matched best.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">Blob</td><td>blob to show best matching config for </td></tr>
    <tr><td class="paramname">denorm</td><td>normalization/denormalization parameters </td></tr>
    <tr><td class="paramname">ClassId</td><td>class whose configs are to be searched </td></tr>
    <tr><td class="paramname">shape_id</td><td>shape index </td></tr>
    <tr><td class="paramname">AdaptiveOn</td><td>TRUE if adaptive configs are enabled </td></tr>
    <tr><td class="paramname">PreTrainedOn</td><td>TRUE if pretrained configs are enabled </td></tr>
    <tr><td class="paramname">Results</td><td>results of match being debugged</td></tr>
  </table>
  </dd>
</dl>
<p>Globals:</p>
<ul>
<li>PreTrainedTemplates built-in training</li>
<li>AdaptedTemplates adaptive templates</li>
<li>AllProtosOn dummy proto mask</li>
<li>AllConfigsOn dummy config mask</li>
</ul>
<dl class="section note"><dt>Note:</dt><dd>Exceptions: none </dd>
<dd>
History: Fri Mar 22 08:43:52 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00620_source.html#l02579">2579</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line">  <span class="keywordtype">int</span> NumCNFeatures = 0, NumBLFeatures = 0;</div>
<div class="line">  <a class="code" href="a00407.html#a544a6c7d78d215e9a4da202daecfeb52">INT_FEATURE_ARRAY</a> CNFeatures, BLFeatures;</div>
<div class="line">  <a class="code" href="a00199.html">INT_RESULT_STRUCT</a> CNResult, BLResult;</div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> BlobLength;</div>
<div class="line">  <a class="code" href="a00577.html#afc8530b39ebe0b6df1e19159d2508d15">uinT32</a> ConfigMask;</div>
<div class="line">  <span class="keyword">static</span> <span class="keywordtype">int</span> next_config = -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (PreTrainedOn) next_config = -1;</div>
<div class="line"></div>
<div class="line">  CNResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> = BLResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> = 2.0;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="a00660.html#a6edc7e9d060a50cd3617bb509a061eb5">LegalClassId</a> (ClassId)) {</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a> (<span class="stringliteral">&quot;%d is not a legal class id!!\n&quot;</span>, ClassId);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *CNAdjust = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *BLAdjust = <span class="keyword">new</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>[<a class="code" href="a00805.html#adcc52d7d059a8ca452172df64faa231c">MAX_NUM_CLASSES</a>];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#a471b3e8f03ddc5281c167b37d8ddc5b5">shape_table_</a> == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    shape_id = ClassId;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shape_id = <a class="code" href="a00091.html#a319cfe59c8e82e697375a351e3c604b3">ShapeIDToClassID</a>(shape_id);</div>
<div class="line">  <span class="keywordflow">if</span> (PreTrainedOn &amp;&amp; shape_id &gt;= 0) {</div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a>(<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, shape_id)) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;No built-in templates for class/shape %d\n&quot;</span>, shape_id);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      NumCNFeatures = <a class="code" href="a00091.html#a1076d5d08686e48d39ef3eb07e711fb6">GetCharNormFeatures</a>(Blob, denorm, <a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>,</div>
<div class="line">                                          CNFeatures, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, CNAdjust,</div>
<div class="line">                                          &amp;BlobLength, <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (NumCNFeatures &lt;= 0) {</div>
<div class="line">        <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Illegal blob (char norm features)!\n&quot;</span>);</div>
<div class="line">      } <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#adff6fd8fca725fa346db25010b3be21e">SetCharNormMatch</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">        <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, shape_id),</div>
<div class="line">                  <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>,</div>
<div class="line">                  NumCNFeatures, CNFeatures,</div>
<div class="line">                  &amp;CNResult,</div>
<div class="line">                  <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>, <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>,</div>
<div class="line">                  <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">        <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(<a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">false</span>, shape_id,</div>
<div class="line">                                        Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(),</div>
<div class="line">                                        Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),</div>
<div class="line">                                        0, BlobLength, CNAdjust,</div>
<div class="line">                                        CNResult, Results);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (AdaptiveOn) {</div>
<div class="line">    <span class="keywordflow">if</span> (ClassId &lt; 0 || ClassId &gt;= <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Invalid adapted class id: %d\n&quot;</span>, ClassId);</div>
<div class="line">    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a3e7ae3ffbac606326937a4c701aeeaf2">UnusedClassIdIn</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId) ||</div>
<div class="line">               <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId] == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ||</div>
<div class="line">               <a class="code" href="a00619.html#a1d2aa2b696e73525cb57373fcc5a83ae">IsEmptyAdaptedClass</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ClassId])) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;No AD templates for class %d = %s\n&quot;</span>,</div>
<div class="line">              ClassId, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>.<a class="code" href="a00387.html#a421c0b6ebcbbe7547490252fb688c961">id_to_unichar</a>(ClassId));</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      NumBLFeatures = <a class="code" href="a00091.html#a4bf0e47e0ae00a0cec215a887cef8c65">GetBaselineFeatures</a>(Blob,</div>
<div class="line">                                          denorm,</div>
<div class="line">                                          <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>,</div>
<div class="line">                                          BLFeatures, BLAdjust,</div>
<div class="line">                                          &amp;BlobLength);</div>
<div class="line">      <span class="keywordflow">if</span> (NumBLFeatures &lt;= 0)</div>
<div class="line">        <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Illegal blob (baseline features)!\n&quot;</span>);</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#a30a627213fe38d7ae508cf6eaa946b41">SetBaseLineMatch</a>();</div>
<div class="line">        <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId),</div>
<div class="line">                  <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, <a class="code" href="a00091.html#ada1ef7ff613927daa2838ba41eaa055f">AllConfigsOn</a>,</div>
<div class="line">                  NumBLFeatures, BLFeatures,</div>
<div class="line">                  &amp;BLResult,</div>
<div class="line">                  <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>, <a class="code" href="a00620.html#a424f1b989129c5519f4df8f61ad6dcaf">NO_DEBUG</a>,</div>
<div class="line">                  <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">        <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(</div>
<div class="line">            <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>, <span class="keyword">false</span>,</div>
<div class="line">            ClassId, Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(),</div>
<div class="line">            Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(), 0, BlobLength, CNAdjust,</div>
<div class="line">            BLResult, Results);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (BLResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a> &lt; CNResult.<a class="code" href="a00199.html#ac15af84ab870846f8be5b02ede056efb">Rating</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (next_config &lt; 0) {</div>
<div class="line">      ConfigMask = 1 &lt;&lt; BLResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>;</div>
<div class="line">      next_config = 0;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      ConfigMask = 1 &lt;&lt; next_config;</div>
<div class="line">      ++next_config;</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>.set_value(<a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865a83297de004f4e58b9be2108c6cd08a23">baseline</a>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#a30a627213fe38d7ae508cf6eaa946b41">SetBaseLineMatch</a>();</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Adaptive Class ID: %d\n&quot;</span>, ClassId);</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, ClassId),</div>
<div class="line">              <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, (<a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>) &amp;ConfigMask,</div>
<div class="line">              NumBLFeatures, BLFeatures,</div>
<div class="line">              &amp;BLResult,</div>
<div class="line">              <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">              <a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>,</div>
<div class="line">              <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(</div>
<div class="line">        <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>, <span class="keyword">true</span>,</div>
<div class="line">        ClassId, Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(),</div>
<div class="line">        Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(), 0, BlobLength, CNAdjust,</div>
<div class="line">        BLResult, Results);</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shape_id &gt;= 0) {</div>
<div class="line">    ConfigMask = 1 &lt;&lt; CNResult.<a class="code" href="a00199.html#af0b37da100132e296cb6d45c3f55c159">Config</a>;</div>
<div class="line">    <a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>.set_value(<a class="code" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a>);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Static Shape ID: %d\n&quot;</span>, shape_id);</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#adff6fd8fca725fa346db25010b3be21e">SetCharNormMatch</a>(<a class="code" href="a00091.html#acab8de2f560b04b48191f60099e4244b">classify_integer_matcher_multiplier</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a093af2c004819e86bfff80ad88f10c37">im_</a>.<a class="code" href="a00201.html#aa695d9a7ae69ab036bc6f2455e50e421">Match</a>(<a class="code" href="a00660.html#a6a8e29742b045c359e7765a8a1ff4fdc">ClassForClassId</a> (<a class="code" href="a00091.html#a64383806f917e682c4a644efdd71d530">PreTrainedTemplates</a>, shape_id),</div>
<div class="line">              <a class="code" href="a00091.html#a08295fdeacbf1d536337f542320e86e2">AllProtosOn</a>, (<a class="code" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a>) &amp; ConfigMask,</div>
<div class="line">              NumCNFeatures, CNFeatures,</div>
<div class="line">              &amp;CNResult,</div>
<div class="line">              <a class="code" href="a00091.html#af722952ac0ab0339ade3abbbe10f8b6b">classify_adapt_feature_threshold</a>,</div>
<div class="line">              <a class="code" href="a00091.html#a3bfadb1d56669868fe7d18e12a7716dc">matcher_debug_flags</a>,</div>
<div class="line">              <a class="code" href="a00091.html#a08873fa3ea379656484c07f606f8a09c">matcher_debug_separate_windows</a>);</div>
<div class="line">    <a class="code" href="a00091.html#a7d663f1e02d6e7b2d1783fdca6154a4d">ExpandShapesAndApplyCorrections</a>(<a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="keyword">true</span>, shape_id,</div>
<div class="line">                                    Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(),</div>
<div class="line">                                    Blob-&gt;<a class="code" href="a00346.html#a8f1f8f110170fe12cf8147d504cd0ea2">bounding_box</a>().<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),</div>
<div class="line">                                    0, BlobLength, CNAdjust,</div>
<div class="line">                                    CNResult, Results);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Clean up.</span></div>
<div class="line">  <span class="keyword">delete</span>[] CNAdjust;</div>
<div class="line">  <span class="keyword">delete</span>[] BLAdjust;</div>
<div class="line">}                              <span class="comment">/* ShowBestMatchFor */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44e1b8840fb841e621b902f3abdd8522"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::ShowMatchDisplay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l01096">1096</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters: none</span></div>
<div class="line"><span class="comment"> ** Globals:</span></div>
<div class="line"><span class="comment"> **   FeatureShapes display list containing feature matches</span></div>
<div class="line"><span class="comment"> **   ProtoShapes display list containing proto matches</span></div>
<div class="line"><span class="comment"> ** Operation: This routine sends the shapes in the global display</span></div>
<div class="line"><span class="comment"> **   lists to the match debugger window.</span></div>
<div class="line"><span class="comment"> ** Return: none</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Thu Mar 21 15:47:33 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <a class="code" href="a00659.html#a142586ad15312463838c8202dd88d9b0">InitIntMatchWindowIfReqd</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00659.html#a23f6e9320fd27edf24ff0788bbd15d14">ProtoDisplayWindow</a>) {</div>
<div class="line">    <a class="code" href="a00659.html#a23f6e9320fd27edf24ff0788bbd15d14">ProtoDisplayWindow</a>-&gt;<a class="code" href="a00294.html#a5386b0da16d7cbdd33044e53b95313ac">Clear</a>();</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00659.html#a0ec1ed97f9b163a57ada0daebeed4a19">FeatureDisplayWindow</a>) {</div>
<div class="line">    <a class="code" href="a00659.html#a0ec1ed97f9b163a57ada0daebeed4a19">FeatureDisplayWindow</a>-&gt;<a class="code" href="a00294.html#a5386b0da16d7cbdd33044e53b95313ac">Clear</a>();</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00995.html#a50fae3caed4dccef6a71ac7e7aa9d63d">ClearFeatureSpaceWindow</a>(</div>
<div class="line">      static_cast&lt;NORM_METHOD&gt;(static_cast&lt;int&gt;(<a class="code" href="a00091.html#aa92ef2f6a1f0e726d576a59644c3cc63">classify_norm_method</a>)),</div>
<div class="line">      <a class="code" href="a00659.html#a3e2601e005e31466f29ed35791e280dc">IntMatchWindow</a>);</div>
<div class="line">  <a class="code" href="a00659.html#a3e2601e005e31466f29ed35791e280dc">IntMatchWindow</a>-&gt;<a class="code" href="a00294.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="a00659.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="a00659.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,</div>
<div class="line">                                  <a class="code" href="a00659.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="a00659.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00659.html#a23f6e9320fd27edf24ff0788bbd15d14">ProtoDisplayWindow</a>) {</div>
<div class="line">    <a class="code" href="a00659.html#a23f6e9320fd27edf24ff0788bbd15d14">ProtoDisplayWindow</a>-&gt;<a class="code" href="a00294.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="a00659.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="a00659.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,</div>
<div class="line">                                        <a class="code" href="a00659.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="a00659.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00659.html#a0ec1ed97f9b163a57ada0daebeed4a19">FeatureDisplayWindow</a>) {</div>
<div class="line">    <a class="code" href="a00659.html#a0ec1ed97f9b163a57ada0daebeed4a19">FeatureDisplayWindow</a>-&gt;<a class="code" href="a00294.html#a5a6c86ea0a618cf7642a8228fd7faab9">ZoomToRectangle</a>(<a class="code" href="a00659.html#ac1a914c5ff58a0f8f9280ef2c9a29855">INT_MIN_X</a>, <a class="code" href="a00659.html#a610ad70ab1731cabfb990c35cfd01dcf">INT_MIN_Y</a>,</div>
<div class="line">                                          <a class="code" href="a00659.html#ae712f394e9941c44c22c38c920bd71cd">INT_MAX_X</a>, <a class="code" href="a00659.html#a4b0559f5844c194356263f55e3279d04">INT_MAX_Y</a>);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* ShowMatchDisplay */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a786c5f6e2a5cd8aac2ed4dd89af84fea"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::TempConfigReliable </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00619.html#a844d69e71035a4a60207cedab3521f9e">TEMP_CONFIG</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02762">2762</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;NumTimesSeen for config of %s is %d\n&quot;</span>,</div>
<div class="line">            <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(class_id).<span class="keywordtype">string</span>(),</div>
<div class="line">            config-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (config-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a> &gt;= <a class="code" href="a00091.html#ad47099cfac2701d8fe3a24dd12eab0e1">matcher_sufficient_examples_for_prototyping</a>) {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (config-&gt;<a class="code" href="a00348.html#a441b843c3b024cd12b0ab4115a9fd159">NumTimesSeen</a> &lt; <a class="code" href="a00091.html#a33bc8d687ec0504c697ac0e1ace5567d">matcher_min_examples_for_prototyping</a>) {</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="a00070.html#aec36b71d7fc8a6e11c4c09e7cb5fb608">use_ambigs_for_adaption</a>) {</div>
<div class="line">    <span class="comment">// Go through the ambigs vector and see whether we have already seen</span></div>
<div class="line">    <span class="comment">// enough times all the characters represented by the ambigs vector.</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00995.html#a3dad1b2dad5ed3069bdb4c971116b9c5">UnicharIdVector</a> *ambigs =</div>
<div class="line">      <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a4a886a86bc5d0d4405dd9da165b3e1fd">getUnicharAmbigs</a>().<a class="code" href="a00383.html#a8317225de11350fec1efb6e78297c964">AmbigsForAdaption</a>(class_id);</div>
<div class="line">    <span class="keywordtype">int</span> ambigs_size = (ambigs == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 0 : ambigs-&gt;<a class="code" href="a00175.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>();</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ambig = 0; ambig &lt; ambigs_size; ++ambig) {</div>
<div class="line">      <a class="code" href="a00031.html">ADAPT_CLASS</a> ambig_class = <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[(*ambigs)[ambig]];</div>
<div class="line">      assert(ambig_class != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">      <span class="keywordflow">if</span> (ambig_class-&gt;<a class="code" href="a00031.html#afe5769d3f67549e0938480aab2d2b1cd">NumPermConfigs</a> == 0 &amp;&amp;</div>
<div class="line">          ambig_class-&gt;<a class="code" href="a00031.html#a88d1300e6657fc7c98af721983018b36">MaxNumTimesSeen</a> &lt;</div>
<div class="line">          <a class="code" href="a00091.html#a33bc8d687ec0504c697ac0e1ace5567d">matcher_min_examples_for_prototyping</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">          <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Ambig %s has not been seen enough times,&quot;</span></div>
<div class="line">                  <span class="stringliteral">&quot; not making config for %s permanent\n&quot;</span>,</div>
<div class="line">                  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(</div>
<div class="line">                      (*ambigs)[ambig]).<span class="keywordtype">string</span>(),</div>
<div class="line">                  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(class_id).<span class="keywordtype">string</span>());</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a954c9085f840572567462c9e0ff3551a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::UpdateAmbigsGroup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a>&#160;</td>
          <td class="paramname"><em>class_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00126.html">DENORM</a> &amp;&#160;</td>
          <td class="paramname"><em>denorm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00346.html">TBLOB</a> *&#160;</td>
          <td class="paramname"><em>Blob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00620_source.html#l02799">2799</a> of file <a class="el" href="a00620_source.html">adaptmatch.cpp</a>.</p>
<div class="fragment"><div class="line">                                              {</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00995.html#a3dad1b2dad5ed3069bdb4c971116b9c5">UnicharIdVector</a> *ambigs =</div>
<div class="line">    <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().<a class="code" href="a00129.html#a4a886a86bc5d0d4405dd9da165b3e1fd">getUnicharAmbigs</a>().<a class="code" href="a00383.html#a7270fb01b0ebbda292a577397fedc124">ReverseAmbigsForAdaption</a>(class_id);</div>
<div class="line">  <span class="keywordtype">int</span> ambigs_size = (ambigs == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ? 0 : ambigs-&gt;<a class="code" href="a00175.html#a111b51dd0bf1324cfb69ef70703d8e70">size</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Running UpdateAmbigsGroup for %s class_id=%d\n&quot;</span>,</div>
<div class="line">            <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(class_id).<span class="keywordtype">string</span>(), class_id);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> ambig = 0; ambig &lt; ambigs_size; ++ambig) {</div>
<div class="line">    <a class="code" href="a00805.html#afdabe64d68192a21409dd58c119709f8">CLASS_ID</a> ambig_class_id = (*ambigs)[ambig];</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00031.html">ADAPT_CLASS</a> ambigs_class = <a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ambig_class_id];</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> cfg = 0; cfg &lt; <a class="code" href="a00660.html#a5f9a45f938cb06ecc0f9dbdc144155b1">MAX_NUM_CONFIGS</a>; ++cfg) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00619.html#a45d630ce43777ee1ab16048b0a846813">ConfigIsPermanent</a>(ambigs_class, cfg)) <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00348.html">TEMP_CONFIG</a> config =</div>
<div class="line">        <a class="code" href="a00619.html#aebe34b43b3fd192fbde7130fa0c62933">TempConfigFor</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[ambig_class_id], cfg);</div>
<div class="line">      <span class="keywordflow">if</span> (config != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; <a class="code" href="a00091.html#a786c5f6e2a5cd8aac2ed4dd89af84fea">TempConfigReliable</a>(ambig_class_id, config)) {</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00091.html#af9e34f61db55f7f312f8e1531b2368bc">classify_learning_debug_level</a> &gt;= 1) {</div>
<div class="line">          <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Making config %d of %s permanent\n&quot;</span>, cfg,</div>
<div class="line">                  <a class="code" href="a00091.html#a83e4207353a1bb07adfaa6a82a74c9ce">getDict</a>().getUnicharset().debug_str(</div>
<div class="line">                      ambig_class_id).<span class="keywordtype">string</span>());</div>
<div class="line">        }</div>
<div class="line">        <a class="code" href="a00091.html#aefb0cfe284dd67601798f7ae510b787f">MakePermanent</a>(<a class="code" href="a00091.html#a49c2bec2694a12cb6518001d8193d58d">AdaptedTemplates</a>, ambig_class_id, cfg, denorm, Blob);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1718afe45a09c6631f11ae224e6d5db6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::WriteAdaptedTemplates </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This routine saves Templates to File in a binary format.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">File</td><td>open text file to write Templates to </td></tr>
    <tr><td class="paramname">Templates</td><td>set of adapted templates to write to File</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note:</dt><dd>Globals: none </dd>
<dd>
Exceptions: none </dd>
<dd>
History: Mon Mar 18 15:07:32 1991, DSJ, Created. </dd></dl>

<p>Definition at line <a class="el" href="a00618_source.html#l00507">507</a> of file <a class="el" href="a00618_source.html">adaptive.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                          {</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* first write the high level adaptive template struct */</span></div>
<div class="line">  fwrite ((<span class="keywordtype">char</span> *) Templates, <span class="keyword">sizeof</span> (<a class="code" href="a00033.html">ADAPT_TEMPLATES_STRUCT</a>), 1, File);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then write out the basic integer templates */</span></div>
<div class="line">  <a class="code" href="a00091.html#a81e8a5e5adfc60146ea3eb5b60936dd9">WriteIntTemplates</a> (File, Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>, <a class="code" href="a00070.html#a69c5179ac5f10a24f3f97e16ca09460f">unicharset</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then write out the adaptive info for each class */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; (Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>)-&gt;NumClasses; i++) {</div>
<div class="line">    <a class="code" href="a00618.html#a78e408661f8ca7de9554205ffa48781e">WriteAdaptedClass</a> (File, Templates-&gt;<a class="code" href="a00033.html#a0256081fa31eb38b52b19788ca62e327">Class</a>[i],</div>
<div class="line">      Templates-&gt;<a class="code" href="a00033.html#a592229e83546c1b6840e7862b92a0629">Templates</a>-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[i]-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>);</div>
<div class="line">  }</div>
<div class="line">}                                <span class="comment">/* WriteAdaptedTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81e8a5e5adfc60146ea3eb5b60936dd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::Classify::WriteIntTemplates </td>
          <td>(</td>
          <td class="paramtype">FILE *&#160;</td>
          <td class="paramname"><em>File</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a>&#160;</td>
          <td class="paramname"><em>Templates</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00387.html">UNICHARSET</a> &amp;&#160;</td>
          <td class="paramname"><em>target_unicharset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00659_source.html#l01155">1155</a> of file <a class="el" href="a00659_source.html">intproto.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line"><span class="comment">/*</span></div>
<div class="line"><span class="comment"> ** Parameters:</span></div>
<div class="line"><span class="comment"> **   File    open file to write templates to</span></div>
<div class="line"><span class="comment"> **   Templates templates to save into File</span></div>
<div class="line"><span class="comment"> ** Globals: none</span></div>
<div class="line"><span class="comment"> ** Operation: This routine writes Templates to File.  The format</span></div>
<div class="line"><span class="comment"> **   is an efficient binary format.  File must already be open</span></div>
<div class="line"><span class="comment"> **   for writing.</span></div>
<div class="line"><span class="comment"> ** Return: none</span></div>
<div class="line"><span class="comment"> ** Exceptions: none</span></div>
<div class="line"><span class="comment"> ** History: Wed Feb 27 11:48:46 1991, DSJ, Created.</span></div>
<div class="line"><span class="comment"> */</span></div>
<div class="line">  <span class="keywordtype">int</span> i, j;</div>
<div class="line">  <a class="code" href="a00195.html">INT_CLASS</a> Class;</div>
<div class="line">  <span class="keywordtype">int</span> unicharset_size = target_unicharset.<a class="code" href="a00387.html#aa3e8073ebaf3e0022654c45f27135032">size</a>();</div>
<div class="line">  <span class="keywordtype">int</span> version_id = -5;  <span class="comment">// When negated by the reader -1 becomes +1 etc.</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a> != unicharset_size) {</div>
<div class="line">    <a class="code" href="a00773.html#a21679e7fec2d69db23107348fa13c153">cprintf</a>(<span class="stringliteral">&quot;Warning: executing WriteIntTemplates() with %d classes in&quot;</span></div>
<div class="line">            <span class="stringliteral">&quot; Templates, while target_unicharset size is %d\n&quot;</span>,</div>
<div class="line">            Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, unicharset_size);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* first write the high level template struct */</span></div>
<div class="line">  fwrite(&amp;unicharset_size, <span class="keyword">sizeof</span>(unicharset_size), 1, File);</div>
<div class="line">  fwrite(&amp;version_id, <span class="keyword">sizeof</span>(version_id), 1, File);</div>
<div class="line">  fwrite(&amp;Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>),</div>
<div class="line">         1, File);</div>
<div class="line">  fwrite(&amp;Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>, <span class="keyword">sizeof</span>(Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>), 1, File);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then write out the class pruners */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a6a13950c1c600a35e3c534f1751b1d89">NumClassPruners</a>; i++)</div>
<div class="line">    fwrite(Templates-&gt;<a class="code" href="a00200.html#a614e997d4c6f4d1c5ff3b7dac186c536">ClassPruners</a>[i],</div>
<div class="line">           <span class="keyword">sizeof</span>(<a class="code" href="a00089.html">CLASS_PRUNER_STRUCT</a>), 1, File);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* then write out each class */</span></div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; Templates-&gt;<a class="code" href="a00200.html#a4735b2443aa7452909969d8d07e1877a">NumClasses</a>; i++) {</div>
<div class="line">    Class = Templates-&gt;<a class="code" href="a00200.html#a2083307ebe623a6617ff38291a2f3614">Class</a>[i];</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* first write out the high level struct for the class */</span></div>
<div class="line">    fwrite(&amp;Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#ab81b4bb4bddc50d49d1a66b809d9f629">NumProtos</a>), 1, File);</div>
<div class="line">    fwrite(&amp;Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>), 1, File);</div>
<div class="line">    <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a> == this-&gt;fontset_table_.get(Class-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>).size);</div>
<div class="line">    fwrite(&amp;Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>, <span class="keyword">sizeof</span>(Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>), 1, File);</div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="a00195.html#abb9c509f11364b949fe9764bc122938c">NumConfigs</a>; ++j) {</div>
<div class="line">      fwrite(&amp;Class-&gt;<a class="code" href="a00195.html#a86454e5d855825a4b2b370038598e88c">ConfigLengths</a>[j], <span class="keyword">sizeof</span>(<a class="code" href="a00577.html#acb2dfad543247740dab87d31bb49dfff">uinT16</a>), 1, File);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* then write out the proto lengths */</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class) &gt; 0) {</div>
<div class="line">      fwrite ((<span class="keywordtype">char</span> *) (Class-&gt;<a class="code" href="a00195.html#a9b4f333b97970433f1c34d45103281d3">ProtoLengths</a>), sizeof (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>),</div>
<div class="line">              <a class="code" href="a00660.html#a169c71bb67d9d85f2a7eca9c20cce40a">MaxNumIntProtosIn</a> (Class), File);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* then write out the proto sets */</span></div>
<div class="line">    <span class="keywordflow">for</span> (j = 0; j &lt; Class-&gt;<a class="code" href="a00195.html#a92a0b5397c2b6f3cc0346a72ce3595bd">NumProtoSets</a>; j++)</div>
<div class="line">      fwrite ((<span class="keywordtype">char</span> *) Class-&gt;<a class="code" href="a00195.html#ac11726dfb0e9ac06fd00351082ca7888">ProtoSets</a>[j],</div>
<div class="line">              sizeof (<a class="code" href="a00271.html">PROTO_SET_STRUCT</a>), 1, File);</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* then write the fonts info */</span></div>
<div class="line">    fwrite(&amp;Class-&gt;<a class="code" href="a00195.html#af0d8fa528ac2dd07fe4f39ef84a6fd7c">font_set_id</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>), 1, File);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Write the fonts info tables */</span></div>
<div class="line">  this-&gt;<a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File, <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a39563e2e9bd26b96504e53ae2c9defcc">write_info</a>));</div>
<div class="line">  this-&gt;<a class="code" href="a00091.html#ae6dea981b2f591921d798ea83b0fa455">fontinfo_table_</a>.<a class="code" href="a00388.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File,</div>
<div class="line">                              <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a48b60e911578a0285e73738e81181abf">write_spacing_info</a>));</div>
<div class="line">  this-&gt;<a class="code" href="a00091.html#a74a007a46ac907d2c8f61e9885143465">fontset_table_</a>.<a class="code" href="a00388.html#a23b683e4ea0132af3004552f5d515d61">write</a>(File, <a class="code" href="a00604.html#ad000c6729bae0f97075ca10a0b5bf7d6">NewPermanentTessCallback</a>(<a class="code" href="a00995.html#a385582f69442d7d9588e2983c768cec1">write_set</a>));</div>
<div class="line">}                                <span class="comment">/* WriteIntTemplates */</span></div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a49c2bec2694a12cb6518001d8193d58d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00619.html#a41c6dcad3fe69d675809c177e5537812">ADAPT_TEMPLATES</a> tesseract::Classify::AdaptedTemplates</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00430">430</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a974e5b3b4ee8b184a3af4ba782750dd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::AllConfigsOff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00437">437</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ada1ef7ff613927daa2838ba41eaa055f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::AllConfigsOn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00435">435</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a04608dab39f896c0358b42c228a7ef32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::AllProtosOff</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00436">436</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a08295fdeacbf1d536337f542320e86e2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::AllProtosOn</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00433">433</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa220c70c7e0b0f7b0276d421c95feedd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::certainty_scale = 20.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Certainty scaling factor" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00398">398</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="af722952ac0ab0339ade3abbbe10f8b6b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_adapt_feature_threshold = 230</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Threshold for good features during adaptive 0-255" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00404">404</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3d74369343952e81efa5ac8858d5e9d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_adapt_proto_threshold = 230</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Threshold for good protos during adaptive 0-255" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00402">402</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a57e449d38b255fe82e61d88ded8b0020"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_bln_numeric_mode = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Assume the input is numbers [0-9]." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00455">455</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7bef23fa815b3c02261800ca82b05911"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_char_norm_range = 0.2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Character Normalization Range ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00363">363</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a342dfc4f244244bd1bc211ea910e2b12"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_character_fragments_garbage_certainty_threshold = -3.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Exclude fragments that do not match any whole character" " with at least this certainty" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00410">410</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a406c1644ce61dfb376ae9975f89c54ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_class_pruner_multiplier = 30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Class Pruner Multiplier 0-255:       " </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00422">422</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6e0102d0d21b6151893a199cc84a6e93"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_class_pruner_threshold = 229</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Class Pruner Threshold 0-255" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00420">420</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2f3faf7d282a1b58b10b3866693a4f08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_cp_cutoff_strength = 7</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Class Pruner CutoffStrength:         " </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00424">424</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0c8e4bf5e3032c6468b909b6aca7f416"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_debug_character_fragments = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Bring up graphical debugging windows for fragments training" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00412">412</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0f934f0b39cb869d2a4973269fb696cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_debug_level = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Classify debug level" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00357">357</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a2420bb00ab392215cbc8b5f72d9cf81a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_enable_adaptive_debugger = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Enable match debugger" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00377">377</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="adaa9bf9e188634ffa99c83204be2129f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_enable_adaptive_matcher = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Enable adaptive classifier" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00372">372</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7691700e9742ecdc10e0f8ee75682991"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_enable_learning = true</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Enable adaptive classifier" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00356">356</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="acab8de2f560b04b48191f60099e4244b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_integer_matcher_multiplier = 14</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Integer Matcher Multiplier  0-255:   " </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00426">426</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="abdd8831d44ce5ea36f7bbee1ed9c4e8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* tesseract::Classify::classify_learn_debug_str = &quot;&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Class str to debug learning" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00416">416</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="af9e34f61db55f7f312f8e1531b2368bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_learning_debug_level = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Learning Debug Level: " </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00380">380</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3f89a54fbee53fa65e3d2c2947dab449"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_max_norm_scale_x = 0.325</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max char x-norm scale ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00365">365</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="addf6334cb29c021e52587f20ac5b30b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_max_norm_scale_y = 0.325</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Max char y-norm scale ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00367">367</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8ffda27cc071fa6c63c406fe9749f276"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_min_norm_scale_x = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min char x-norm scale ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00364">364</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0d1928e7dac3c17776220d35f08a48ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_min_norm_scale_y = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min char y-norm scale ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00366">366</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a67a98c273b9c1b7cc951fcb20e376bf3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::classify_misfit_junk_penalty = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Penalty to apply when a non-alnum is vertically out of " "its expected textline position" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00396">396</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="aa92ef2f6a1f0e726d576a59644c3cc63"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::classify_norm_method = <a class="el" href="a00670.html#a2a4b69f9a2827dc98bc4cbc233118865afa40ef3af4fea0001b535318130960b2">character</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Normalization Method   ..." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00361">361</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a27fe54e49f64e61f40b4e50e8ff4084c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_save_adapted_templates = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Save adapted templates to a file" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00376">376</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a52c6bf81f09a61859f999707e37c47f0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::classify_use_pre_adapted_templates = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use pre-adapted classifier templates" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00374">374</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab9c25bf0ebc01c57728e19b2bbc980ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::disable_character_fragments = <a class="el" href="a00777.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Do not include character fragments in the" " results of the classifier" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00407">407</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7d0ccfd06421346d8cda0f1b76fd8516"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::EnableLearning</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00439">439</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a6ebcfd2968c704f99efd40075ecdb138"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00151.html">FEATURE_DEFS_STRUCT</a> tesseract::Classify::feature_defs_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00459">459</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ae6dea981b2f591921d798ea83b0fa455"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00388.html">UnicityTable</a>&lt;<a class="el" href="a00163.html">FontInfo</a>&gt; tesseract::Classify::fontinfo_table_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00443">443</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a74a007a46ac907d2c8f61e9885143465"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00388.html">UnicityTable</a>&lt;<a class="el" href="a00165.html">FontSet</a>&gt; tesseract::Classify::fontset_table_</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00451">451</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a048eceaa95452969dc6cc5d29d97e5cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::il1_adaption_test = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Dont adapt to i/I at beginning of word" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00453">453</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a093af2c004819e86bfff80ad88f10c37"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00201.html">IntegerMatcher</a> tesseract::Classify::im_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00455">455</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a9723b1f4a341f42ddfc68d2f531c7dd3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_avg_noise_size = 12.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Avg. noise blob length: " </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00386">386</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a10595e84248f68a98f8e73bcdb6ae89a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_bad_match_pad = 0.15</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Bad Match Pad (0-1)" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00384">384</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a76bc2aed534982a6b67afe8a6653b04f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_clustering_max_angle_delta = 0.015</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Maximum angle delta for prototype clustering" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00393">393</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3bfadb1d56669868fe7d18e12a7716dc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::matcher_debug_flags = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Matcher Debug Flags" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00379">379</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a59d2ce9a817ab97d37a459ca2459cf8e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::matcher_debug_level = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Matcher Debug Level" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00378">378</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a08873fa3ea379656484c07f606f8a09c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::matcher_debug_separate_windows = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Use two different windows for debugging the matching: " "One for the protos and one for the features." </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00415">415</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="adc3a809a1a219f741a9e45a32e0d11bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_good_threshold = 0.125</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Good Match (0-1)" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00381">381</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a8f17cd68516b18d7a0aaba311585a8ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_great_threshold = 0.0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Great Match (0-1)" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00382">382</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a33bc8d687ec0504c697ac0e1ace5567d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::matcher_min_examples_for_prototyping = 3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Reliable Config Threshold" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00389">389</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3d9ace4f4ae0ddf01942ced19410adbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_perfect_threshold = 0.02</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Perfect Match (0-1)" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00383">383</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a727f2429705dabdd078d6748f0e81c42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::matcher_permanent_classes_min = 1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Min # of permanent classes" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00387">387</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7940573dfb85992433c6f51965a9fea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::matcher_rating_margin = 0.1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"New template margin (0-1)" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00385">385</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad47099cfac2701d8fe3a24dd12eab0e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::matcher_sufficient_examples_for_prototyping = 5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Enable adaption even if the ambiguities have not been seen" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00391">391</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad4c94be5d5738afb4115a12cad2e3efa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00240.html">NORM_PROTOS</a>* tesseract::Classify::NormProtos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00441">441</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a64383806f917e682c4a644efdd71d530"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00660.html#ab59629800b7869803b0af0f2f5db1627">INT_TEMPLATES</a> tesseract::Classify::PreTrainedTemplates</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00426">426</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a22717c4d299d3a52683ad90114b20200"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::prioritize_division = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Prioritize blob division over chopping" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00354">354</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a3306f7dc2f0df8c08a9933493262a2c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::PrunedProtos</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00434">434</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab2ed08d2587e66a131f7fcd229102566"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::rating_scale = 1.5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Rating scaling factor" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00397">397</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a471b3e8f03ddc5281c167b37d8ddc5b5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00307.html">ShapeTable</a>* tesseract::Classify::shape_table_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00464">464</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a26b1c76382f418bf5a78bad15b23b8ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00772.html#a584fa1e33e36d105f97bc7e7288fb259">BIT_VECTOR</a> tesseract::Classify::TempProtoMask</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00627_source.html#l00438">438</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a85fcc9966cddbc38adf1014dd0cd778c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::tess_bn_matching = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Baseline Normalized Matching" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00371">371</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a746dbbd1c99e99f3d213077cceedf80e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::Classify::tess_cn_matching = 0</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Character Normalized Matching" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00370">370</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a0be36efceb5fcf41dfbc032516af2ace"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double tesseract::Classify::tessedit_class_miss_scale = 0.00390625</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Scale factor for features not used" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00400">400</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<a class="anchor" id="a96f1213af9f43f2ec0ab9e22f32da3b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::Classify::tessedit_single_match = <a class="el" href="a00777.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Top choice only from CP" </p>

<p>Definition at line <a class="el" href="a00627_source.html#l00355">355</a> of file <a class="el" href="a00627_source.html">classify.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00627_source.html">classify.h</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00618_source.html">adaptive.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00620_source.html">adaptmatch.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00626_source.html">classify.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00632_source.html">cutoffs.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00643_source.html">float2int.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00657_source.html">intmatcher.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00659_source.html">intproto.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00669_source.html">mfoutline.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00675_source.html">normmatch.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00679_source.html">outfeat.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00681_source.html">picofeat.cpp</a></li>
<li>/mnt/data/src/tesseract-ocr/classify/<a class="el" href="a00683_source.html">protos.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00995.html">tesseract</a></li><li class="navelem"><a class="el" href="a00091.html">Classify</a></li>
    <li class="footer">Generated on Thu Nov 1 2012 20:20:04 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
