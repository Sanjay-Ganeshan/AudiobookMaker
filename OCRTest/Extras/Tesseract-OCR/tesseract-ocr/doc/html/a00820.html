<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tesseract: /mnt/data/src/tesseract-ocr/image/imgs.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00820.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">imgs.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="a00817_source.html">img.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="a00592_source.html">params.h</a>&quot;</code><br/>
</div>
<p><a href="a00820_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0df725752395af1328217c86bf552ed4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr class="memitem:adf532c19ebf5ba5ec70086035b874dbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#adf532c19ebf5ba5ec70086035b874dbc">copy_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:ad524b64ac508eee1576a4787e1f5f457"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#ad524b64ac508eee1576a4787e1f5f457">enlarge_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:ace8abc71ce7c0bb82ff54377abf45e66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#ace8abc71ce7c0bb82ff54377abf45e66">fast_reduce_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:a987ea5c1e5f652311b99892283211a79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#a987ea5c1e5f652311b99892283211a79">reduce_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:aa6bebc6424c5e6afcb08178ed6b44158"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#aa6bebc6424c5e6afcb08178ed6b44158">invert_image</a> (<a class="el" href="a00187.html">IMAGE</a> *image)</td></tr>
<tr class="memitem:af97bc85bee81f1d6a028bb3f8a1e607c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#af97bc85bee81f1d6a028bb3f8a1e607c">bias_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bias)</td></tr>
<tr class="memitem:a8e16bf9c8a0b05003c82b692f5549b40"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#a8e16bf9c8a0b05003c82b692f5549b40">starbase_to_normal</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> preserve_grey)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abb295cc164b06bec36f29e95a78733bb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00820.html#abb295cc164b06bec36f29e95a78733bb">image_default_resolution</a> = 300</td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="af97bc85bee81f1d6a028bb3f8a1e607c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void bias_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td>
          <td class="paramname"><em>bias</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00832">832</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp;                 <span class="comment">//bytes per pixel</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> (); <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    xext = source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> (); <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    yext = source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  bytespp = source-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> () == 24 ? 3 : 1;</div>
<div class="line">  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + y, xext);</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + y, xext, &amp;copyline);</div>
<div class="line">    <span class="keywordflow">for</span> (pixel = xext * bytespp, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &gt; 0;</div>
<div class="line">      pixel--, copy++)</div>
<div class="line">    *copy += bias;               <span class="comment">//add bias</span></div>
<div class="line"></div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (xstart, ystart + y, xext, &amp;copyline);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0df725752395af1328217c86bf552ed4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> check_legal_image_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00240">240</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">  <span class="keywordflow">if</span> (x &lt;= 0 || y &lt;= 0) {</div>
<div class="line">    <a class="code" href="a00818.html#ae511546aebaf910a87fb3ca25b62da6a">BADIMAGESIZE</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;check_legal_image_size&quot;</span>, <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a13d4c6d048f76d5b02c6f1b70323e770">TESSLOG</a>, <span class="stringliteral">&quot;(%d,%d)&quot;</span>, x, y);</div>
<div class="line">    <span class="keywordflow">return</span> -1;                   <span class="comment">//failed</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (bits_per_pixel != 1 &amp;&amp; bits_per_pixel != 2 &amp;&amp;</div>
<div class="line">      bits_per_pixel != 4 &amp;&amp; bits_per_pixel != 5 &amp;&amp;</div>
<div class="line">      bits_per_pixel != 6 &amp;&amp; bits_per_pixel != 8 &amp;&amp;</div>
<div class="line">      bits_per_pixel != 16 &amp;&amp; bits_per_pixel != 24 &amp;&amp;</div>
<div class="line">      bits_per_pixel != 32) {</div>
<div class="line">    <a class="code" href="a00818.html#af2f32937d04ae19ccae856ff89d08992">BADBPP</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;check_legal_image_size&quot;</span>, <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a13d4c6d048f76d5b02c6f1b70323e770">TESSLOG</a>, <span class="stringliteral">&quot;%d&quot;</span>, bits_per_pixel);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">                                 <span class="comment">//bytes per line</span></div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00817.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (x, bits_per_pixel);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adf532c19ebf5ba5ec70086035b874dbc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void copy_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00270">270</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> bytesize;                <span class="comment">//no of bytes to copy</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcppb;                  <span class="comment">//pixels per byte</span></div>
<div class="line">  <a class="code" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> aligned;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)</div>
<div class="line">    xext = dest-&gt;xsize - xdest;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)</div>
<div class="line">    yext = dest-&gt;ysize - ydest;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  srcppb = 8 / source-&gt;bpp;      <span class="comment">//pixels per byte</span></div>
<div class="line">  <span class="keywordflow">if</span> (source-&gt;bpp == dest-&gt;bpp || !adjust_grey)</div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    shift = source-&gt;bps - dest-&gt;bps;</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt; 0)</div>
<div class="line">      shift = -shift;            <span class="comment">//keep positive</span></div>
<div class="line">  }</div>
<div class="line">  aligned = source-&gt;bpp == dest-&gt;bpp;</div>
<div class="line">  <span class="keywordflow">if</span> (aligned &amp;&amp; srcppb != 0) {</div>
<div class="line">    aligned = xstart % srcppb == 0</div>
<div class="line">      &amp;&amp; xdest % srcppb == 0</div>
<div class="line">      &amp;&amp; (xext % srcppb == 0 || xdest + xext == dest-&gt;xsize);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {</div>
<div class="line">    <span class="keywordflow">if</span> (ystart &gt;= ydest)</div>
<div class="line">      yoffset = y;               <span class="comment">//top down</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      yoffset = yext - y - 1;    <span class="comment">//bottom up</span></div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);</div>
<div class="line">    <span class="keywordflow">if</span> (aligned) {</div>
<div class="line">      bytesize = <a class="code" href="a00817.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (xext, source-&gt;bpp);</div>
<div class="line">      <span class="comment">//get bytes per line</span></div>
<div class="line">      <span class="keywordflow">if</span> (srcppb == 0)</div>
<div class="line">                                 <span class="comment">//do cheap move</span></div>
<div class="line">        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest * 3, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart * 3, (<span class="keywordtype">unsigned</span>) bytesize);</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">                                 <span class="comment">//do cheap move</span></div>
<div class="line">        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest / srcppb, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart / srcppb, (<span class="keywordtype">unsigned</span>) bytesize);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (shift == 0) {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext,</div>
<div class="line">          &amp;copyline);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source-&gt;bpp &lt; dest-&gt;bpp) {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (source-&gt;bpp &lt;= shift</div>
<div class="line">        &amp;&amp; (source-&gt;bpp == 1 || source-&gt;bpp == 4)) {</div>
<div class="line">          <span class="keywordflow">if</span> (source-&gt;bpp == 1) {</div>
<div class="line">            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">              pixel++, copy++)</div>
<div class="line">            <span class="keywordflow">if</span> (*copy)</div>
<div class="line">              *copy = 0xff;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">              pixel++, copy++)</div>
<div class="line">                                 <span class="comment">//scale up</span></div>
<div class="line">            *copy = (*copy &lt;&lt; shift) | *copy;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">            pixel++)</div>
<div class="line">          *copy++ &lt;&lt;= shift;     <span class="comment">//scale up</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + 1; pixel &lt; xext;</div>
<div class="line">          pixel++) {</div>
<div class="line">            *copy &gt;&gt;= shift;</div>
<div class="line">            copy += 3;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">            pixel++)</div>
<div class="line">          *copy++ &gt;&gt;= shift;     <span class="comment">//scale down</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad524b64ac508eee1576a4787e1f5f457"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void enlarge_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00398">398</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> pixel;                   <span class="comment">//current pixel</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcext;                  <span class="comment">//source extent</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xoffset;                 <span class="comment">//column index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//index in super pixel</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> startxindex;             <span class="comment">//initial x index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xscale;                  <span class="comment">//x scale factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *destpix;                <span class="comment">//dest pixels</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> bigline;             <span class="comment">//expanded line</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = dest-&gt;xsize;          <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize * scale - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    xext = source-&gt;xsize * scale - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)</div>
<div class="line">    xext = dest-&gt;xsize - xdest;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = dest-&gt;ysize;          <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize * scale - ystart)</div>
<div class="line">    yext = source-&gt;ysize * scale - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)</div>
<div class="line">    yext = dest-&gt;ysize - ydest;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xindex = xstart % scale;       <span class="comment">//offset in super pixel</span></div>
<div class="line">  startxindex = xindex;</div>
<div class="line">  yindex = ystart % scale;</div>
<div class="line">                                 <span class="comment">//no of source pixels</span></div>
<div class="line">  srcext = (xext + xindex + scale - 1) / scale;</div>
<div class="line">  xstart /= scale;               <span class="comment">//actual start</span></div>
<div class="line">  ystart /= scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey) {</div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  bigline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xext * 3);</div>
<div class="line">  bigline.<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = dest-&gt;bpp == 24 ? source-&gt;bpp : dest-&gt;bpp;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ystart++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart, srcext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart, srcext, &amp;copyline);</div>
<div class="line">    src = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    destpix = bigline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    xscale = scale;              <span class="comment">//enlargement factor</span></div>
<div class="line">    <span class="keywordflow">if</span> (source-&gt;bpp == 24 &amp;&amp; dest-&gt;bpp == 24) {</div>
<div class="line">      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;</div>
<div class="line">      src += source-&gt;bytespp) {</div>
<div class="line">        xoffset += xscale - xindex;</div>
<div class="line">        <span class="keywordflow">if</span> (xoffset &gt; xext)</div>
<div class="line">          xscale -= xoffset - xext;</div>
<div class="line">        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++) {</div>
<div class="line">          *destpix++ = *src;</div>
<div class="line">          *destpix++ = *(src + 1);</div>
<div class="line">          *destpix++ = *(src + 2);</div>
<div class="line">        }</div>
<div class="line">        xindex = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24)</div>
<div class="line">        src++;</div>
<div class="line">      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;</div>
<div class="line">      src += source-&gt;bytespp) {</div>
<div class="line">        xoffset += xscale - xindex;</div>
<div class="line">        <span class="keywordflow">if</span> (xoffset &gt; xext)</div>
<div class="line">                                 <span class="comment">//clip to dest limit</span></div>
<div class="line">            xscale -= xoffset - xext;</div>
<div class="line">        <span class="keywordflow">if</span> (shift == 0)</div>
<div class="line">          pixel = *src;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shift &gt; 0)</div>
<div class="line">          pixel = *src &lt;&lt; shift;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          pixel = *src &gt;&gt; (-shift);</div>
<div class="line">        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++)</div>
<div class="line">          *destpix++ = pixel;    <span class="comment">//duplicate pixel</span></div>
<div class="line">        xindex = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (; yoffset &lt; yext &amp;&amp; yindex &lt; scale; yindex++, yoffset++) {</div>
<div class="line">      dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;bigline, 0);</div>
<div class="line">    }</div>
<div class="line">    yindex = 0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace8abc71ce7c0bb82ff54377abf45e66"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void fast_reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00516">516</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                                   {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">//ptr to source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)</div>
<div class="line">    xext = (dest-&gt;xsize - xdest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)</div>
<div class="line">    yext = (dest-&gt;ysize - ydest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xfactor = xext % scale;        <span class="comment">//left overs</span></div>
<div class="line">  <span class="keywordflow">if</span> (xfactor == 0)</div>
<div class="line">    xfactor = scale;</div>
<div class="line">                                 <span class="comment">//destination pixels</span></div>
<div class="line">  destext = (xext + scale - 1) / scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey)</div>
<div class="line">                                 <span class="comment">//shift factor</span></div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  linesums = <span class="keyword">new</span> <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);</div>
<div class="line">    <span class="keywordflow">for</span> (xindex = destext * source-&gt;bytespp - 1; xindex &gt;= 0; xindex--)</div>
<div class="line">      linesums[xindex] = 0;      <span class="comment">//zero sums</span></div>
<div class="line">    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale</div>
<div class="line">    &amp;&amp; ystart + yoffset &lt; source-&gt;ysize; yindex += 3) {</div>
<div class="line">      source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);</div>
<div class="line">      pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span></div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums += 3) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">            *(sums + 1) += *pixel++;</div>
<div class="line">            *(sums + 2) += *pixel++;</div>
<div class="line">            pixel += 3;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (scale &amp; 1)</div>
<div class="line">            pixel -= 3;          <span class="comment">//correct position</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">          *(sums + 1) += *pixel++;</div>
<div class="line">          *(sums + 2) += *pixel++;</div>
<div class="line">          pixel += 3;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums++) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {</div>
<div class="line">            *sums += *pixel;</div>
<div class="line">            pixel += 2;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (scale &amp; 1)</div>
<div class="line">            pixel--;             <span class="comment">//correct position</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {</div>
<div class="line">          *sums += *pixel;</div>
<div class="line">          pixel += 2;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      yoffset += 3;              <span class="comment">//every 3 lines</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (yindex &gt; scale)</div>
<div class="line">      yoffset -= yindex - scale; <span class="comment">//back on right scale</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = source-&gt;bpp;</div>
<div class="line">    pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">                                 <span class="comment">//pixels in block</span></div>
<div class="line">    divisor = ((yindex + 2) / 3) * ((scale + 1) / 2);</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt;= 0) {</div>
<div class="line">      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span></div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">                                 <span class="comment">//turn to destination value</span></div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*sums++ / divisor);</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ = *sums++</div>
<div class="line">          / (((yindex + 2) / 3) * ((xfactor + 1) / 2) &lt;&lt; (-shift));</div>
<div class="line">      <span class="comment">//lastone different</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((*sums++ &lt;&lt; shift) / divisor);</div>
<div class="line">      <span class="comment">//destination value</span></div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">                                 <span class="comment">//last one different</span></div>
<div class="line">        *pixel++ = (*(sums++) &lt;&lt; shift) / (((yindex + 2) / 3) * ((xfactor + 1) / 2));</div>
<div class="line">    }</div>
<div class="line">                                 <span class="comment">//put in destination</span></div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] linesums;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa6bebc6424c5e6afcb08178ed6b44158"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void invert_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>image</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00797">797</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> mask;                    <span class="comment">//bit mask</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp;                 <span class="comment">//bytes per pixel</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xsize, ysize;            <span class="comment">/*size of image */</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">/*index into image */</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">/*current pixel */</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> line;                <span class="comment">/*line of image */</span></div>
<div class="line"></div>
<div class="line">  bytespp = image-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> () == 24 ? 3 : 1;</div>
<div class="line">  xsize = image-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> ();   <span class="comment">/*find sizes */</span></div>
<div class="line">  ysize = image-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> ();</div>
<div class="line">                                 <span class="comment">//pixel mask</span></div>
<div class="line">  mask = (1 &lt;&lt; image-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ()) - 1;</div>
<div class="line">                                 <span class="comment">/*do each line */</span></div>
<div class="line">  <span class="keywordflow">for</span> (yindex = ysize - 1; yindex &gt;= 0; yindex--) {</div>
<div class="line">    image-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (0, yindex, xsize, &amp;line);</div>
<div class="line">    <span class="keywordflow">for</span> (pixel = line.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>, xindex = xsize * bytespp; xindex &gt; 0;</div>
<div class="line">      xindex--) {</div>
<div class="line">      *pixel = (*pixel) ^ mask;  <span class="comment">//invert image only</span></div>
<div class="line">      ++pixel;</div>
<div class="line">    }</div>
<div class="line">                                 <span class="comment">/*put it back */</span></div>
<div class="line">    image-&gt;<a class="code" href="a00187.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (0, yindex, xsize, &amp;line);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a987ea5c1e5f652311b99892283211a79"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00658">658</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> div2;                    <span class="comment">//total cell area divided by 2</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixel;                  <span class="comment">//ptr to source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)</div>
<div class="line">    xext = (dest-&gt;xsize - xdest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)</div>
<div class="line">    yext = (dest-&gt;ysize - ydest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xfactor = xext % scale;        <span class="comment">//left overs</span></div>
<div class="line">  <span class="keywordflow">if</span> (xfactor == 0)</div>
<div class="line">    xfactor = scale;</div>
<div class="line">                                 <span class="comment">//destination pixels</span></div>
<div class="line">  destext = (xext + scale - 1) / scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey)</div>
<div class="line">                                 <span class="comment">//shift factor</span></div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  linesums = <span class="keyword">new</span> <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);</div>
<div class="line">    <span class="keywordflow">for</span> (xindex = 0; xindex &lt; (destext) * source-&gt;bytespp; xindex++)</div>
<div class="line">      linesums[xindex] = 0;      <span class="comment">//zero sums</span></div>
<div class="line">    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale &amp;&amp; ystart + yoffset &lt; source-&gt;ysize;</div>
<div class="line">    yindex++) {</div>
<div class="line">      source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);</div>
<div class="line">      pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span></div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums += 3) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++) {</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">            *(sums + 1) += *pixel++;</div>
<div class="line">            *(sums + 2) += *pixel++;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++) {</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">          *(sums + 1) += *pixel++;</div>
<div class="line">          *(sums + 2) += *pixel++;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums++) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++)</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++)</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">      }</div>
<div class="line">      yoffset++;                 <span class="comment">//next line</span></div>
<div class="line">    }</div>
<div class="line">    copyline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (source-&gt;bpp);</div>
<div class="line">    pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    divisor = yindex * scale;</div>
<div class="line">    <span class="keywordflow">if</span> (divisor == 0) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a></div>
<div class="line">        (<span class="stringliteral">&quot;Impossible:divisor=0!, yindex=%d, scale=%d, yoffset=%d,yext=%d\n&quot;</span>,</div>
<div class="line">        yindex, scale, yoffset, yext);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt;= 0) {</div>
<div class="line">      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span></div>
<div class="line">      div2 = divisor / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / divisor);</div>
<div class="line">      <span class="comment">//turn to destination value</span></div>
<div class="line">      div2 = (yindex * xfactor &lt;&lt; (-shift)) / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ =</div>
<div class="line">          (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / (yindex * xfactor &lt;&lt; (-shift)));</div>
<div class="line">      <span class="comment">//lastone different</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      div2 = divisor / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / divisor);</div>
<div class="line">      <span class="comment">//destination value</span></div>
<div class="line">      div2 = (yindex * xfactor) / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ =</div>
<div class="line">          (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / (yindex * xfactor));</div>
<div class="line">      <span class="comment">//last one different</span></div>
<div class="line">    }</div>
<div class="line">                                 <span class="comment">//put in destination</span></div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] linesums;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8e16bf9c8a0b05003c82b692f5549b40"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void starbase_to_normal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>preserve_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00882">882</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift4;                   <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift6;                   <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> colour_shift;             <span class="comment">//shift of colours</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white_level;             <span class="comment">//dest white value</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> pixel;                   <span class="comment">//pixel index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> srcppb;                   <span class="comment">//pixels per byte</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> (); <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    xext = source-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; dest-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xdest)</div>
<div class="line">    xext = dest-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> () - xdest;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> (); <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    yext = source-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; dest-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ydest)</div>
<div class="line">    yext = dest-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> () - ydest;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">                                 <span class="comment">//pixels per byte</span></div>
<div class="line">  srcppb = 8 / source-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();</div>
<div class="line">  shift4 = 4 - dest-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> (); <span class="comment">//for different bpps</span></div>
<div class="line">  shift6 = 6 - dest-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();</div>
<div class="line">                                 <span class="comment">//for grey preserve</span></div>
<div class="line">  colour_shift = 8 - dest-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ();</div>
<div class="line">  white_level = dest-&gt;<a class="code" href="a00187.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();</div>
<div class="line">  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {</div>
<div class="line">    <span class="keywordflow">if</span> (ystart &gt;= ydest)</div>
<div class="line">      yoffset = y;               <span class="comment">//top down</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      yoffset = yext - y - 1;    <span class="comment">//bottom up</span></div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">    <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext; pixel++) {</div>
<div class="line">      <span class="keywordflow">if</span> (*copy &lt; <a class="code" href="a00819.html#afe6424da3124ece686c28e5098738357">FIXED_COLOURS</a> &amp;&amp; preserve_grey)</div>
<div class="line">        *copy = <a class="code" href="a00819.html#acbb702db45cd9f85936cb0cd8b9652bd">grey_scales</a>[*copy] &gt;&gt; colour_shift;</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &lt; <a class="code" href="a00819.html#afe6424da3124ece686c28e5098738357">FIXED_COLOURS</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (*copy == <a class="code" href="a00819.html#a31503e4b0f23137edefe782ad5632878">BLACK_PIX</a>)</div>
<div class="line">          *copy = white_level;   <span class="comment">//black-&gt;white</span></div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          *copy = 0;             <span class="comment">//others-&gt;black</span></div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &gt;= <a class="code" href="a00819.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a> &amp;&amp; *copy &lt; <a class="code" href="a00819.html#a3994c0a53601a0cece4b5ec6f9245d0d">MAX_4BIT</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (shift4 &lt; 0)</div>
<div class="line">          *copy = (*copy - <a class="code" href="a00819.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a>) &lt;&lt; (-shift4);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          *copy = (*copy - <a class="code" href="a00819.html#a1660edd57e10b58c80d61135cfbb605e">MIN_4BIT</a>) &gt;&gt; shift4;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*copy &gt;= <a class="code" href="a00819.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a> &amp;&amp; *copy &lt; <a class="code" href="a00819.html#a8243e83cdb4b1c26cf2fecf744f5b0b4">MAX_6BIT</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (shift6 &lt; 0)</div>
<div class="line">          *copy = (*copy - <a class="code" href="a00819.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a>) &lt;&lt; (-shift6);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          *copy = (*copy - <a class="code" href="a00819.html#ad683ffb2275a912ba4dc7a7b4370e31c">MIN_6BIT</a>) &gt;&gt; shift6;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        *copy = white_level;     <span class="comment">//white the rest</span></div>
<div class="line">      }</div>
<div class="line">      copy++;</div>
<div class="line">    }</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="abb295cc164b06bec36f29e95a78733bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int image_default_resolution = 300</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>"Image resolution dpi" </p>

<p>Definition at line <a class="el" href="a00819_source.html#l00064">64</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b8d1739202f65d59e58cdec119e32197.html">mnt</a></li><li class="navelem"><a class="el" href="dir_5b13d613d053bd10e358ecb54357a5d6.html">data</a></li><li class="navelem"><a class="el" href="dir_6e8f8c7261375e16fe20bf1b1c7c3b87.html">src</a></li><li class="navelem"><a class="el" href="dir_7829ead854c076361e4bcb285111c733.html">tesseract-ocr</a></li><li class="navelem"><a class="el" href="dir_2e71888063c4f2d5d84f5a5c6dfdae15.html">image</a></li><li class="navelem"><a class="el" href="a00820.html">imgs.h</a></li>
    <li class="footer">Generated on Thu Nov 1 2012 20:19:55 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
