<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tesseract: tesseract::TableFinder Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00343.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-static-methods">Static Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">tesseract::TableFinder Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="a00903_source.html">tablefind.h</a>&gt;</code></p>

<p><a href="a01385.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4df3eb2b591c4b8777339e2a300316cf"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a4df3eb2b591c4b8777339e2a300316cf">TableFinder</a> ()</td></tr>
<tr class="memitem:af785f06b1353645cece6b8873a6b78af"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#af785f06b1353645cece6b8873a6b78af">~TableFinder</a> ()</td></tr>
<tr class="memitem:a6dc1406d2cfe1e8c868198d2532e5d2c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a6dc1406d2cfe1e8c868198d2532e5d2c">set_resolution</a> (int resolution)</td></tr>
<tr class="memitem:aacc9d09ee5545c6ba681a73ddfff139b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aacc9d09ee5545c6ba681a73ddfff139b">set_left_to_right_language</a> (bool order)</td></tr>
<tr class="memitem:a2addcdf6528f3a69fa25c94940cdc428"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a2addcdf6528f3a69fa25c94940cdc428">Init</a> (int grid_size, const <a class="el" href="a00183.html">ICOORD</a> &amp;bottom_left, const <a class="el" href="a00183.html">ICOORD</a> &amp;top_right)</td></tr>
<tr class="memitem:a9f4115ada3be71a1106527aa59f31b43"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a9f4115ada3be71a1106527aa59f31b43">InsertCleanPartitions</a> (<a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00373.html">TO_BLOCK</a> *block)</td></tr>
<tr class="memitem:a31d3976698617bc729409e1e0ff0c4ca"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a31d3976698617bc729409e1e0ff0c4ca">LocateTables</a> (<a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00102.html">ColPartitionSet</a> **columns, <a class="el" href="a00995.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *width_cb, const <a class="el" href="a00150.html">FCOORD</a> &amp;reskew)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aecbfe718794e99b2f15a43a7f7350848"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a> () const </td></tr>
<tr class="memitem:a9234ae10ef078a56d67d6ceb91050b2e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a9234ae10ef078a56d67d6ceb91050b2e">gridwidth</a> () const </td></tr>
<tr class="memitem:a704fbe9cb0edeaa969bb0cc2bd1f9dbd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a> () const </td></tr>
<tr class="memitem:afaa3f28f4a9e645ded90e9f74016b217"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="a00183.html">ICOORD</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a> () const </td></tr>
<tr class="memitem:af994bc64825f51944fa63a0fc61b4e13"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="a00183.html">ICOORD</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a> () const </td></tr>
<tr class="memitem:a1d45a058db096f6040af24af402b2042"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a> (int x, int y, const char *window_name)</td></tr>
<tr class="memitem:ad312e62064f4964ac0eb6010d002b9cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ad312e62064f4964ac0eb6010d002b9cd">InsertTextPartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:a216c040efc8dff584076cc324240c524"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:a818a95d0b0bdb619e0170dac27426942"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a818a95d0b0bdb619e0170dac27426942">InsertLeaderPartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:aa7a21d1842c6592372eb69b49b2010a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aa7a21d1842c6592372eb69b49b2010a2">InsertRulingPartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:af310b33b86e951125b49e4ac1df2bb68"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#af310b33b86e951125b49e4ac1df2bb68">InsertImagePartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:a34950c2f035a25bb75f29a5ab51fe191"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a34950c2f035a25bb75f29a5ab51fe191">SplitAndInsertFragmentedTextPartition</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:a534bca2a3fa57718c0bdf18b6af69af6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a> (const <a class="el" href="a00100.html">ColPartition</a> &amp;part) const </td></tr>
<tr class="memitem:aec9b60ffceb19f3f82186b60c29b7f51"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aec9b60ffceb19f3f82186b60c29b7f51">AllowBlob</a> (const <a class="el" href="a00055.html">BLOBNBOX</a> &amp;blob) const </td></tr>
<tr class="memitem:a81003bea37eced8d746035bd565b9c56"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a> (ColSegment_LIST *segments, <a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *col_seg_grid)</td></tr>
<tr class="memitem:a5dfc53ecb81ee804476fd04f32434e6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a5dfc53ecb81ee804476fd04f32434e6c">InitializePartitions</a> (<a class="el" href="a00102.html">ColPartitionSet</a> **all_columns)</td></tr>
<tr class="memitem:ad6c2c9a0fdec2c14ef0ddc63a5d0217d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ad6c2c9a0fdec2c14ef0ddc63a5d0217d">SetVerticalSpacing</a> (<a class="el" href="a00100.html">ColPartition</a> *part)</td></tr>
<tr class="memitem:a51c670936d76fcdf3ed1a0e2730a54c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a> (<a class="el" href="a00101.html">ColPartitionGrid</a> *grid)</td></tr>
<tr class="memitem:a8be2bff4c272c65c0c4e896037620381"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a8be2bff4c272c65c0c4e896037620381">set_global_median_xheight</a> (int xheight)</td></tr>
<tr class="memitem:a793bbaf0945bb838b9c934899c4de87a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a793bbaf0945bb838b9c934899c4de87a">set_global_median_blob_width</a> (int width)</td></tr>
<tr class="memitem:aa5644866b8727722deec53b73c4d7831"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aa5644866b8727722deec53b73c4d7831">set_global_median_ledding</a> (int ledding)</td></tr>
<tr class="memitem:acfb82ae105ee34d1360dd0c5dc8487ff"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#acfb82ae105ee34d1360dd0c5dc8487ff">FindNeighbors</a> ()</td></tr>
<tr class="memitem:a7f29dd0a40d57b00d4868ff1c656dd6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a7f29dd0a40d57b00d4868ff1c656dd6a">MarkTablePartitions</a> ()</td></tr>
<tr class="memitem:aeb0fc1badeb2def5cf69aca53392c89c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aeb0fc1badeb2def5cf69aca53392c89c">MarkPartitionsUsingLocalInformation</a> ()</td></tr>
<tr class="memitem:a298f9f253a3fd3109133e6ea40842bc0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a298f9f253a3fd3109133e6ea40842bc0">HasWideOrNoInterWordGap</a> (<a class="el" href="a00100.html">ColPartition</a> *part) const </td></tr>
<tr class="memitem:a6436ad4194a19a38669a89b603c27801"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a6436ad4194a19a38669a89b603c27801">HasLeaderAdjacent</a> (const <a class="el" href="a00100.html">ColPartition</a> &amp;part)</td></tr>
<tr class="memitem:a34734ff8fb23f8bfb88dc60e06cb2c17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a> ()</td></tr>
<tr class="memitem:a5c5163764f1df032be42c7cf953c2ade"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a5c5163764f1df032be42c7cf953c2ade">FilterParagraphEndings</a> ()</td></tr>
<tr class="memitem:a28ab83ed3531ee5fd7c5608c2ec22de4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a28ab83ed3531ee5fd7c5608c2ec22de4">FilterHeaderAndFooter</a> ()</td></tr>
<tr class="memitem:ae3d5e2e4c894d4514717d0593792226d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ae3d5e2e4c894d4514717d0593792226d">SmoothTablePartitionRuns</a> ()</td></tr>
<tr class="memitem:a7869fe256b237ad13171f13c8a6cc449"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a7869fe256b237ad13171f13c8a6cc449">GetColumnBlocks</a> (<a class="el" href="a00102.html">ColPartitionSet</a> **columns, ColSegment_LIST *col_segments)</td></tr>
<tr class="memitem:a41bef91f2096c4a3bbe486b4d304bddb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a41bef91f2096c4a3bbe486b4d304bddb">GroupColumnBlocks</a> (ColSegment_LIST *current_segments, ColSegment_LIST *col_segments)</td></tr>
<tr class="memitem:a4caabd9ca4346514d60c7dce8400a909"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a4caabd9ca4346514d60c7dce8400a909">ConsecutiveBoxes</a> (const <a class="el" href="a00347.html">TBOX</a> &amp;b1, const <a class="el" href="a00347.html">TBOX</a> &amp;b2)</td></tr>
<tr class="memitem:ac3e8a6d03fcaf027677919f284af6500"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ac3e8a6d03fcaf027677919f284af6500">SetColumnsType</a> (ColSegment_LIST *col_segments)</td></tr>
<tr class="memitem:a7a3319f9a1eab06ef83a6e3f2df7e8d2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a7a3319f9a1eab06ef83a6e3f2df7e8d2">GridMergeColumnBlocks</a> ()</td></tr>
<tr class="memitem:a30f071829b47f7bd9afdd4ef819f582d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a30f071829b47f7bd9afdd4ef819f582d">GetTableColumns</a> (ColSegment_LIST *table_columns)</td></tr>
<tr class="memitem:a581a66fbdfdd0da5c3679a31f8d7944e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a581a66fbdfdd0da5c3679a31f8d7944e">GetTableRegions</a> (ColSegment_LIST *table_columns, ColSegment_LIST *table_regions)</td></tr>
<tr class="memitem:a9298cd74b3e81315195a547a890752e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a> ()</td></tr>
<tr class="memitem:a0fdb92fd4cf6c71db61a8bf17f793226"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a0fdb92fd4cf6c71db61a8bf17f793226">BelongToOneTable</a> (const <a class="el" href="a00347.html">TBOX</a> &amp;box1, const <a class="el" href="a00347.html">TBOX</a> &amp;box2)</td></tr>
<tr class="memitem:a2af79bdd1c4edbf03f4d2a15ee203be8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a2af79bdd1c4edbf03f4d2a15ee203be8">AdjustTableBoundaries</a> ()</td></tr>
<tr class="memitem:a11d07831ff21f641f54e51b42a446a26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a11d07831ff21f641f54e51b42a446a26">GrowTableBox</a> (const <a class="el" href="a00347.html">TBOX</a> &amp;table_box, <a class="el" href="a00347.html">TBOX</a> *result_box)</td></tr>
<tr class="memitem:ac694dfdfaa119c35c337dd342073debf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ac694dfdfaa119c35c337dd342073debf">GrowTableToIncludePartials</a> (const <a class="el" href="a00347.html">TBOX</a> &amp;table_box, const <a class="el" href="a00347.html">TBOX</a> &amp;search_range, <a class="el" href="a00347.html">TBOX</a> *result_box)</td></tr>
<tr class="memitem:a2f2d85d386d90f680f518bf9e6496411"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a2f2d85d386d90f680f518bf9e6496411">GrowTableToIncludeLines</a> (const <a class="el" href="a00347.html">TBOX</a> &amp;table_box, const <a class="el" href="a00347.html">TBOX</a> &amp;search_range, <a class="el" href="a00347.html">TBOX</a> *result_box)</td></tr>
<tr class="memitem:a6fcf84582f86676bf93e6e49d08dc64a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a6fcf84582f86676bf93e6e49d08dc64a">HLineBelongsToTable</a> (const <a class="el" href="a00100.html">ColPartition</a> &amp;part, const <a class="el" href="a00347.html">TBOX</a> &amp;table_box)</td></tr>
<tr class="memitem:a265d046f7651f73362a3aa5f3c9453fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a265d046f7651f73362a3aa5f3c9453fd">IncludeLeftOutColumnHeaders</a> (<a class="el" href="a00347.html">TBOX</a> *table_box)</td></tr>
<tr class="memitem:ad1d77425898bfe8808255b9a472663ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a> ()</td></tr>
<tr class="memitem:a89d4134c1260f74cd0b0f6cbecfc2545"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a89d4134c1260f74cd0b0f6cbecfc2545">GapInXProjection</a> (int *xprojection, int length)</td></tr>
<tr class="memitem:a647fe056ae6bb33cc8989f08aac5172f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a> ()</td></tr>
<tr class="memitem:a0778d0e3d6bc52330704d1143a73f90a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a> (<a class="el" href="a00294.html">ScrollView</a> *win, ColSegment_LIST *cols, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color)</td></tr>
<tr class="memitem:aea205753ca3f6e11043801843025e59e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a> (<a class="el" href="a00294.html">ScrollView</a> *win, <a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> text_color, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> table_color)</td></tr>
<tr class="memitem:a5bed5a7f636ee305aacc4818933cf3da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a5bed5a7f636ee305aacc4818933cf3da">DisplayColPartitions</a> (<a class="el" href="a00294.html">ScrollView</a> *win, <a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> default_color)</td></tr>
<tr class="memitem:ae38774700a97b1690f1530d77432a762"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ae38774700a97b1690f1530d77432a762">DisplayColPartitionConnections</a> (<a class="el" href="a00294.html">ScrollView</a> *win, <a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> default_color)</td></tr>
<tr class="memitem:a7a179e84686323b5fd0d93cbb159bb6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a7a179e84686323b5fd0d93cbb159bb6d">DisplayColSegmentGrid</a> (<a class="el" href="a00294.html">ScrollView</a> *win, <a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *grid, <a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color)</td></tr>
<tr class="memitem:abbd932c16cdfa0cf35f9ef93e2e87f49"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#abbd932c16cdfa0cf35f9ef93e2e87f49">WriteToPix</a> (const <a class="el" href="a00150.html">FCOORD</a> &amp;reskew)</td></tr>
<tr class="memitem:a1856836a1386196d5784244b4a1aa2d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a1856836a1386196d5784244b4a1aa2d0">MakeTableBlocks</a> (<a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00102.html">ColPartitionSet</a> **columns, <a class="el" href="a00995.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *width_cb)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-static-methods"></a>
Static Protected Member Functions</h2></td></tr>
<tr class="memitem:aa4b52f48d63d4881da34b7d84932e84d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aa4b52f48d63d4881da34b7d84932e84d">SetPartitionSpacings</a> (<a class="el" href="a00101.html">ColPartitionGrid</a> *grid, <a class="el" href="a00102.html">ColPartitionSet</a> **all_columns)</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a945f735c68a1f3fe672e759828f36f71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a></td></tr>
<tr class="memitem:ab66e5e7382edbd8bc260fd5bca4f2914"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a></td></tr>
<tr class="memitem:a761fd57460670c531131bd2a77227911"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a></td></tr>
<tr class="memitem:a1d5828695e17f10f2d4140476c9f34fd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a></td></tr>
<tr class="memitem:aec2f605cdeff11cb17d4cb9aba585b1b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00101.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a></td></tr>
<tr class="memitem:a7fddea88c90c15d996f36963481b81cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00101.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a></td></tr>
<tr class="memitem:ad2da282ac5f2a2d4efbc463d80c7113c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00101.html">ColPartitionGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a></td></tr>
<tr class="memitem:a94f0570afcc478097685ccdb59928903"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a></td></tr>
<tr class="memitem:aba8f5765a3c7bbe13bee05b94308fec1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a></td></tr>
<tr class="memitem:a528595d792a34a2a361670aced196165"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00343.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock">
<p>Definition at line <a class="el" href="a00903_source.html#l00131">131</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4df3eb2b591c4b8777339e2a300316cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::TableFinder::TableFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00168">168</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">    : <a class="code" href="a00343.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a>(0),</div>
<div class="line">      <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>(0),</div>
<div class="line">      <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>(0),</div>
<div class="line">      <a class="code" href="a00343.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a>(0),</div>
<div class="line">      <a class="code" href="a00343.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a>(<span class="keyword">true</span>) {</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af785f06b1353645cece6b8873a6b78af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">tesseract::TableFinder::~TableFinder </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00176">176</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                          {</div>
<div class="line">  <span class="comment">// ColPartitions and ColSegments created by this class for storage in grids</span></div>
<div class="line">  <span class="comment">// need to be deleted explicitly.</span></div>
<div class="line">  <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00043.html#aa3f84b8f684c71394335a5a4f17c90be">ClearGridData</a>(&amp;DeleteObject&lt;ColPartition&gt;);</div>
<div class="line">  <a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.<a class="code" href="a00043.html#aa3f84b8f684c71394335a5a4f17c90be">ClearGridData</a>(&amp;DeleteObject&lt;ColPartition&gt;);</div>
<div class="line">  <a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.<a class="code" href="a00043.html#aa3f84b8f684c71394335a5a4f17c90be">ClearGridData</a>(&amp;DeleteObject&lt;ColPartition&gt;);</div>
<div class="line">  <a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.<a class="code" href="a00043.html#aa3f84b8f684c71394335a5a4f17c90be">ClearGridData</a>(&amp;DeleteObject&lt;ColSegment&gt;);</div>
<div class="line">  <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#aa3f84b8f684c71394335a5a4f17c90be">ClearGridData</a>(&amp;DeleteObject&lt;ColSegment&gt;);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a2af79bdd1c4edbf03f4d2a15ee203be8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::AdjustTableBoundaries </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01485">1485</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="comment">// Iterate the table regions in the grid</span></div>
<div class="line">  ColSegment_CLIST adjusted_tables;</div>
<div class="line">  ColSegment_C_IT it(&amp;adjusted_tables);</div>
<div class="line">  <a class="code" href="a00995.html#ac7f2f25bfb4914e691db80a6b523c703">ColSegmentGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* table = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((table = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; table_box = table-&gt;bounding_box();</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> grown_box = table_box;</div>
<div class="line">    <a class="code" href="a00343.html#a11d07831ff21f641f54e51b42a446a26">GrowTableBox</a>(table_box, &amp;grown_box);</div>
<div class="line">    <span class="comment">// To prevent a table from expanding again, do not insert the</span></div>
<div class="line">    <span class="comment">// modified box back to the grid. Instead move it to a list and</span></div>
<div class="line">    <span class="comment">// and remove it from the grid. The list is moved later back to the grid.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!grown_box.<a class="code" href="a00347.html#a7c6996aea1eb6be07b1d6634bf36cfd6">null_box</a>()) {</div>
<div class="line">      ColSegment* col = <span class="keyword">new</span> ColSegment();</div>
<div class="line">      col-&gt;InsertBox(grown_box);</div>
<div class="line">      it.add_after_then_move(col);</div>
<div class="line">    }</div>
<div class="line">    gsearch.RemoveBBox();</div>
<div class="line">    <span class="keyword">delete</span> table;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// clear table grid to move final tables in it</span></div>
<div class="line">  <span class="comment">// TODO(nbeato): table_grid_ should already be empty. The above loop</span></div>
<div class="line">  <span class="comment">// removed everything. Maybe just assert it is empty?</span></div>
<div class="line">  <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a0b373075bdfda41719d6fb9a64bcfee0">Clear</a>();</div>
<div class="line">  it.move_to_first();</div>
<div class="line">  <span class="comment">// move back final tables to table_grid_</span></div>
<div class="line">  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">    ColSegment* seg = it.extract();</div>
<div class="line">    <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aec9b60ffceb19f3f82186b60c29b7f51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::AllowBlob </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00055.html">BLOBNBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>blob</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00502">502</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = blob.<a class="code" href="a00055.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>();</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kHeightRequired = <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="a00995.html#a0de56cf05a1e8a1aee7e6bcd81e34742">kAllowBlobHeight</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kWidthRequired = <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> * <a class="code" href="a00995.html#aa86b1f68578cb7c0b834b2a137376ed7">kAllowBlobWidth</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> median_area = <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kAreaRequired = median_area * <a class="code" href="a00995.html#a714f54e357a15f2578470c0430a9ec5f">kAllowBlobArea</a>;</div>
<div class="line">  <span class="comment">// Keep comparisons strictly greater to disallow 0!</span></div>
<div class="line">  <span class="keywordflow">return</span> box.<a class="code" href="a00347.html#a8379d4bbc72bdbb1f069fc14790e632d">height</a>() &gt; kHeightRequired &amp;&amp;</div>
<div class="line">         box.<a class="code" href="a00347.html#af95494a2ccacc70cc2b83820b2948619">width</a>() &gt; kWidthRequired &amp;&amp;</div>
<div class="line">         box.<a class="code" href="a00347.html#a46fca3df91dc271b30b69531e9d8178a">area</a>() &gt; kAreaRequired;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a534bca2a3fa57718c0bdf18b6af69af6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::AllowTextPartition </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00100.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00489">489</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                   {</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kHeightRequired = <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="a00995.html#a9b013c09ae4bd53f0b147f3945ae9c8c">kAllowTextHeight</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kWidthRequired = <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> * <a class="code" href="a00995.html#a92f436872c90049797ee7b1356f50133">kAllowTextWidth</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> median_area = <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kAreaPerBlobRequired = median_area * <a class="code" href="a00995.html#a744c12bd96933e697e5afff35c492dc0">kAllowTextArea</a>;</div>
<div class="line">  <span class="comment">// Keep comparisons strictly greater to disallow 0!</span></div>
<div class="line">  <span class="keywordflow">return</span> part.median_size() &gt; kHeightRequired &amp;&amp;</div>
<div class="line">         part.median_width() &gt; kWidthRequired &amp;&amp;</div>
<div class="line">         part.bounding_box().area() &gt; kAreaPerBlobRequired * part.boxes_count();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0fdb92fd4cf6c71db61a8bf17f793226"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::BelongToOneTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>box1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>box2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01444">1444</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                     {</div>
<div class="line">  <span class="comment">// Check the obvious case. Most likely not true because overlapping boxes</span></div>
<div class="line">  <span class="comment">// should already be merged, but seems like a good thing to do in case things</span></div>
<div class="line">  <span class="comment">// change.</span></div>
<div class="line">  <span class="keywordflow">if</span> (box1.<a class="code" href="a00347.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box2))</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  <span class="comment">// Check for ColPartitions spanning both table regions</span></div>
<div class="line">  <a class="code" href="a00347.html">TBOX</a> bbox = box1.<a class="code" href="a00347.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(box2);</div>
<div class="line">  <span class="comment">// Start a rect search on bbox</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">      rectsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  rectsearch.StartRectSearch(bbox);</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();</div>
<div class="line">    <span class="comment">// return true if a colpartition spanning both table regions is found</span></div>
<div class="line">    <span class="keywordflow">if</span> (part_box.<a class="code" href="a00347.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box1) &amp;&amp; part_box.<a class="code" href="a00347.html#adcc7d2858ccb61cd715dbcff32bd5582">overlap</a>(box2))</div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afaa3f28f4a9e645ded90e9f74016b217"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="a00183.html">ICOORD</a> &amp; tesseract::TableFinder::bleft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00387">387</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                       {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00178.html#ad20b2cb8eb2bf52871d5260c04949cce">bleft</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4caabd9ca4346514d60c7dce8400a909"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::ConsecutiveBoxes </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>b1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>b2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00568">568</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                 {</div>
<div class="line">  <span class="keywordtype">int</span> x_margin = 20;</div>
<div class="line">  <span class="keywordtype">int</span> y_margin = 5;</div>
<div class="line">  <span class="keywordflow">return</span> (abs(b1.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() - b2.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>()) &lt; x_margin) &amp;&amp;</div>
<div class="line">      (abs(b1.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - b2.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) &lt; x_margin) &amp;&amp;</div>
<div class="line">      (abs(b1.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>()-b2.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) &lt; y_margin ||</div>
<div class="line">       abs(b2.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>()-b1.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) &lt; y_margin);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad1d77425898bfe8808255b9a472663ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DeleteSingleColumnTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01702">1702</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                           {</div>
<div class="line">  <span class="keywordtype">int</span> page_width = <a class="code" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="a00183.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>() - <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>();</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(page_width &gt; 0);</div>
<div class="line">  <span class="comment">// create an integer array to hold projection on x-axis</span></div>
<div class="line">  <span class="keywordtype">int</span>* table_xprojection = <span class="keyword">new</span> <span class="keywordtype">int</span>[page_width];</div>
<div class="line">  <span class="comment">// Iterate through all tables in the table grid</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">      table_search(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  table_search.StartFullSearch();</div>
<div class="line">  ColSegment* table;</div>
<div class="line">  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> table_box = table-&gt;bounding_box();</div>
<div class="line">    <span class="comment">// reset the projection array</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; page_width; i++) {</div>
<div class="line">      table_xprojection[i] = 0;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Start a rect search on table_box</span></div>
<div class="line">    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">        rectsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">    rectsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">    rectsearch.StartRectSearch(table_box);</div>
<div class="line">    ColPartition* part;</div>
<div class="line">    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (!part-&gt;IsTextType())</div>
<div class="line">        <span class="keywordflow">continue</span>;  <span class="comment">// Do not consider non-text partitions</span></div>
<div class="line">      <span class="keywordflow">if</span> (part-&gt;flow() == <a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)</div>
<div class="line">        <span class="keywordflow">continue</span>;  <span class="comment">// Assume leaders are in tables</span></div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> part_box = part-&gt;bounding_box();</div>
<div class="line">      <span class="comment">// Do not consider partitions partially covered by the table</span></div>
<div class="line">      <span class="keywordflow">if</span> (part_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &lt; <a class="code" href="a00995.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>)</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();</div>
<div class="line">      BLOBNBOX_C_IT pit(part_boxes);</div>
<div class="line"></div>
<div class="line">      <span class="comment">// Make sure overlapping blobs don&#39;t artificially inflate the number</span></div>
<div class="line">      <span class="comment">// of rows in the table. This happens frequently with things such as</span></div>
<div class="line">      <span class="comment">// decimals and split characters. Do this by assuming the column</span></div>
<div class="line">      <span class="comment">// partition is sorted mostly left to right and just clip</span></div>
<div class="line">      <span class="comment">// bounding boxes by the previous box&#39;s extent.</span></div>
<div class="line">      <span class="keywordtype">int</span> next_position_to_write = 0;</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">for</span> (pit.mark_cycle_pt(); !pit.cycled_list(); pit.forward()) {</div>
<div class="line">        <a class="code" href="a00055.html">BLOBNBOX</a> *pblob = pit.data();</div>
<div class="line">        <span class="comment">// ignore blob height for the purpose of projection since we</span></div>
<div class="line">        <span class="comment">// are only interested in finding valleys</span></div>
<div class="line">        <span class="keywordtype">int</span> xstart = pblob-&gt;<a class="code" href="a00055.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">        <span class="keywordtype">int</span> xend = pblob-&gt;<a class="code" href="a00055.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line"></div>
<div class="line">        xstart = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(xstart, next_position_to_write);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = xstart; i &lt; xend; i++)</div>
<div class="line">          table_xprojection[i - <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a59722a47c540007c58a539f0e35b3f33" title="access function">x</a>()]++;</div>
<div class="line">        next_position_to_write = xend;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Find largest valley between two reasonable peaks in the table</span></div>
<div class="line">    <span class="keywordflow">if</span> (!<a class="code" href="a00343.html#a89d4134c1260f74cd0b0f6cbecfc2545">GapInXProjection</a>(table_xprojection, page_width)) {</div>
<div class="line">      table_search.RemoveBBox();</div>
<div class="line">      <span class="keyword">delete</span> table;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span>[] table_xprojection;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae38774700a97b1690f1530d77432a762"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitionConnections </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>default_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01949">1949</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                            {</div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(grid);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = part-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> left_x = box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    <span class="keywordtype">int</span> right_x = box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line">    <span class="keywordtype">int</span> top_y = box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line"></div>
<div class="line">    ColPartition* upper_part = part-&gt;nearest_neighbor_above();</div>
<div class="line">    <span class="keywordflow">if</span> (upper_part) {</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> upper_box = upper_part-&gt;bounding_box();</div>
<div class="line">      <span class="keywordtype">int</span> mid_x = (left_x + right_x) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> mid_y = (top_y + bottom_y) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> other_x = (upper_box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() + upper_box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> other_y = (upper_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + upper_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) / 2;</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#a2ba16f17fc401bb28be1a08160207e45">Line</a>(mid_x, mid_y, other_x, other_y);</div>
<div class="line">    }</div>
<div class="line">    ColPartition* lower_part = part-&gt;nearest_neighbor_below();</div>
<div class="line">    <span class="keywordflow">if</span> (lower_part) {</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> lower_box = lower_part-&gt;bounding_box();</div>
<div class="line">      <span class="keywordtype">int</span> mid_x = (left_x + right_x) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> mid_y = (top_y + bottom_y) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> other_x = (lower_box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() + lower_box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) / 2;</div>
<div class="line">      <span class="keywordtype">int</span> other_y = (lower_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + lower_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>()) / 2;</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);</div>
<div class="line">      win-&gt;<a class="code" href="a00294.html#a2ba16f17fc401bb28be1a08160207e45">Line</a>(mid_x, mid_y, other_x, other_y);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  win-&gt;<a class="code" href="a00294.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea205753ca3f6e11043801843025e59e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>text_color</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>table_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01915">1915</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                    {</div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a> color = default_color;</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(grid);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    color = default_color;</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      color = table_color;</div>
<div class="line"></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = part-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> left_x = box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    <span class="keywordtype">int</span> right_x = box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line">    <span class="keywordtype">int</span> top_y = box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);</div>
<div class="line">  }</div>
<div class="line">  win-&gt;<a class="code" href="a00294.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5bed5a7f636ee305aacc4818933cf3da"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>default_color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01943">1943</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(win, grid, default_color, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a61dec9bc0aaf1d527a731b2a6ce055c8">ScrollView::YELLOW</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a179e84686323b5fd0d93cbb159bb6d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColSegmentGrid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01890">1890</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                {</div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">    gsearch(grid);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* seg = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = seg-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> left_x = box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    <span class="keywordtype">int</span> right_x = box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line">    <span class="keywordtype">int</span> top_y = box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);</div>
<div class="line">  }</div>
<div class="line">  win-&gt;<a class="code" href="a00294.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0778d0e3d6bc52330704d1143a73f90a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::DisplayColSegments </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00294.html">ScrollView</a> *&#160;</td>
          <td class="paramname"><em>win</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>cols</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00294.html#a100504544a5423a94222149ee9ed0fe8">ScrollView::Color</a>&#160;</td>
          <td class="paramname"><em>color</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01870">1870</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                            {</div>
<div class="line"><span class="preprocessor">#ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  win-&gt;<a class="code" href="a00294.html#a79855c525ec660b452382e9813d2edb5">Pen</a>(color);</div>
<div class="line">  win-&gt;<a class="code" href="a00294.html#ad5f03af259325c42eaaffa843cd1fdde">Brush</a>(<a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a77673d8f27617bcfe50a6ebdd81e8c79">ScrollView::NONE</a>);</div>
<div class="line">  ColSegment_IT it(segments);</div>
<div class="line">  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">    ColSegment* col = it.data();</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = col-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> left_x = box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    <span class="keywordtype">int</span> right_x = box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line">    <span class="keywordtype">int</span> top_y = box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">    <span class="keywordtype">int</span> bottom_y = box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>();</div>
<div class="line">    win-&gt;<a class="code" href="a00294.html#ac2a8fdf5d37967ea4a298dc092b6ed0e">Rectangle</a>(left_x, bottom_y, right_x, top_y);</div>
<div class="line">  }</div>
<div class="line">  win-&gt;<a class="code" href="a00294.html#a609e2f95d6421deb558244f5d45cf25a">UpdateWindow</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a34734ff8fb23f8bfb88dc60e06cb2c17"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterFalseAlarms </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00988">988</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                    {</div>
<div class="line">  <a class="code" href="a00343.html#a5c5163764f1df032be42c7cf953c2ade">FilterParagraphEndings</a>();</div>
<div class="line">  <a class="code" href="a00343.html#a28ab83ed3531ee5fd7c5608c2ec22de4">FilterHeaderAndFooter</a>();</div>
<div class="line">  <span class="comment">// TODO(nbeato): Fully justified text as non-table?</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28ab83ed3531ee5fd7c5608c2ec22de4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterHeaderAndFooter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01074">1074</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="comment">// Consider top-most text colpartition as header and bottom most as footer</span></div>
<div class="line">  ColPartition* header = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  ColPartition* footer = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordtype">int</span> max_top = <a class="code" href="a00577.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a>;</div>
<div class="line">  <span class="keywordtype">int</span> min_bottom = <a class="code" href="a00577.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>;</div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (!part-&gt;IsTextType())</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span></div>
<div class="line">    <span class="keywordtype">int</span> top = part-&gt;bounding_box().top();</div>
<div class="line">    <span class="keywordtype">int</span> bottom = part-&gt;bounding_box().bottom();</div>
<div class="line">    <span class="keywordflow">if</span> (top &gt; max_top) {</div>
<div class="line">      max_top = top;</div>
<div class="line">      header = part;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (bottom &lt; min_bottom) {</div>
<div class="line">      min_bottom = bottom;</div>
<div class="line">      footer = part;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (header)</div>
<div class="line">    header-&gt;clear_table_type();</div>
<div class="line">  <span class="keywordflow">if</span> (footer)</div>
<div class="line">    footer-&gt;clear_table_type();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5c5163764f1df032be42c7cf953c2ade"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FilterParagraphEndings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00994">994</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                         {</div>
<div class="line">  <span class="comment">// Detect last line of paragraph</span></div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only table partitions</span></div>
<div class="line"></div>
<div class="line">    <span class="comment">// Paragraph ending should have flowing text above it.</span></div>
<div class="line">    ColPartition* upper_part = part-&gt;nearest_neighbor_above();</div>
<div class="line">    <span class="keywordflow">if</span> (!upper_part)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (upper_part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677faaa63d8d8a99ddc2b3957f8e8787b4eca">PT_FLOWING_TEXT</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (upper_part-&gt;bounding_box().width() &lt;</div>
<div class="line">        2 * part-&gt;bounding_box().width())</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// Check if its the last line of a paragraph.</span></div>
<div class="line">    <span class="comment">// In most cases, a paragraph ending should be left-aligned to text line</span></div>
<div class="line">    <span class="comment">// above it. Sometimes, it could be a 2 line paragraph, in which case</span></div>
<div class="line">    <span class="comment">// the line above it is indented.</span></div>
<div class="line">    <span class="comment">// To account for that, check if the partition center is to</span></div>
<div class="line">    <span class="comment">// the left of the one above it.</span></div>
<div class="line">    <span class="keywordtype">int</span> mid = (part-&gt;bounding_box().left() + part-&gt;bounding_box().right()) / 2;</div>
<div class="line">    <span class="keywordtype">int</span> upper_mid = (upper_part-&gt;bounding_box().left() +</div>
<div class="line">                     upper_part-&gt;bounding_box().right()) / 2;</div>
<div class="line">    <span class="keywordtype">int</span> current_spacing = 0;  <span class="comment">// spacing of the current line to margin</span></div>
<div class="line">    <span class="keywordtype">int</span> upper_spacing = 0;    <span class="comment">// spacing of the previous line to the margin</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a>) {</div>
<div class="line">      <span class="comment">// Left to right languages, use mid - left to figure out the distance</span></div>
<div class="line">      <span class="comment">// the middle is from the left margin.</span></div>
<div class="line">      <span class="keywordtype">int</span> left = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(part-&gt;bounding_box().left(),</div>
<div class="line">                     upper_part-&gt;bounding_box().left());</div>
<div class="line">      current_spacing = mid - left;</div>
<div class="line">      upper_spacing = upper_mid - left;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="comment">// Right to left languages, use right - mid to figure out the distance</span></div>
<div class="line">      <span class="comment">// the middle is from the right margin.</span></div>
<div class="line">      <span class="keywordtype">int</span> right = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(part-&gt;bounding_box().right(),</div>
<div class="line">                      upper_part-&gt;bounding_box().right());</div>
<div class="line">      current_spacing = right - mid;</div>
<div class="line">      upper_spacing = right - upper_mid;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (current_spacing * <a class="code" href="a00995.html#ac6a1849ed370a22bb4a2b4a94ca1634c">kParagraphEndingPreviousLineRatio</a> &gt; upper_spacing)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Paragraphs should have similar fonts.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!part-&gt;MatchingSizes(*upper_part) ||</div>
<div class="line">        !part-&gt;MatchingStrokeWidth(*upper_part, <a class="code" href="a00995.html#a477fb9ba9844da49a285692762b117d9">kStrokeWidthFractionalTolerance</a>,</div>
<div class="line">                                   <a class="code" href="a00995.html#a7dc74940f73222c81918e8701c301516">kStrokeWidthConstantTolerance</a>)) {</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The last line of a paragraph should be left aligned.</span></div>
<div class="line">    <span class="comment">// TODO(nbeato): This would be untrue if the text was right aligned.</span></div>
<div class="line">    <span class="comment">// How often is that?</span></div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;space_to_left() &gt;</div>
<div class="line">        <a class="code" href="a00995.html#a1b76b5479d00c222f8a17e22d317b770">kMaxParagraphEndingLeftSpaceMultiple</a> * part-&gt;median_size())</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// The line above it should be right aligned (assuming justified format).</span></div>
<div class="line">    <span class="comment">// Since we can&#39;t assume justified text, we compare whitespace to text.</span></div>
<div class="line">    <span class="comment">// The above line should have majority spanning text (or the current</span></div>
<div class="line">    <span class="comment">// line could have fit on the previous line). So compare</span></div>
<div class="line">    <span class="comment">// whitespace to text.</span></div>
<div class="line">    <span class="keywordflow">if</span> (upper_part-&gt;bounding_box().width() &lt;</div>
<div class="line">        <a class="code" href="a00995.html#a59fff4582ea32f8a8661fbc20a3ab947">kMinParagraphEndingTextToWhitespaceRatio</a> * upper_part-&gt;space_to_right())</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Ledding above the line should be less than ledding below</span></div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;space_above() &gt;= part-&gt;space_below() ||</div>
<div class="line">        part-&gt;space_above() &gt; 2 * <a class="code" href="a00343.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If all checks failed, it is probably text.</span></div>
<div class="line">    part-&gt;clear_table_type();</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="acfb82ae105ee34d1360dd0c5dc8487ff"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::FindNeighbors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00766">766</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// TODO(nbeato): Rename this function, meaning is different now.</span></div>
<div class="line">    <span class="comment">// IT is finding nearest neighbors its own way</span></div>
<div class="line">    <span class="comment">//SetVerticalSpacing(part);</span></div>
<div class="line"></div>
<div class="line">    ColPartition* upper = part-&gt;SingletonPartner(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (upper)</div>
<div class="line">      part-&gt;set_nearest_neighbor_above(upper);</div>
<div class="line"></div>
<div class="line">    ColPartition* lower = part-&gt;SingletonPartner(<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (lower)</div>
<div class="line">      part-&gt;set_nearest_neighbor_below(lower);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a89d4134c1260f74cd0b0f6cbecfc2545"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::GapInXProjection </td>
          <td>(</td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>xprojection</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01767">1767</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  <span class="comment">// Find peak value of the histogram</span></div>
<div class="line">  <span class="keywordtype">int</span> peak_value = 0;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length; i++) {</div>
<div class="line">    <span class="keywordflow">if</span> (xprojection[i] &gt; peak_value) {</div>
<div class="line">      peak_value = xprojection[i];</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Peak value represents the maximum number of horizontally</span></div>
<div class="line">  <span class="comment">// overlapping colpartitions, so this can be considered as the</span></div>
<div class="line">  <span class="comment">// number of rows in the table</span></div>
<div class="line">  <span class="keywordflow">if</span> (peak_value &lt; <a class="code" href="a00995.html#a4947294f7e711f5f1713df9de000b1b8">kMinRowsInTable</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  <span class="keywordtype">double</span> projection_threshold = <a class="code" href="a00995.html#ae12e73878098046ae28b0d54408359f7">kSmallTableProjectionThreshold</a> * peak_value;</div>
<div class="line">  <span class="keywordflow">if</span> (peak_value &gt;= <a class="code" href="a00995.html#adf7c67274b1cdc63e4afeb2500796de7">kLargeTableRowCount</a>)</div>
<div class="line">    projection_threshold = <a class="code" href="a00995.html#a39b11305adc922233ab775b31d94b6bb">kLargeTableProjectionThreshold</a> * peak_value;</div>
<div class="line">  <span class="comment">// Threshold the histogram</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; length; i++) {</div>
<div class="line">    xprojection[i] = (xprojection[i] &gt;= projection_threshold) ? 1 : 0;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Find the largest run of zeros between two ones</span></div>
<div class="line">  <span class="keywordtype">int</span> largest_gap = 0;</div>
<div class="line">  <span class="keywordtype">int</span> run_start = -1;</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; length; i++) {</div>
<div class="line">    <span class="comment">// detect start of a run of zeros</span></div>
<div class="line">    <span class="keywordflow">if</span> (xprojection[i - 1] &amp;&amp; !xprojection[i]) {</div>
<div class="line">      run_start = i;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// detect end of a run of zeros and update the value of largest gap</span></div>
<div class="line">    <span class="keywordflow">if</span> (run_start != -1 &amp;&amp; !xprojection[i - 1] &amp;&amp; xprojection[i]) {</div>
<div class="line">      <span class="keywordtype">int</span> gap = i - run_start;</div>
<div class="line">      <span class="keywordflow">if</span> (gap &gt; largest_gap)</div>
<div class="line">        largest_gap = gap;</div>
<div class="line">      run_start = -1;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> largest_gap &gt; <a class="code" href="a00995.html#af950654bba3a03e1ba3f1df8177cdd73">kMaxXProjectionGapFactor</a> * <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7869fe256b237ad13171f13c8a6cc449"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetColumnBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00102.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00523">523</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code" href="a00343.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a>(); ++i) {</div>
<div class="line">    ColPartitionSet* columns = all_columns[i];</div>
<div class="line">    <span class="keywordflow">if</span> (columns != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      ColSegment_LIST new_blocks;</div>
<div class="line">      <span class="comment">// Get boxes from the current vertical position on the grid</span></div>
<div class="line">      columns-&gt;GetColumnBoxes(i * <a class="code" href="a00343.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>(), (i+1) * <a class="code" href="a00343.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>(), &amp;new_blocks);</div>
<div class="line">      <span class="comment">// Merge the new_blocks boxes into column_blocks if they are well-aligned</span></div>
<div class="line">      <a class="code" href="a00343.html#a41bef91f2096c4a3bbe486b4d304bddb">GroupColumnBlocks</a>(&amp;new_blocks, column_blocks);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a30f071829b47f7bd9afdd4ef819f582d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetTableColumns </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_columns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01273">1273</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                {</div>
<div class="line">  ColSegment_IT it(table_columns);</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;inside_table_column() || part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// prevent a partition to be assigned to multiple columns</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = part-&gt;bounding_box();</div>
<div class="line">    ColSegment* col = <span class="keyword">new</span> ColSegment();</div>
<div class="line">    col-&gt;InsertBox(box);</div>
<div class="line">    part-&gt;set_inside_table_column(<span class="keyword">true</span>);</div>
<div class="line">    <span class="comment">// Start a search below the current cell to find bottom neighbours</span></div>
<div class="line">    <span class="comment">// Note: a full search will always process things above it first, so</span></div>
<div class="line">    <span class="comment">// this should be starting at the highest cell and working its way down.</span></div>
<div class="line">    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">        vsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">    vsearch.StartVerticalSearch(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());</div>
<div class="line">    ColPartition* neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordtype">bool</span> found_neighbours = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordflow">while</span> ((neighbor = vsearch.NextVerticalSearch(<span class="keyword">true</span>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="comment">// only consider neighbors not assigned to any column yet</span></div>
<div class="line">      <span class="keywordflow">if</span> (neighbor-&gt;inside_table_column())</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// Horizontal lines should not break the flow</span></div>
<div class="line">      <span class="keywordflow">if</span> (neighbor-&gt;IsHorizontalLine())</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// presence of a non-table neighbor marks the end of current</span></div>
<div class="line">      <span class="comment">// table column</span></div>
<div class="line">      <span class="keywordflow">if</span> (neighbor-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="comment">// add the neighbor partition to the table column</span></div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();</div>
<div class="line">      col-&gt;InsertBox(neighbor_box);</div>
<div class="line">      neighbor-&gt;set_inside_table_column(<span class="keyword">true</span>);</div>
<div class="line">      found_neighbours = <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (found_neighbours) {</div>
<div class="line">      it.add_after_then_move(col);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      part-&gt;set_inside_table_column(<span class="keyword">false</span>);</div>
<div class="line">      <span class="keyword">delete</span> col;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a581a66fbdfdd0da5c3679a31f8d7944e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GetTableRegions </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>table_regions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01323">1323</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  ColSegment_IT cit(table_columns);</div>
<div class="line">  ColSegment_IT rit(table_regions);</div>
<div class="line">  <span class="comment">// Iterate through column blocks</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">      gsearch(&amp;<a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* part;</div>
<div class="line">  <span class="keywordtype">int</span> page_height = <a class="code" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>() - <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>();</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(page_height &gt; 0);</div>
<div class="line">  <span class="comment">// create a bool array to hold projection on y-axis</span></div>
<div class="line">  <span class="keywordtype">bool</span>* table_region = <span class="keyword">new</span> <span class="keywordtype">bool</span>[page_height];</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> part_box = part-&gt;bounding_box();</div>
<div class="line">    <span class="comment">// reset the projection array</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; page_height; i++) {</div>
<div class="line">      table_region[i] = <span class="keyword">false</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// iterate through all table columns to find regions in the current</span></div>
<div class="line">    <span class="comment">// page column block</span></div>
<div class="line">    cit.move_to_first();</div>
<div class="line">    <span class="keywordflow">for</span> (cit.mark_cycle_pt(); !cit.cycled_list(); cit.forward()) {</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> col_box = cit.data()-&gt;bounding_box();</div>
<div class="line">      <span class="comment">// find intersection region of table column and page column</span></div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> intersection_box = col_box.<a class="code" href="a00347.html#a33e45c7389737cdf1a908bca0af315c4">intersection</a>(part_box);</div>
<div class="line">      <span class="comment">// project table column on the y-axis</span></div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = intersection_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(); i &lt; intersection_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(); i++) {</div>
<div class="line">        table_region[i - <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>()] = <span class="keyword">true</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// set x-limits of table regions to page column width</span></div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> current_table_box;</div>
<div class="line">    current_table_box.<a class="code" href="a00347.html#ae6151cd794841e100d8a346a0c4a46e6">set_left</a>(part_box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>());</div>
<div class="line">    current_table_box.<a class="code" href="a00347.html#a2246293d3667b28c52a52353a2d5caea">set_right</a>(part_box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());</div>
<div class="line">    <span class="comment">// go through the y-axis projection to find runs of table</span></div>
<div class="line">    <span class="comment">// regions. Each run makes one table region.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; page_height; i++) {</div>
<div class="line">      <span class="comment">// detect start of a table region</span></div>
<div class="line">      <span class="keywordflow">if</span> (!table_region[i - 1] &amp;&amp; table_region[i]) {</div>
<div class="line">        current_table_box.<a class="code" href="a00347.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(i + <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().y());</div>
<div class="line">      }</div>
<div class="line">      <span class="comment">// TODO(nbeato): Is it guaranteed that the last row is not a table region?</span></div>
<div class="line">      <span class="comment">// detect end of a table region</span></div>
<div class="line">      <span class="keywordflow">if</span> (table_region[i - 1] &amp;&amp; !table_region[i]) {</div>
<div class="line">        current_table_box.<a class="code" href="a00347.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(i + <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().y());</div>
<div class="line">        <span class="keywordflow">if</span> (!current_table_box.<a class="code" href="a00347.html#a7c6996aea1eb6be07b1d6634bf36cfd6">null_box</a>()) {</div>
<div class="line">          ColSegment* seg = <span class="keyword">new</span> ColSegment();</div>
<div class="line">          seg-&gt;InsertBox(current_table_box);</div>
<div class="line">          rit.add_after_then_move(seg);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span>[] table_region;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a704fbe9cb0edeaa969bb0cc2bd1f9dbd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridheight </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00384">384</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                  {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00178.html#a07e6b230c150180d009ef1f317e642f2">gridheight</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7a3319f9a1eab06ef83a6e3f2df7e8d2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GridMergeColumnBlocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01195">1195</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="keywordtype">int</span> margin = <a class="code" href="a00343.html#aecbfe718794e99b2f15a43a7f7350848">gridsize</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Iterate the Column Blocks in the grid.</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">    gsearch(&amp;<a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* seg;</div>
<div class="line">  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (seg-&gt;type() != <a class="code" href="a00995.html#a25254b3df45454565d58a62480d3a6cba05d5fe5bf814b3e82827a3a321d5b2ec">COL_TEXT</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// only consider text blocks for split detection</span></div>
<div class="line">    <span class="keywordtype">bool</span> neighbor_found = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;  <span class="comment">// Modified at least once</span></div>
<div class="line">    <span class="comment">// keep expanding current box as long as neighboring table columns</span></div>
<div class="line">    <span class="comment">// are found above or below it.</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> box = seg-&gt;bounding_box();</div>
<div class="line">      <span class="comment">// slightly expand the search region vertically</span></div>
<div class="line">      <span class="keywordtype">int</span> top_range = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + margin, <a class="code" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());</div>
<div class="line">      <span class="keywordtype">int</span> bottom_range = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - margin, <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());</div>
<div class="line">      box.<a class="code" href="a00347.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(top_range);</div>
<div class="line">      box.<a class="code" href="a00347.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(bottom_range);</div>
<div class="line">      neighbor_found = <span class="keyword">false</span>;</div>
<div class="line">      GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">          rectsearch(&amp;<a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);</div>
<div class="line">      rectsearch.StartRectSearch(box);</div>
<div class="line">      ColSegment* neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (neighbor == seg)</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();</div>
<div class="line">        <span class="comment">// If the neighbor box significantly overlaps with the current</span></div>
<div class="line">        <span class="comment">// box (due to the expansion of the current box in the</span></div>
<div class="line">        <span class="comment">// previous iteration of this loop), remove the neighbor box</span></div>
<div class="line">        <span class="comment">// and expand the current box to include it.</span></div>
<div class="line">        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(box) &gt;= 0.9) {</div>
<div class="line">          seg-&gt;InsertBox(neighbor_box);</div>
<div class="line">          modified = <span class="keyword">true</span>;</div>
<div class="line">          rectsearch.RemoveBBox();</div>
<div class="line">          gsearch.RepositionIterator();</div>
<div class="line">          <span class="keyword">delete</span> neighbor;</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Only expand if the neighbor box is of table type</span></div>
<div class="line">        <span class="keywordflow">if</span> (neighbor-&gt;type() != <a class="code" href="a00995.html#a25254b3df45454565d58a62480d3a6cba8943a61e53229e72f0f896ec8e415316">COL_TABLE</a>)</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="comment">// Insert the neighbor box into the current column block</span></div>
<div class="line">        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="a00347.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(box) &amp;&amp;</div>
<div class="line">            !box.<a class="code" href="a00347.html#a5d4e2c5f91b791e94d4c94e513180632">contains</a>(neighbor_box)) {</div>
<div class="line">          seg-&gt;InsertBox(neighbor_box);</div>
<div class="line">          neighbor_found = <span class="keyword">true</span>;</div>
<div class="line">          modified = <span class="keyword">true</span>;</div>
<div class="line">          rectsearch.RemoveBBox();</div>
<div class="line">          gsearch.RepositionIterator();</div>
<div class="line">          <span class="keyword">delete</span> neighbor;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">while</span> (neighbor_found);</div>
<div class="line">    <span class="keywordflow">if</span> (modified) {</div>
<div class="line">      <span class="comment">// Because the box has changed, it has to be removed first.</span></div>
<div class="line">      gsearch.RemoveBBox();</div>
<div class="line">      <a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);</div>
<div class="line">      gsearch.RepositionIterator();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9298cd74b3e81315195a547a890752e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GridMergeTableRegions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01386">1386</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="comment">// Iterate the table regions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">      gsearch(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* seg = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((seg = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordtype">bool</span> neighbor_found = <span class="keyword">false</span>;</div>
<div class="line">    <span class="keywordtype">bool</span> modified = <span class="keyword">false</span>;  <span class="comment">// Modified at least once</span></div>
<div class="line">    <span class="keywordflow">do</span> {</div>
<div class="line">      <span class="comment">// Start a rectangle search x-bounded by the image and y by the table</span></div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = seg-&gt;bounding_box();</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> search_region(box);</div>
<div class="line">      search_region.set_left(<a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().x());</div>
<div class="line">      search_region.set_right(<a class="code" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().x());</div>
<div class="line">      neighbor_found = <span class="keyword">false</span>;</div>
<div class="line">      GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">          rectsearch(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">      rectsearch.StartRectSearch(search_region);</div>
<div class="line">      ColSegment* neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (neighbor == seg)</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; neighbor_box = neighbor-&gt;bounding_box();</div>
<div class="line">        <span class="comment">// Check if a neighbor box has a large overlap with the table</span></div>
<div class="line">        <span class="comment">// region.  This may happen as a result of merging two table</span></div>
<div class="line">        <span class="comment">// regions in the previous iteration.</span></div>
<div class="line">        <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(box) &gt;= 0.9) {</div>
<div class="line">          seg-&gt;InsertBox(neighbor_box);</div>
<div class="line">          rectsearch.RemoveBBox();</div>
<div class="line">          gsearch.RepositionIterator();</div>
<div class="line">          <span class="keyword">delete</span> neighbor;</div>
<div class="line">          modified = <span class="keyword">true</span>;</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Check if two table regions belong together based on a common</span></div>
<div class="line">        <span class="comment">// horizontal ruling line</span></div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a0fdb92fd4cf6c71db61a8bf17f793226">BelongToOneTable</a>(box, neighbor_box)) {</div>
<div class="line">          seg-&gt;InsertBox(neighbor_box);</div>
<div class="line">          neighbor_found = <span class="keyword">true</span>;</div>
<div class="line">          modified = <span class="keyword">true</span>;</div>
<div class="line">          rectsearch.RemoveBBox();</div>
<div class="line">          gsearch.RepositionIterator();</div>
<div class="line">          <span class="keyword">delete</span> neighbor;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    } <span class="keywordflow">while</span> (neighbor_found);</div>
<div class="line">    <span class="keywordflow">if</span> (modified) {</div>
<div class="line">      <span class="comment">// Because the box has changed, it has to be removed first.</span></div>
<div class="line">      gsearch.RemoveBBox();</div>
<div class="line">      <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);</div>
<div class="line">      gsearch.RepositionIterator();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aecbfe718794e99b2f15a43a7f7350848"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridsize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00378">378</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00178.html#afff2cee730084711205977b5fcb4901e">gridsize</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9234ae10ef078a56d67d6ceb91050b2e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::gridwidth </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00381">381</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                 {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00178.html#a0a38ea995b9d65f8b67d66d5501a5b80">gridwidth</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a41bef91f2096c4a3bbe486b4d304bddb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GroupColumnBlocks </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>current_segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00538">538</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                    {</div>
<div class="line">  ColSegment_IT src_it(new_blocks);</div>
<div class="line">  ColSegment_IT dest_it(column_blocks);</div>
<div class="line">  <span class="comment">// iterate through the source list</span></div>
<div class="line">  <span class="keywordflow">for</span> (src_it.mark_cycle_pt(); !src_it.cycled_list(); src_it.forward()) {</div>
<div class="line">    ColSegment* src_seg = src_it.data();</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> src_box = src_seg-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">bool</span> match_found = <span class="keyword">false</span>;</div>
<div class="line">    <span class="comment">// iterate through the destination list to find a matching column block</span></div>
<div class="line">    <span class="keywordflow">for</span> (dest_it.mark_cycle_pt(); !dest_it.cycled_list(); dest_it.forward()) {</div>
<div class="line">      ColSegment* dest_seg = dest_it.data();</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> dest_box = dest_seg-&gt;bounding_box();</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a4caabd9ca4346514d60c7dce8400a909">ConsecutiveBoxes</a>(src_box, dest_box)) {</div>
<div class="line">        <span class="comment">// If matching block is found, insert the current block into it</span></div>
<div class="line">        <span class="comment">// and delete the soure block</span></div>
<div class="line">        dest_seg-&gt;InsertBox(src_box);</div>
<div class="line">        match_found = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keyword">delete</span> src_it.extract();</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// If no match is found, just append the source block to column_blocks</span></div>
<div class="line">    <span class="keywordflow">if</span> (!match_found) {</div>
<div class="line">      dest_it.add_after_then_move(src_it.extract());</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a11d07831ff21f641f54e51b42a446a26"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableBox </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00347.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01519">1519</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <span class="comment">// TODO(nbeato): The growing code is a bit excessive right now.</span></div>
<div class="line">  <span class="comment">// By removing these lines, the partitions considered need</span></div>
<div class="line">  <span class="comment">// to have some overlap or be special cases. These lines could</span></div>
<div class="line">  <span class="comment">// be added again once a check is put in place to make sure that</span></div>
<div class="line">  <span class="comment">// growing tables don&#39;t stomp on a lot of non-table partitions.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// search for horizontal ruling lines within the vertical margin</span></div>
<div class="line">  <span class="comment">// int vertical_margin = kRulingVerticalMargin * gridsize();</span></div>
<div class="line">  <a class="code" href="a00347.html">TBOX</a> search_box = table_box;</div>
<div class="line">  <span class="comment">// int top = MIN(search_box.top() + vertical_margin, tright().y());</span></div>
<div class="line">  <span class="comment">// int bottom = MAX(search_box.bottom() - vertical_margin, bleft().y());</span></div>
<div class="line">  <span class="comment">// search_box.set_top(top);</span></div>
<div class="line">  <span class="comment">// search_box.set_bottom(bottom);</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00343.html#ac694dfdfaa119c35c337dd342073debf">GrowTableToIncludePartials</a>(table_box, search_box, result_box);</div>
<div class="line">  <a class="code" href="a00343.html#a2f2d85d386d90f680f518bf9e6496411">GrowTableToIncludeLines</a>(table_box, search_box, result_box);</div>
<div class="line">  <a class="code" href="a00343.html#a265d046f7651f73362a3aa5f3c9453fd">IncludeLeftOutColumnHeaders</a>(result_box);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2f2d85d386d90f680f518bf9e6496411"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableToIncludeLines </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>search_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00347.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01569">1569</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                            {</div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rsearch(&amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);</div>
<div class="line">  rsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">  rsearch.StartRectSearch(search_range);</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = rsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// TODO(nbeato) This should also do vertical, but column</span></div>
<div class="line">    <span class="comment">// boundaries are breaking things. This function needs to be</span></div>
<div class="line">    <span class="comment">// updated to allow vertical lines as well.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!part-&gt;IsLineType())</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// Avoid the following function call if the result of the</span></div>
<div class="line">    <span class="comment">// function is irrelevant.</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();</div>
<div class="line">    <span class="keywordflow">if</span> (result_box-&gt;<a class="code" href="a00347.html#a5d4e2c5f91b791e94d4c94e513180632">contains</a>(part_box))</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// Include a partially overlapping horizontal line only if the</span></div>
<div class="line">    <span class="comment">// extra ColPartitions that will be included due to expansion</span></div>
<div class="line">    <span class="comment">// have large side spacing w.r.t. columns containing them.</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a6fcf84582f86676bf93e6e49d08dc64a">HLineBelongsToTable</a>(*part, table_box))</div>
<div class="line">      *result_box = result_box-&gt;<a class="code" href="a00347.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(part_box);</div>
<div class="line">    <span class="comment">// TODO(nbeato): Vertical</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac694dfdfaa119c35c337dd342073debf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::GrowTableToIncludePartials </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>search_range</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00347.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>result_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01541">1541</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  <span class="comment">// Rulings are in a different grid, so search 2 grids for rulings, text,</span></div>
<div class="line">  <span class="comment">// and table partitions that are not entirely within the new box.</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i) {</div>
<div class="line">    ColPartitionGrid* grid = (i == 0) ? &amp;<a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a> :</div>
<div class="line">                                        &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>;</div>
<div class="line">    <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rectsearch(grid);</div>
<div class="line">    rectsearch.StartRectSearch(search_range);</div>
<div class="line">    ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">     <span class="comment">// Only include text and table types.</span></div>
<div class="line">      <span class="keywordflow">if</span> (part-&gt;IsImageType())</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; part_box = part-&gt;bounding_box();</div>
<div class="line">      <span class="comment">// Include partition in the table if more than half of it</span></div>
<div class="line">      <span class="comment">// is covered by the table</span></div>
<div class="line">      <span class="keywordflow">if</span> (part_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="a00995.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>) {</div>
<div class="line">        *result_box = result_box-&gt;<a class="code" href="a00347.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(part_box);</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6436ad4194a19a38669a89b603c27801"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HasLeaderAdjacent </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00100.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00946">946</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                            {</div>
<div class="line">  <span class="keywordflow">if</span> (part.flow() == <a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">  <span class="comment">// Search range is left and right bounded by an offset of the</span></div>
<div class="line">  <span class="comment">// median xheight. This offset is to allow some tolerance to the</span></div>
<div class="line">  <span class="comment">// the leaders on the page in the event that the alignment is still</span></div>
<div class="line">  <span class="comment">// a bit off.</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = part.bounding_box();</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> search_size = <a class="code" href="a00995.html#a7c23a9af9374381d1a961227ce653ea6">kAdjacentLeaderSearchPadding</a> * <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> top = box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + search_size;</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">int</span> bottom = box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - search_size;</div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> hsearch(&amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);</div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="a00548.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> = 0; <a class="code" href="a00548.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> &lt; 2; ++<a class="code" href="a00548.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a>) {</div>
<div class="line">    <span class="keywordtype">bool</span> right_to_left = (<a class="code" href="a00548.html#a57d4a186a22b01e2110793bc22a5d8f0">direction</a> == 0);</div>
<div class="line">    <span class="keywordtype">int</span> x = right_to_left ? box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() : box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    hsearch.StartSideSearch(x, bottom, top);</div>
<div class="line">    ColPartition* leader = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((leader = hsearch.NextSideSearch(right_to_left)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="comment">// This should not happen, they are in different grids.</span></div>
<div class="line">      <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(&amp;part != leader);</div>
<div class="line">      <span class="comment">// The leader could be a horizontal ruling in the grid.</span></div>
<div class="line">      <span class="comment">// Make sure it is actually a leader.</span></div>
<div class="line">      <span class="keywordflow">if</span> (leader-&gt;flow() != <a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>)</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// Make sure the leader shares a page column with the partition,</span></div>
<div class="line">      <span class="comment">// otherwise we are spreading across columns.</span></div>
<div class="line">      <span class="keywordflow">if</span> (!part.IsInSameColumnAs(*leader))</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      <span class="comment">// There should be a significant vertical overlap</span></div>
<div class="line">      <span class="keywordflow">if</span> (!leader-&gt;VSignificantCoreOverlap(part))</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// Leader passed all tests, so it is adjacent.</span></div>
<div class="line">      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// No leaders are adjacent to the given partition.</span></div>
<div class="line">  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a298f9f253a3fd3109133e6ea40842bc0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HasWideOrNoInterWordGap </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00857">857</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  <span class="comment">// Should only get text partitions.</span></div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part-&gt;IsTextType());</div>
<div class="line">  <span class="comment">// Blob access</span></div>
<div class="line">  BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();</div>
<div class="line">  BLOBNBOX_C_IT it(part_boxes);</div>
<div class="line">  <span class="comment">// Check if this is a relatively small partition (such as a single word)</span></div>
<div class="line">  <span class="keywordflow">if</span> (part-&gt;bounding_box().width() &lt;</div>
<div class="line">      <a class="code" href="a00995.html#a3fe030812946d2ca16b873bde30d5431">kMinBoxesInTextPartition</a> * part-&gt;median_size() &amp;&amp;</div>
<div class="line">      part_boxes-&gt;length() &lt; <a class="code" href="a00995.html#a3fe030812946d2ca16b873bde30d5431">kMinBoxesInTextPartition</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Variables used to compute inter-blob spacing.</span></div>
<div class="line">  <span class="keywordtype">int</span> current_x0 = -1;</div>
<div class="line">  <span class="keywordtype">int</span> current_x1 = -1;</div>
<div class="line">  <span class="keywordtype">int</span> previous_x1 = -1;</div>
<div class="line">  <span class="comment">// Stores the maximum gap detected.</span></div>
<div class="line">  <span class="keywordtype">int</span> largest_partition_gap_found = -1;</div>
<div class="line">  <span class="comment">// Text partition gap limits. If this is text (and not a table),</span></div>
<div class="line">  <span class="comment">// there should be at least one gap larger than min_gap and no gap</span></div>
<div class="line">  <span class="comment">// larger than max_gap.</span></div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> max_gap = <a class="code" href="a00995.html#a632cb2dd79696389be8feb970de28e3e">kMaxGapInTextPartition</a> * part-&gt;median_size();</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> min_gap = <a class="code" href="a00995.html#a25dab2777976176c8de47ef2fb5b74a5">kMinMaxGapInTextPartition</a> * part-&gt;median_size();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">    <a class="code" href="a00055.html">BLOBNBOX</a>* blob = it.data();</div>
<div class="line">    current_x0 = blob-&gt;<a class="code" href="a00055.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>();</div>
<div class="line">    current_x1 = blob-&gt;<a class="code" href="a00055.html#a7b97b8bc16b1473a28f9c44011522f4e">bounding_box</a>().<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>();</div>
<div class="line">    <span class="keywordflow">if</span> (previous_x1 != -1) {</div>
<div class="line">      <span class="keywordtype">int</span> gap = current_x0 - previous_x1;</div>
<div class="line"></div>
<div class="line">      <span class="comment">// TODO(nbeato): Boxes may overlap? Huh?</span></div>
<div class="line">      <span class="comment">// For example, mag.3B 8003_033.3B.tif in UNLV data. The titles/authors</span></div>
<div class="line">      <span class="comment">// on the top right of the page are filtered out with this line.</span></div>
<div class="line">      <span class="comment">// Note 2: Iterating over blobs in a partition, so we are looking for</span></div>
<div class="line">      <span class="comment">// spacing between the words.</span></div>
<div class="line">      <span class="keywordflow">if</span> (gap &lt; 0) {</div>
<div class="line">        <span class="comment">// More likely case, the blobs slightly overlap. This can happen</span></div>
<div class="line">        <span class="comment">// with diacritics (accents) or broken alphabet symbols (characters).</span></div>
<div class="line">        <span class="comment">// Merge boxes together by taking max of right sides.</span></div>
<div class="line">        <span class="keywordflow">if</span> (-gap &lt; part-&gt;median_size() * <a class="code" href="a00995.html#af7577bf68e7e1466e0d58eb91ad999c6">kMaxBlobOverlapFactor</a>) {</div>
<div class="line">          previous_x1 = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(previous_x1, current_x1);</div>
<div class="line">          <span class="keywordflow">continue</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="comment">// Extreme case, blobs overlap significantly in the same partition...</span></div>
<div class="line">        <span class="comment">// This should not happen often (if at all), but it does.</span></div>
<div class="line">        <span class="comment">// TODO(nbeato): investigate cases when this happens.</span></div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="comment">// The behavior before was to completely ignore this case.</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">// If a large enough gap is found, mark it as a table cell (return true)</span></div>
<div class="line">      <span class="keywordflow">if</span> (gap &gt; max_gap)</div>
<div class="line">        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line">      <span class="keywordflow">if</span> (gap &gt; largest_partition_gap_found)</div>
<div class="line">        largest_partition_gap_found = gap;</div>
<div class="line">    }</div>
<div class="line">    previous_x1 = current_x1;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Since no large gap was found, return false if the partition is too</span></div>
<div class="line">  <span class="comment">// long to be a data cell</span></div>
<div class="line">  <span class="keywordflow">if</span> (part-&gt;bounding_box().width() &gt;</div>
<div class="line">      <a class="code" href="a00995.html#ac2d16b5be5214a804964b939c8111bc7">kMaxBoxesInDataPartition</a> * part-&gt;median_size() ||</div>
<div class="line">      part_boxes-&gt;length() &gt; <a class="code" href="a00995.html#ac2d16b5be5214a804964b939c8111bc7">kMaxBoxesInDataPartition</a>)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// A partition may be a single blob. In this case, it&#39;s an isolated symbol</span></div>
<div class="line">  <span class="comment">// or non-text (such as a ruling or image).</span></div>
<div class="line">  <span class="comment">// Detect these as table partitions? Shouldn&#39;t this be case by case?</span></div>
<div class="line">  <span class="comment">// The behavior before was to ignore this, making max_partition_gap &lt; 0</span></div>
<div class="line">  <span class="comment">// and implicitly return true. Just making it explicit.</span></div>
<div class="line">  <span class="keywordflow">if</span> (largest_partition_gap_found == -1)</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"></div>
<div class="line">  <span class="comment">// return true if the maximum gap found is smaller than the minimum allowed</span></div>
<div class="line">  <span class="comment">// max_gap in a text partition. This indicates that there is no signficant</span></div>
<div class="line">  <span class="comment">// space in the partition, hence it is likely a single word.</span></div>
<div class="line">  <span class="keywordflow">return</span> largest_partition_gap_found &lt; min_gap;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6fcf84582f86676bf93e6e49d08dc64a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::HLineBelongsToTable </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00100.html">ColPartition</a> &amp;&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00347.html">TBOX</a> &amp;&#160;</td>
          <td class="paramname"><em>table_box</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01599">1599</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  <span class="keywordflow">if</span> (!part.IsHorizontalLine())</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; part_box = part.bounding_box();</div>
<div class="line">  <span class="keywordflow">if</span> (!part_box.<a class="code" href="a00347.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(table_box))</div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line">  <span class="comment">// Do not consider top-most horizontal line since it usually</span></div>
<div class="line">  <span class="comment">// originates from noise.</span></div>
<div class="line">  <span class="comment">// TODO(nbeato): I had to comment this out because the ruling grid doesn&#39;t</span></div>
<div class="line">  <span class="comment">// have neighbors solved.</span></div>
<div class="line">  <span class="comment">// if (!part.nearest_neighbor_above())</span></div>
<div class="line">  <span class="comment">//   return false;</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a> bbox = part_box.<a class="code" href="a00347.html#ab8ae7b66782fa1802f78ff034da16089">bounding_union</a>(table_box);</div>
<div class="line">  <span class="comment">// In the &quot;unioned table&quot; box (the table extents expanded by the line),</span></div>
<div class="line">  <span class="comment">// keep track of how many partitions have significant padding to the left</span></div>
<div class="line">  <span class="comment">// and right. If more than half of the partitions covered by the new table</span></div>
<div class="line">  <span class="comment">// have significant spacing, the line belongs to the table and the table</span></div>
<div class="line">  <span class="comment">// grows to include all of the partitions.</span></div>
<div class="line">  <span class="keywordtype">int</span> num_extra_partitions = 0;</div>
<div class="line">  <span class="keywordtype">int</span> extra_space_to_right = 0;</div>
<div class="line">  <span class="keywordtype">int</span> extra_space_to_left = 0;</div>
<div class="line">  <span class="comment">// Rulings are in a different grid, so search 2 grids for rulings, text,</span></div>
<div class="line">  <span class="comment">// and table partitions that are introduced by the new box.</span></div>
<div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; 2; ++i) {</div>
<div class="line">    ColPartitionGrid* grid = (i == 0) ? &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a> :</div>
<div class="line">                                        &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>;</div>
<div class="line">    <span class="comment">// Start a rect search on bbox</span></div>
<div class="line">    <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> rectsearch(grid);</div>
<div class="line">    rectsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">    rectsearch.StartRectSearch(bbox);</div>
<div class="line">    ColPartition* extra_part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((extra_part = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="comment">// ColPartition already in table</span></div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; extra_part_box = extra_part-&gt;bounding_box();</div>
<div class="line">      <span class="keywordflow">if</span> (extra_part_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="a00995.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>)</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// Non-text ColPartitions do not contribute</span></div>
<div class="line">      <span class="keywordflow">if</span> (extra_part-&gt;IsImageType())</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="comment">// Consider this partition.</span></div>
<div class="line">      num_extra_partitions++;</div>
<div class="line">      <span class="comment">// presence of a table cell is a strong hint, so just increment the scores</span></div>
<div class="line">      <span class="comment">// without looking at the spacing.</span></div>
<div class="line">      <span class="keywordflow">if</span> (extra_part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || extra_part-&gt;IsLineType()) {</div>
<div class="line">        extra_space_to_right++;</div>
<div class="line">        extra_space_to_left++;</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordtype">int</span> space_threshold = <a class="code" href="a00995.html#aee32ef58150f63a980c7b4f736c4a22a">kSideSpaceMargin</a> * part.median_size();</div>
<div class="line">      <span class="keywordflow">if</span> (extra_part-&gt;space_to_right() &gt; space_threshold)</div>
<div class="line">        extra_space_to_right++;</div>
<div class="line">      <span class="keywordflow">if</span> (extra_part-&gt;space_to_left() &gt; space_threshold)</div>
<div class="line">        extra_space_to_left++;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// tprintf(&quot;%d %d %d\n&quot;,</span></div>
<div class="line">  <span class="comment">// num_extra_partitions,extra_space_to_right,extra_space_to_left);</span></div>
<div class="line">  <span class="keywordflow">return</span> (extra_space_to_right &gt; num_extra_partitions / 2) ||</div>
<div class="line">      (extra_space_to_left &gt; num_extra_partitions / 2);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a265d046f7651f73362a3aa5f3c9453fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::IncludeLeftOutColumnHeaders </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00347.html">TBOX</a> *&#160;</td>
          <td class="paramname"><em>table_box</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01663">1663</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                             {</div>
<div class="line">  <span class="comment">// Start a search above the current table to look for column headers</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> vsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  vsearch.StartVerticalSearch(table_box-&gt;<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), table_box-&gt;<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(),</div>
<div class="line">                              table_box-&gt;<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());</div>
<div class="line">  ColPartition* neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  ColPartition* previous_neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((neighbor = vsearch.NextVerticalSearch(<span class="keyword">false</span>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// Max distance to find a table heading.</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">int</span> max_distance = <a class="code" href="a00995.html#aae5eb999d710e50055ba3096b2f54c38">kMaxColumnHeaderDistance</a> *</div>
<div class="line">                             neighbor-&gt;median_size();</div>
<div class="line">    <span class="keywordtype">int</span> table_top = table_box-&gt;<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>();</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = neighbor-&gt;bounding_box();</div>
<div class="line">    <span class="comment">// Do not continue if the next box is way above</span></div>
<div class="line">    <span class="keywordflow">if</span> (box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - table_top &gt; max_distance)</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="comment">// Unconditionally include partitions of type TABLE or LINE</span></div>
<div class="line">    <span class="comment">// TODO(faisal): add some reasonable conditions here</span></div>
<div class="line">    <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || neighbor-&gt;IsLineType()) {</div>
<div class="line">      table_box-&gt;<a class="code" href="a00347.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());</div>
<div class="line">      previous_neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// If there are two text partitions, one above the other, without a table</span></div>
<div class="line">    <span class="comment">// cell on their left or right side, consider them a barrier and quit</span></div>
<div class="line">    <span class="keywordflow">if</span> (previous_neighbor == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      previous_neighbor = neighbor;</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; previous_box = previous_neighbor-&gt;bounding_box();</div>
<div class="line">      <span class="keywordflow">if</span> (!box.<a class="code" href="a00347.html#a6b8b3bf99ea363303e11c26866335f23">major_y_overlap</a>(previous_box))</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2addcdf6528f3a69fa25c94940cdc428"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::Init </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>grid_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00183.html">ICOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00183.html">ICOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>top_right</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00190">190</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                {</div>
<div class="line">  <span class="comment">// Initialize clean partitions list and grid</span></div>
<div class="line">  <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00043.html#a1d2990adf323d7910fbf87b6fc3a7415">Init</a>(grid_size, bottom_left, top_right);</div>
<div class="line">  <a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.<a class="code" href="a00043.html#a1d2990adf323d7910fbf87b6fc3a7415">Init</a>(grid_size, bottom_left, top_right);</div>
<div class="line">  <a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.<a class="code" href="a00043.html#a1d2990adf323d7910fbf87b6fc3a7415">Init</a>(grid_size, bottom_left, top_right);</div>
<div class="line">  <a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>.<a class="code" href="a00043.html#a1d2990adf323d7910fbf87b6fc3a7415">Init</a>(grid_size, bottom_left, top_right);</div>
<div class="line">  <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a1d2990adf323d7910fbf87b6fc3a7415">Init</a>(grid_size, bottom_left, top_right);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5dfc53ecb81ee804476fd04f32434e6c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InitializePartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00102.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>all_columns</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00579">579</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                    {</div>
<div class="line">  <a class="code" href="a00343.html#acfb82ae105ee34d1360dd0c5dc8487ff">FindNeighbors</a>();</div>
<div class="line">  <a class="code" href="a00343.html#aa4b52f48d63d4881da34b7d84932e84d">SetPartitionSpacings</a>(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, all_columns);</div>
<div class="line">  <a class="code" href="a00343.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a>(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9f4115ada3be71a1106527aa59f31b43"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertCleanPartitions </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00373.html">TO_BLOCK</a> *&#160;</td>
          <td class="paramname"><em>block</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00202">202</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                         {</div>
<div class="line">  <span class="comment">// Calculate stats. This lets us filter partitions in AllowTextPartition()</span></div>
<div class="line">  <span class="comment">// and filter blobs in AllowBlob().</span></div>
<div class="line">  <a class="code" href="a00343.html#a51c670936d76fcdf3ed1a0e2730a54c4">SetGlobalSpacings</a>(grid);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);</div>
<div class="line">  gsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// Reject partitions with nothing useful inside of them.</span></div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;blob_type() == <a class="code" href="a00474.html#aebfaf711760a99b60c297d1d619df575ae09c6f7e99c3a3885c3469d52d0292d2">BRT_NOISE</a> || part-&gt;bounding_box().area() &lt;= 0)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    ColPartition* clean_part = part-&gt;ShallowCopy();</div>
<div class="line">    ColPartition* leader_part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;IsLineType()) {</div>
<div class="line">      <a class="code" href="a00343.html#aa7a21d1842c6592372eb69b49b2010a2">InsertRulingPartition</a>(clean_part);</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Insert all non-text partitions to clean_parts</span></div>
<div class="line">    <span class="keywordflow">if</span> (!part-&gt;IsTextType()) {</div>
<div class="line">      <a class="code" href="a00343.html#af310b33b86e951125b49e4ac1df2bb68">InsertImagePartition</a>(clean_part);</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Insert text colpartitions after removing noisy components from them</span></div>
<div class="line">    <span class="comment">// The leaders are split into a separate grid.</span></div>
<div class="line">    BLOBNBOX_CLIST* part_boxes = part-&gt;boxes();</div>
<div class="line">    BLOBNBOX_C_IT pit(part_boxes);</div>
<div class="line">    <span class="keywordflow">for</span> (pit.mark_cycle_pt(); !pit.cycled_list(); pit.forward()) {</div>
<div class="line">      <a class="code" href="a00055.html">BLOBNBOX</a> *pblob = pit.data();</div>
<div class="line">      <span class="comment">// Bad blobs... happens in UNLV set.</span></div>
<div class="line">      <span class="comment">// news.3G1, page 17 (around x=6)</span></div>
<div class="line">      <span class="keywordflow">if</span> (!<a class="code" href="a00343.html#aec9b60ffceb19f3f82186b60c29b7f51">AllowBlob</a>(*pblob))</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <span class="keywordflow">if</span> (pblob-&gt;<a class="code" href="a00055.html#afafe7113396a8cc27b882d622db46f05">flow</a>() == <a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>) {</div>
<div class="line">        <span class="keywordflow">if</span> (leader_part == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">          leader_part = part-&gt;ShallowCopy();</div>
<div class="line">          leader_part-&gt;<a class="code" href="a00055.html#a75340334988feba52ce36ba596750a35">set_flow</a>(<a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a64e3e70c4fac4d4e3facdb4638307d7f">BTFT_LEADER</a>);</div>
<div class="line">        }</div>
<div class="line">        leader_part-&gt;AddBox(pblob);</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pblob-&gt;<a class="code" href="a00055.html#a9e7100e6d08c78cca5f9c0453e11565d">region_type</a>() != <a class="code" href="a00474.html#aebfaf711760a99b60c297d1d619df575ae09c6f7e99c3a3885c3469d52d0292d2">BRT_NOISE</a>) {</div>
<div class="line">        clean_part-&gt;AddBox(pblob);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    clean_part-&gt;ComputeLimits();</div>
<div class="line">    ColPartition* fragmented = clean_part-&gt;CopyButDontOwnBlobs();</div>
<div class="line">    <a class="code" href="a00343.html#ad312e62064f4964ac0eb6010d002b9cd">InsertTextPartition</a>(clean_part);</div>
<div class="line">    <a class="code" href="a00343.html#a34950c2f035a25bb75f29a5ab51fe191">SplitAndInsertFragmentedTextPartition</a>(fragmented);</div>
<div class="line">    <span class="keywordflow">if</span> (leader_part != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="comment">// TODO(nbeato): Note that ComputeLimits does not update the column</span></div>
<div class="line">      <span class="comment">// information. So the leader may appear to span more columns than it</span></div>
<div class="line">      <span class="comment">// really does later on when IsInSameColumnAs gets called to test</span></div>
<div class="line">      <span class="comment">// for adjacent leaders.</span></div>
<div class="line">      leader_part-&gt;ComputeLimits();</div>
<div class="line">      <a class="code" href="a00343.html#a818a95d0b0bdb619e0170dac27426942">InsertLeaderPartition</a>(leader_part);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Make the partition partners better for upper and lower neighbors.</span></div>
<div class="line">  <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00101.html#a7ed32c7b4717fc000dd55796f6bf86d7">FindPartitionPartners</a>();</div>
<div class="line">  <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00101.html#a4781167f958ee8cc47549d8b39b9f1b5">RefinePartitionPartners</a>(<span class="keyword">false</span>);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a216c040efc8dff584076cc324240c524"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertFragmentedTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00402">402</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                  {</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a>(*part)) {</div>
<div class="line">    <a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, part);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keyword">delete</span> part;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af310b33b86e951125b49e4ac1df2bb68"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertImagePartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00421">421</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                         {</div>
<div class="line">  <span class="comment">// NOTE: If images are placed into a different grid in the future,</span></div>
<div class="line">  <span class="comment">// the function SetPartitionSpacings needs to be updated. It should</span></div>
<div class="line">  <span class="comment">// be the only thing that cares about image partitions.</span></div>
<div class="line">  <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, part);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a818a95d0b0bdb619e0170dac27426942"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertLeaderPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00410">410</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (!part-&gt;IsEmpty() &amp;&amp; part-&gt;bounding_box().area() &gt; 0) {</div>
<div class="line">    <a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, part);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keyword">delete</span> part;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa7a21d1842c6592372eb69b49b2010a2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertRulingPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00418">418</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line">  <a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, part);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad312e62064f4964ac0eb6010d002b9cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::InsertTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00394">394</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a534bca2a3fa57718c0bdf18b6af69af6">AllowTextPartition</a>(*part)) {</div>
<div class="line">    <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, part);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="keyword">delete</span> part;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a31d3976698617bc729409e1e0ff0c4ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::LocateTables </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00102.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00995.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *&#160;</td>
          <td class="paramname"><em>width_cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="a00150.html">FCOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>reskew</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00268">268</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                     {</div>
<div class="line">  <span class="comment">// initialize spacing, neighbors, and columns</span></div>
<div class="line">  <a class="code" href="a00343.html#a5dfc53ecb81ee804476fd04f32434e6c">InitializePartitions</a>(all_columns);</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(0, 300, <span class="stringliteral">&quot;Column Partitions &amp; Neighbors&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#ae38774700a97b1690f1530d77432a762">DisplayColPartitionConnections</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,</div>
<div class="line">                                   <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0691e22f5da865103a497f9503269a61">ScrollView::ORANGE</a>);</div>
<div class="line"></div>
<div class="line">    table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(100, 300, <span class="stringliteral">&quot;Fragmented Text&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// mark, filter, and smooth candidate table partitions</span></div>
<div class="line">  <a class="code" href="a00343.html#a7f29dd0a40d57b00d4868ff1c656dd6a">MarkTablePartitions</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Make single-column blocks from good_columns_ partitions. col_segments are</span></div>
<div class="line">  <span class="comment">// moved to a grid later which takes the ownership</span></div>
<div class="line">  ColSegment_LIST column_blocks;</div>
<div class="line">  <a class="code" href="a00343.html#a7869fe256b237ad13171f13c8a6cc449">GetColumnBlocks</a>(all_columns, &amp;column_blocks);</div>
<div class="line">  <span class="comment">// Set the ratio of candidate table partitions in each column</span></div>
<div class="line">  <a class="code" href="a00343.html#ac3e8a6d03fcaf027677919f284af6500">SetColumnsType</a>(&amp;column_blocks);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Move column segments to col_seg_grid_</span></div>
<div class="line">  <a class="code" href="a00343.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a>(&amp;column_blocks, &amp;<a class="code" href="a00343.html#a94f0570afcc478097685ccdb59928903">col_seg_grid_</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Detect split in column layout that might have occurred due to the</span></div>
<div class="line">  <span class="comment">// presence of a table. In such a case, merge the corresponding columns.</span></div>
<div class="line">  <a class="code" href="a00343.html#a7a3319f9a1eab06ef83a6e3f2df7e8d2">GridMergeColumnBlocks</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Group horizontally overlapping table partitions into table columns.</span></div>
<div class="line">  <span class="comment">// table_columns created here get deleted at the end of this method.</span></div>
<div class="line">  ColSegment_LIST table_columns;</div>
<div class="line">  <a class="code" href="a00343.html#a30f071829b47f7bd9afdd4ef819f582d">GetTableColumns</a>(&amp;table_columns);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Within each column, mark the range table regions occupy based on the</span></div>
<div class="line">  <span class="comment">// table columns detected. table_regions are moved to a grid later which</span></div>
<div class="line">  <span class="comment">// takes the ownership</span></div>
<div class="line">  ColSegment_LIST table_regions;</div>
<div class="line">  <a class="code" href="a00343.html#a581a66fbdfdd0da5c3679a31f8d7944e">GetTableRegions</a>(&amp;table_columns, &amp;table_regions);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1200, 300, <span class="stringliteral">&quot;Table Columns and Regions&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_columns, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a46dc68c065ac8c61e1213f2449479f8c">ScrollView::DARK_TURQUOISE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_regions, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a61dec9bc0aaf1d527a731b2a6ce055c8">ScrollView::YELLOW</a>);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Merge table regions across columns for tables spanning multiple</span></div>
<div class="line">  <span class="comment">// columns</span></div>
<div class="line">  <a class="code" href="a00343.html#a81003bea37eced8d746035bd565b9c56">MoveColSegmentsToGrid</a>(&amp;table_regions, &amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  <a class="code" href="a00343.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Adjust table boundaries by including nearby horizontal lines and left</span></div>
<div class="line">  <span class="comment">// out column headers</span></div>
<div class="line">  <a class="code" href="a00343.html#a2af79bdd1c4edbf03f4d2a15ee203be8">AdjustTableBoundaries</a>();</div>
<div class="line">  <a class="code" href="a00343.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#afbb5c3604dee9b42d1490616dd0bdd77">textord_tablefind_recognize_tables</a>) {</div>
<div class="line">    <span class="comment">// Remove false alarms consiting of a single column</span></div>
<div class="line">    <a class="code" href="a00343.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">      <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1200, 300, <span class="stringliteral">&quot;Detected Table Locations&quot;</span>);</div>
<div class="line">      <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">      <a class="code" href="a00343.html#a0778d0e3d6bc52330704d1143a73f90a">DisplayColSegments</a>(table_win, &amp;table_columns, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8afcf7a70cd729b6f0a668f762ec8a5820">ScrollView::KHAKI</a>);</div>
<div class="line">      <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a01e56b692125ef3220a23695e2c4821f">DisplayBoxes</a>(table_win);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Find table grid structure and reject tables that are malformed.</span></div>
<div class="line">    <a class="code" href="a00343.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a>();</div>
<div class="line">    <a class="code" href="a00343.html#a9298cd74b3e81315195a547a890752e0">GridMergeTableRegions</a>();</div>
<div class="line">    <a class="code" href="a00343.html#a647fe056ae6bb33cc8989f08aac5172f">RecognizeTables</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">      <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1400, 600, <span class="stringliteral">&quot;Recognized Tables&quot;</span>);</div>
<div class="line">      <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,</div>
<div class="line">                           <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">      <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a01e56b692125ef3220a23695e2c4821f">DisplayBoxes</a>(table_win);</div>
<div class="line">    }</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    <span class="comment">// Remove false alarms consiting of a single column</span></div>
<div class="line">    <span class="comment">// TODO(nbeato): verify this is a NOP after structured table rejection.</span></div>
<div class="line">    <span class="comment">// Right now it isn&#39;t. If the recognize function is doing what it is</span></div>
<div class="line">    <span class="comment">// supposed to do, this function is obsolete.</span></div>
<div class="line">    <a class="code" href="a00343.html#ad1d77425898bfe8808255b9a472663ab">DeleteSingleColumnTables</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">      <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(1500, 300, <span class="stringliteral">&quot;Detected Tables&quot;</span>);</div>
<div class="line">      <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>,</div>
<div class="line">                           <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">      <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a01e56b692125ef3220a23695e2c4821f">DisplayBoxes</a>(table_win);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a0706071af2ebaf3922f717646c41bc16">textord_dump_table_images</a>)</div>
<div class="line">    <a class="code" href="a00343.html#abbd932c16cdfa0cf35f9ef93e2e87f49">WriteToPix</a>(reskew);</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Merge all colpartitions in table regions to make them a single</span></div>
<div class="line">  <span class="comment">// colpartition and revert types of isolated table cells not</span></div>
<div class="line">  <span class="comment">// assigned to any table to their original types.</span></div>
<div class="line">  <a class="code" href="a00343.html#a1856836a1386196d5784244b4a1aa2d0">MakeTableBlocks</a>(grid, all_columns, width_cb);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1856836a1386196d5784244b4a1aa2d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MakeTableBlocks </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00102.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>columns</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00995.html#add06f170e88dcbac90a80ff20c42cc0a">WidthCallback</a> *&#160;</td>
          <td class="paramname"><em>width_cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l02070">2070</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                           {</div>
<div class="line">  <span class="comment">// Since we have table blocks already, remove table tags from all</span></div>
<div class="line">  <span class="comment">// colpartitions</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(grid);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) {</div>
<div class="line">      part-&gt;clear_table_type();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Now make a single colpartition out of each table block and remove</span></div>
<div class="line">  <span class="comment">// all colpartitions contained within a table</span></div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">      table_search(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  table_search.StartFullSearch();</div>
<div class="line">  ColSegment* table;</div>
<div class="line">  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> table_box = table-&gt;bounding_box();</div>
<div class="line">    <span class="comment">// Start a rect search on table_box</span></div>
<div class="line">    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">        rectsearch(grid);</div>
<div class="line">    rectsearch.StartRectSearch(table_box);</div>
<div class="line">    ColPartition* part;</div>
<div class="line">    ColPartition* table_partition = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((part = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">     <span class="comment">// Do not consider image partitions</span></div>
<div class="line">      <span class="keywordflow">if</span> (!part-&gt;IsTextType())</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line">      <a class="code" href="a00347.html">TBOX</a> part_box = part-&gt;bounding_box();</div>
<div class="line">      <span class="comment">// Include partition in the table if more than half of it</span></div>
<div class="line">      <span class="comment">// is covered by the table</span></div>
<div class="line">      <span class="keywordflow">if</span> (part_box.<a class="code" href="a00347.html#a9e8d88530048135be86afb906ff9dd74">overlap_fraction</a>(table_box) &gt; <a class="code" href="a00995.html#a0f2ae212b6b475efca7981fd1dc51e29">kMinOverlapWithTable</a>) {</div>
<div class="line">        rectsearch.RemoveBBox();</div>
<div class="line">        <span class="keywordflow">if</span> (table_partition) {</div>
<div class="line">          table_partition-&gt;Absorb(part, width_cb);</div>
<div class="line">        } <span class="keywordflow">else</span> {</div>
<div class="line">          table_partition = part;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Insert table colpartition back to part_grid_</span></div>
<div class="line">    <span class="keywordflow">if</span> (table_partition) {</div>
<div class="line">      <span class="comment">// To match the columns used when transforming to blocks, the new table</span></div>
<div class="line">      <span class="comment">// partition must have its first and last column set at the grid y that</span></div>
<div class="line">      <span class="comment">// corresponds to its bottom.</span></div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; table_box = table_partition-&gt;bounding_box();</div>
<div class="line">      <span class="keywordtype">int</span> grid_x, grid_y;</div>
<div class="line">      grid-&gt;GridCoords(table_box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), table_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), &amp;grid_x, &amp;grid_y);</div>
<div class="line">      table_partition-&gt;SetPartitionType(<a class="code" href="a00343.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a>, all_columns[grid_y]);</div>
<div class="line">      table_partition-&gt;set_table_type();</div>
<div class="line">      table_partition-&gt;set_blob_type(<a class="code" href="a00474.html#aebfaf711760a99b60c297d1d619df575a4f0b1431532d0e838187df32f2e822d7">BRT_TEXT</a>);</div>
<div class="line">      table_partition-&gt;set_flow(<a class="code" href="a00474.html#aa72f1499398e9694bf46752e1cc895e1a8fa903eb3c633ef681659563769a8007">BTFT_CHAIN</a>);</div>
<div class="line">      table_partition-&gt;SetBlobTypes();</div>
<div class="line">      grid-&gt;InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, table_partition);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1d45a058db096f6040af24af402b2042"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00294.html">ScrollView</a> * tesseract::TableFinder::MakeWindow </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>window_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00518">518</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                         {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00043.html#aa716f76c7f04f7112abfc10a3f8c63e0">MakeWindow</a>(x, y, window_name);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aeb0fc1badeb2def5cf69aca53392c89c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MarkPartitionsUsingLocalInformation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00827">827</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                      {</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (!part-&gt;IsTextType())  <span class="comment">// Only consider text partitions</span></div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// Only consider partitions in dominant font size or smaller</span></div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;median_size() &gt; <a class="code" href="a00995.html#a12f077d41b2f5c668c1b25912b9b6244">kMaxTableCellXheight</a> * <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="comment">// Mark partitions with a large gap, or no significant gap as</span></div>
<div class="line">    <span class="comment">// table partitions.</span></div>
<div class="line">    <span class="comment">// Comments: It produces several false alarms at:</span></div>
<div class="line">    <span class="comment">//  - last line of a paragraph (fixed)</span></div>
<div class="line">    <span class="comment">//  - single word section headings</span></div>
<div class="line">    <span class="comment">//  - page headers and footers</span></div>
<div class="line">    <span class="comment">//  - numbered equations</span></div>
<div class="line">    <span class="comment">//  - line drawing regions</span></div>
<div class="line">    <span class="comment">// TODO(faisal): detect and fix above-mentioned cases</span></div>
<div class="line">    <span class="keywordflow">if</span> (<a class="code" href="a00343.html#a298f9f253a3fd3109133e6ea40842bc0">HasWideOrNoInterWordGap</a>(part) ||</div>
<div class="line">        <a class="code" href="a00343.html#a6436ad4194a19a38669a89b603c27801">HasLeaderAdjacent</a>(*part)) {</div>
<div class="line">      part-&gt;set_table_type();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7f29dd0a40d57b00d4868ff1c656dd6a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MarkTablePartitions </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00789">789</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                      {</div>
<div class="line">  <a class="code" href="a00343.html#aeb0fc1badeb2def5cf69aca53392c89c">MarkPartitionsUsingLocalInformation</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(300, 300, <span class="stringliteral">&quot;Initial Table Partitions&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00343.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(600, 300, <span class="stringliteral">&quot;Filtered Table Partitions&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00343.html#ae3d5e2e4c894d4514717d0593792226d">SmoothTablePartitionRuns</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(900, 300, <span class="stringliteral">&quot;Smoothed Table Partitions&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);</div>
<div class="line">  }</div>
<div class="line">  <a class="code" href="a00343.html#a34734ff8fb23f8bfb88dc60e06cb2c17">FilterFalseAlarms</a>();</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a56bba6e7e00fb6404cc2036638e8b588">textord_tablefind_show_mark</a> || <a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(900, 300, <span class="stringliteral">&quot;Final Table Partitions&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0ae903faf0b9c434a6cff979e51620f8">ScrollView::AQUAMARINE</a>);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a81003bea37eced8d746035bd565b9c56"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::MoveColSegmentsToGrid </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>segments</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> *&#160;</td>
          <td class="paramname"><em>col_seg_grid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01176">1176</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                       {</div>
<div class="line">  ColSegment_IT it(segments);</div>
<div class="line">  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">    ColSegment* seg = it.extract();</div>
<div class="line">    col_seg_grid-&gt;InsertBBox(<span class="keyword">true</span>, <span class="keyword">true</span>, seg);</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a647fe056ae6bb33cc8989f08aac5172f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::RecognizeTables </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01816">1816</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                  {</div>
<div class="line">  <a class="code" href="a00294.html">ScrollView</a>* table_win = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">    table_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(0, 0, <span class="stringliteral">&quot;Table Structure&quot;</span>);</div>
<div class="line">    <a class="code" href="a00343.html#aea205753ca3f6e11043801843025e59e">DisplayColPartitions</a>(table_win, &amp;<a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>,</div>
<div class="line">                         <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a93aaf384b4a674f176e3dd1655c1ad95">ScrollView::LIGHT_BLUE</a>);</div>
<div class="line">    <span class="comment">// table_grid_.DisplayBoxes(table_win);</span></div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">  TableRecognizer recognizer;</div>
<div class="line">  recognizer.Init();</div>
<div class="line">  recognizer.set_line_grid(&amp;<a class="code" href="a00343.html#a7fddea88c90c15d996f36963481b81cf">leader_and_ruling_grid_</a>);</div>
<div class="line">  recognizer.set_text_grid(&amp;<a class="code" href="a00343.html#ad2da282ac5f2a2d4efbc463d80c7113c">fragmented_text_grid_</a>);</div>
<div class="line">  recognizer.set_max_text_height(<a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> * 2.0);</div>
<div class="line">  recognizer.set_min_height(1.5 * <a class="code" href="a00343.html#a704fbe9cb0edeaa969bb0cc2bd1f9dbd">gridheight</a>());</div>
<div class="line">  <span class="comment">// Loop over all of the tables and try to fit them.</span></div>
<div class="line">  <span class="comment">// Store the good tables here.</span></div>
<div class="line">  ColSegment_CLIST good_tables;</div>
<div class="line">  ColSegment_C_IT good_it(&amp;good_tables);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00995.html#ac7f2f25bfb4914e691db80a6b523c703">ColSegmentGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColSegment* found_table = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((found_table = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    gsearch.RemoveBBox();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// The goal is to make the tables persistent in a list.</span></div>
<div class="line">    <span class="comment">// When that happens, this will move into the search loop.</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; found_box = found_table-&gt;bounding_box();</div>
<div class="line">    StructuredTable* table_structure = recognizer.RecognizeTable(found_box);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Process a table. Good tables are inserted into the grid again later on</span></div>
<div class="line">    <span class="comment">// We can&#39;t change boxes in the grid while it is running a search.</span></div>
<div class="line">    <span class="keywordflow">if</span> (table_structure != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a313a803eb9c9c5adc55aa666d7967c20">textord_show_tables</a>) {</div>
<div class="line">        table_structure-&gt;Display(table_win, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a3312de9754e4e61d9a699f23528a059a">ScrollView::LIME_GREEN</a>);</div>
<div class="line">      }</div>
<div class="line">      found_table-&gt;set_bounding_box(table_structure-&gt;bounding_box());</div>
<div class="line">      <span class="keyword">delete</span> table_structure;</div>
<div class="line">      good_it.add_after_then_move(found_table);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keyword">delete</span> found_table;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// TODO(nbeato): MERGE!! There is awesome info now available for merging.</span></div>
<div class="line"></div>
<div class="line">  <span class="comment">// At this point, the grid is empty. We can safely insert the good tables</span></div>
<div class="line">  <span class="comment">// back into grid.</span></div>
<div class="line">  <span class="keywordflow">for</span> (good_it.mark_cycle_pt(); !good_it.cycled_list(); good_it.forward())</div>
<div class="line">    <a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>.<a class="code" href="a00043.html#a7b379525e3d60c68e583352ae4b8a750">InsertBBox</a>(<span class="keyword">true</span>, <span class="keyword">true</span>, good_it.extract());</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a793bbaf0945bb838b9c934899c4de87a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_blob_width </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>width</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00759">759</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                        {</div>
<div class="line">  <a class="code" href="a00343.html#a761fd57460670c531131bd2a77227911">global_median_blob_width_</a> = width;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa5644866b8727722deec53b73c4d7831"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_ledding </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ledding</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00762">762</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <a class="code" href="a00343.html#a1d5828695e17f10f2d4140476c9f34fd">global_median_ledding_</a> = ledding;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8be2bff4c272c65c0c4e896037620381"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_global_median_xheight </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>xheight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00756">756</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <a class="code" href="a00343.html#ab66e5e7382edbd8bc260fd5bca4f2914">global_median_xheight_</a> = xheight;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aacc9d09ee5545c6ba681a73ddfff139b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_left_to_right_language </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00186">186</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <a class="code" href="a00343.html#a528595d792a34a2a361670aced196165">left_to_right_language_</a> = order;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a6dc1406d2cfe1e8c868198d2532e5d2c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::set_resolution </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>resolution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00138">138</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>
<div class="fragment"><div class="line">                                      {</div>
<div class="line">    <a class="code" href="a00343.html#a945f735c68a1f3fe672e759828f36f71">resolution_</a> = resolution;</div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ac3e8a6d03fcaf027677919f284af6500"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetColumnsType </td>
          <td>(</td>
          <td class="paramtype">ColSegment_LIST *&#160;</td>
          <td class="paramname"><em>col_segments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01143">1143</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                               {</div>
<div class="line">  ColSegment_IT it(column_blocks);</div>
<div class="line">  <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">    ColSegment* seg = it.data();</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> box = seg-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> num_table_cells = 0;</div>
<div class="line">    <span class="keywordtype">int</span> num_text_cells = 0;</div>
<div class="line">    GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">        rsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">    rsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">    rsearch.StartRectSearch(box);</div>
<div class="line">    ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((part = rsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) {</div>
<div class="line">        num_table_cells++;</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677faaa63d8d8a99ddc2b3957f8e8787b4eca">PT_FLOWING_TEXT</a>) {</div>
<div class="line">        num_text_cells++;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// If a column block has no text or table partition in it, it is not needed</span></div>
<div class="line">    <span class="comment">// for table detection.</span></div>
<div class="line">    <span class="keywordflow">if</span> (!num_table_cells &amp;&amp; !num_text_cells) {</div>
<div class="line">      <span class="keyword">delete</span> it.extract();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      seg-&gt;set_num_table_cells(num_table_cells);</div>
<div class="line">      seg-&gt;set_num_text_cells(num_text_cells);</div>
<div class="line">      <span class="comment">// set column type based on the ratio of table to text cells</span></div>
<div class="line">      seg-&gt;set_type();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a51c670936d76fcdf3ed1a0e2730a54c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetGlobalSpacings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00709">709</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                          {</div>
<div class="line">  <a class="code" href="a00318.html">STATS</a> xheight_stats(0, <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a> + 1);</div>
<div class="line">  <a class="code" href="a00318.html">STATS</a> width_stats(0, <a class="code" href="a00995.html#a83ac44e5e0c7348fd8591b3cba175dff">kMaxBlobWidth</a> + 1);</div>
<div class="line">  <a class="code" href="a00318.html">STATS</a> ledding_stats(0, <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a> + 1);</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);</div>
<div class="line">  gsearch.SetUniqueMode(<span class="keyword">true</span>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="comment">// TODO(nbeato): HACK HACK HACK! medians are equal to partition length.</span></div>
<div class="line">    <span class="comment">// ComputeLimits needs to get called somewhere outside of TableFinder</span></div>
<div class="line">    <span class="comment">// to make sure the partitions are properly initialized.</span></div>
<div class="line">    <span class="comment">// When this is called, SmoothPartitionPartners dies in an assert after</span></div>
<div class="line">    <span class="comment">// table find runs. Alternative solution.</span></div>
<div class="line">    <span class="comment">// part-&gt;ComputeLimits();</span></div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;IsTextType()) {</div>
<div class="line">      <span class="comment">// xheight_stats.add(part-&gt;median_size(), part-&gt;boxes_count());</span></div>
<div class="line">      <span class="comment">// width_stats.add(part-&gt;median_width(), part-&gt;boxes_count());</span></div>
<div class="line"></div>
<div class="line">      <span class="comment">// This loop can be removed when above issues are fixed.</span></div>
<div class="line">      <span class="comment">// Replace it with the 2 lines commented out above.</span></div>
<div class="line">      BLOBNBOX_C_IT it(part-&gt;boxes());</div>
<div class="line">      <span class="keywordflow">for</span> (it.mark_cycle_pt(); !it.cycled_list(); it.forward()) {</div>
<div class="line">        xheight_stats.add(it.data()-&gt;bounding_box().height(), 1);</div>
<div class="line">        width_stats.add(it.data()-&gt;bounding_box().width(), 1);</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      ledding_stats.add(part-&gt;space_above(), 1);</div>
<div class="line">      ledding_stats.add(part-&gt;space_below(), 1);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// Set estimates based on median of statistics obtained</span></div>
<div class="line">  <a class="code" href="a00343.html#a8be2bff4c272c65c0c4e896037620381">set_global_median_xheight</a>(static_cast&lt;int&gt;(xheight_stats.median() + 0.5));</div>
<div class="line">  <a class="code" href="a00343.html#a793bbaf0945bb838b9c934899c4de87a">set_global_median_blob_width</a>(static_cast&lt;int&gt;(width_stats.median() + 0.5));</div>
<div class="line">  <a class="code" href="a00343.html#aa5644866b8727722deec53b73c4d7831">set_global_median_ledding</a>(static_cast&lt;int&gt;(ledding_stats.median() + 0.5));</div>
<div class="line"><span class="preprocessor">  #ifndef GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>  <span class="keywordflow">if</span> (<a class="code" href="a00995.html#a1b028e05393678b0316a80361e18c9a4">textord_tablefind_show_stats</a>) {</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* kWindowName = <span class="stringliteral">&quot;X-height (R), X-width (G), and ledding (B)&quot;</span>;</div>
<div class="line">    <a class="code" href="a00294.html">ScrollView</a>* stats_win = <a class="code" href="a00343.html#a1d45a058db096f6040af24af402b2042">MakeWindow</a>(500, 10, kWindowName);</div>
<div class="line">    xheight_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a0959f7470b08ae1a38aa7e38fba29402">ScrollView::RED</a>);</div>
<div class="line">    width_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a9d8c87be486dead41d198d6b97a22174">ScrollView::GREEN</a>);</div>
<div class="line">    ledding_stats.plot(stats_win, 10, 200, 2, 15, <a class="code" href="a00294.html#a100504544a5423a94222149ee9ed0fe8a66e5117e4930fdd9a43bdb674d57a719">ScrollView::BLUE</a>);</div>
<div class="line">  }</div>
<div class="line"><span class="preprocessor">  #endif  // GRAPHICS_DISABLED</span></div>
<div class="line"><span class="preprocessor"></span>}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa4b52f48d63d4881da34b7d84932e84d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetPartitionSpacings </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00101.html">ColPartitionGrid</a> *&#160;</td>
          <td class="paramname"><em>grid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00102.html">ColPartitionSet</a> **&#160;</td>
          <td class="paramname"><em>all_columns</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00586">586</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                      {</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(grid);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    ColPartitionSet* columns = all_columns[gsearch.GridY()];</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> box = part-&gt;bounding_box();</div>
<div class="line">    <span class="keywordtype">int</span> y = part-&gt;MidY();</div>
<div class="line">    ColPartition* left_column = columns-&gt;ColumnContaining(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), y);</div>
<div class="line">    ColPartition* right_column = columns-&gt;ColumnContaining(box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), y);</div>
<div class="line">    <span class="comment">// set distance from left column as space to the left</span></div>
<div class="line">    <span class="keywordflow">if</span> (left_column) {</div>
<div class="line">      <span class="keywordtype">int</span> left_space = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() - left_column-&gt;LeftAtY(y));</div>
<div class="line">      part-&gt;set_space_to_left(left_space);</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// set distance from right column as space to the right</span></div>
<div class="line">    <span class="keywordflow">if</span> (right_column) {</div>
<div class="line">      <span class="keywordtype">int</span> right_space = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, right_column-&gt;RightAtY(y) - box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());</div>
<div class="line">      part-&gt;set_space_to_right(right_space);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Look for images that may be closer.</span></div>
<div class="line">    <span class="comment">// NOTE: used to be part_grid_, might cause issues now</span></div>
<div class="line">    <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> hsearch(grid);</div>
<div class="line">    hsearch.StartSideSearch(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());</div>
<div class="line">    ColPartition* neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((neighbor = hsearch.NextSideSearch(<span class="keyword">true</span>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa88dcd7f4800095eb2f18b8a9bd521001">PT_PULLOUT_IMAGE</a> ||</div>
<div class="line">          neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fae4dd1e076e7d8354de8123bbdfb9e6b0">PT_FLOWING_IMAGE</a> ||</div>
<div class="line">          neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa919711bca6bed2e6a9846e4dc91f3900">PT_HEADING_IMAGE</a>) {</div>
<div class="line">        <span class="keywordtype">int</span> right = neighbor-&gt;bounding_box().right();</div>
<div class="line">        <span class="keywordflow">if</span> (right &lt; box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>()) {</div>
<div class="line">          <span class="keywordtype">int</span> space = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() - right, part-&gt;space_to_left());</div>
<div class="line">          part-&gt;set_space_to_left(space);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    hsearch.StartSideSearch(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>(), box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>());</div>
<div class="line">    neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    <span class="keywordflow">while</span> ((neighbor = hsearch.NextSideSearch(<span class="keyword">false</span>)) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">      <span class="keywordflow">if</span> (neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa88dcd7f4800095eb2f18b8a9bd521001">PT_PULLOUT_IMAGE</a> ||</div>
<div class="line">          neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fae4dd1e076e7d8354de8123bbdfb9e6b0">PT_FLOWING_IMAGE</a> ||</div>
<div class="line">          neighbor-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa919711bca6bed2e6a9846e4dc91f3900">PT_HEADING_IMAGE</a>) {</div>
<div class="line">        <span class="keywordtype">int</span> left = neighbor-&gt;bounding_box().left();</div>
<div class="line">        <span class="keywordflow">if</span> (left &gt; box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>()) {</div>
<div class="line">          <span class="keywordtype">int</span> space = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(left - box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), part-&gt;space_to_right());</div>
<div class="line">          part-&gt;set_space_to_right(space);</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ColPartition* upper_part = part-&gt;SingletonPartner(<span class="keyword">true</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (upper_part) {</div>
<div class="line">      <span class="keywordtype">int</span> space = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, upper_part-&gt;bounding_box().bottom() -</div>
<div class="line">                         part-&gt;bounding_box().bottom());</div>
<div class="line">      part-&gt;set_space_above(space);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="comment">// TODO(nbeato): What constitutes a good value?</span></div>
<div class="line">      <span class="comment">// 0 is the default value when not set, explicitly noting it needs to</span></div>
<div class="line">      <span class="comment">// be something else.</span></div>
<div class="line">      part-&gt;set_space_above(<a class="code" href="a00577.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ColPartition* lower_part = part-&gt;SingletonPartner(<span class="keyword">false</span>);</div>
<div class="line">    <span class="keywordflow">if</span> (lower_part) {</div>
<div class="line">      <span class="keywordtype">int</span> space = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(0, part-&gt;bounding_box().bottom() -</div>
<div class="line">                         lower_part-&gt;bounding_box().bottom());</div>
<div class="line">      part-&gt;set_space_below(space);</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="comment">// TODO(nbeato): What constitutes a good value?</span></div>
<div class="line">      <span class="comment">// 0 is the default value when not set, explicitly noting it needs to</span></div>
<div class="line">      <span class="comment">// be something else.</span></div>
<div class="line">      part-&gt;set_space_below(<a class="code" href="a00577.html#aac62d87844689a18b6f5339a89ed6e7f">MAX_INT32</a>);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad6c2c9a0fdec2c14ef0ddc63a5d0217d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SetVerticalSpacing </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00666">666</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                       {</div>
<div class="line">  <a class="code" href="a00347.html">TBOX</a> box = part-&gt;bounding_box();</div>
<div class="line">  <span class="keywordtype">int</span> top_range = <a class="code" href="a00587.html#a74e75242132eaabbc1c512488a135926">MIN</a>(box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() + <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>, <a class="code" href="a00343.html#af994bc64825f51944fa63a0fc61b4e13">tright</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());</div>
<div class="line">  <span class="keywordtype">int</span> bottom_range = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() - <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>, <a class="code" href="a00343.html#afaa3f28f4a9e645ded90e9f74016b217">bleft</a>().<a class="code" href="a00183.html#a66bba6ff8a5f060775e1c2ca511f7f29" title="access_function">y</a>());</div>
<div class="line">  box.<a class="code" href="a00347.html#a7f40dfd290a907200bdc98c196f63f45">set_top</a>(top_range);</div>
<div class="line">  box.<a class="code" href="a00347.html#a6f803b24b046883cb0f3882dc3d92302">set_bottom</a>(bottom_range);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00347.html">TBOX</a> part_box = part-&gt;bounding_box();</div>
<div class="line">  <span class="comment">// Start a rect search</span></div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">      rectsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  rectsearch.StartRectSearch(box);</div>
<div class="line">  ColPartition* neighbor;</div>
<div class="line">  <span class="keywordtype">int</span> min_space_above = <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>;</div>
<div class="line">  <span class="keywordtype">int</span> min_space_below = <a class="code" href="a00995.html#a00d83d0f6a701860dcf421bbbe283fef">kMaxVerticalSpacing</a>;</div>
<div class="line">  ColPartition* above_neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  ColPartition* below_neighbor = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((neighbor = rectsearch.NextRectSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (neighbor == part)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> neighbor_box = neighbor-&gt;bounding_box();</div>
<div class="line">    <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="a00347.html#a9f7e4e20bdfeee0d82db2f8d24aa72dc">major_x_overlap</a>(part_box)) {</div>
<div class="line">      <span class="keywordtype">int</span> gap = abs(part-&gt;median_bottom() - neighbor-&gt;median_bottom());</div>
<div class="line">      <span class="comment">// If neighbor is below current partition</span></div>
<div class="line">      <span class="keywordflow">if</span> (neighbor_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() &lt; part_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() &amp;&amp;</div>
<div class="line">          gap &lt; min_space_below) {</div>
<div class="line">        min_space_below = gap;</div>
<div class="line">        below_neighbor = neighbor;</div>
<div class="line">      }  <span class="comment">// If neighbor is above current partition</span></div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (part_box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() &lt; neighbor_box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>() &amp;&amp;</div>
<div class="line">               gap &lt; min_space_above) {</div>
<div class="line">        min_space_above = gap;</div>
<div class="line">        above_neighbor = neighbor;</div>
<div class="line">       }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  part-&gt;set_space_above(min_space_above);</div>
<div class="line">  part-&gt;set_space_below(min_space_below);</div>
<div class="line">  part-&gt;set_nearest_neighbor_above(above_neighbor);</div>
<div class="line">  part-&gt;set_nearest_neighbor_below(below_neighbor);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae3d5e2e4c894d4514717d0593792226d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SmoothTablePartitionRuns </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01108">1108</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                           {</div>
<div class="line">  <span class="comment">// Iterate the ColPartitions in the grid.</span></div>
<div class="line">  <a class="code" href="a00995.html#a990e3f25988f7d70c40a13225e645492">ColPartitionGridSearch</a> gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() &gt;= <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> || part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fac0b3cd1b4592e1a3c609ff4273fb505b">PT_UNKNOWN</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span></div>
<div class="line">    ColPartition* upper_part = part-&gt;nearest_neighbor_above();</div>
<div class="line">    ColPartition* lower_part = part-&gt;nearest_neighbor_below();</div>
<div class="line">    <span class="keywordflow">if</span> (!upper_part || !lower_part)</div>
<div class="line">      <span class="keywordflow">continue</span>;</div>
<div class="line">    <span class="keywordflow">if</span> (upper_part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a> &amp;&amp; lower_part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      part-&gt;set_table_type();</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// Pass 2, do the opposite. If both the upper and lower neighbors</span></div>
<div class="line">  <span class="comment">// exist and are not tables, this probably shouldn&#39;t be a table.</span></div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  part = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      <span class="keywordflow">continue</span>;  <span class="comment">// Consider only text partitions</span></div>
<div class="line">    ColPartition* upper_part = part-&gt;nearest_neighbor_above();</div>
<div class="line">    ColPartition* lower_part = part-&gt;nearest_neighbor_below();</div>
<div class="line"></div>
<div class="line">    <span class="comment">// table can&#39;t be by itself</span></div>
<div class="line">    <span class="keywordflow">if</span> ((upper_part &amp;&amp; upper_part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>) &amp;&amp;</div>
<div class="line">        (lower_part &amp;&amp; lower_part-&gt;type() != <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)) {</div>
<div class="line">      part-&gt;clear_table_type();</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a34950c2f035a25bb75f29a5ab51fe191"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::SplitAndInsertFragmentedTextPartition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00100.html">ColPartition</a> *&#160;</td>
          <td class="paramname"><em>part</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00436">436</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                                          {</div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">  <span class="comment">// Bye bye empty partitions!</span></div>
<div class="line">  <span class="keywordflow">if</span> (part-&gt;boxes()-&gt;empty()) {</div>
<div class="line">    <span class="keyword">delete</span> part;</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">// The AllowBlob function prevents this.</span></div>
<div class="line">  <a class="code" href="a00569.html#a93a603f4063a6b9403d81caa245a583b">ASSERT_HOST</a>(part-&gt;median_width() &gt; 0);</div>
<div class="line">  <span class="keyword">const</span> <span class="keywordtype">double</span> kThreshold = part-&gt;median_width() * <a class="code" href="a00995.html#aeecbc7f84d79acc5731cfdcccc164bde">kSplitPartitionSize</a>;</div>
<div class="line"></div>
<div class="line">  ColPartition* right_part = part;</div>
<div class="line">  <span class="keywordtype">bool</span> found_split = <span class="keyword">true</span>;</div>
<div class="line">  <span class="keywordflow">while</span> (found_split) {</div>
<div class="line">    found_split = <span class="keyword">false</span>;</div>
<div class="line">    BLOBNBOX_C_IT box_it(right_part-&gt;boxes());</div>
<div class="line">    <span class="comment">// Blobs are sorted left side first. If blobs overlap,</span></div>
<div class="line">    <span class="comment">// the previous blob may have a &quot;more right&quot; right side.</span></div>
<div class="line">    <span class="comment">// Account for this by always keeping the largest &quot;right&quot;</span></div>
<div class="line">    <span class="comment">// so far.</span></div>
<div class="line">    <span class="keywordtype">int</span> previous_right = <a class="code" href="a00577.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Look for the next split in the partition.</span></div>
<div class="line">    <span class="keywordflow">for</span> (box_it.mark_cycle_pt(); !box_it.cycled_list(); box_it.forward()) {</div>
<div class="line">      <span class="keyword">const</span> <a class="code" href="a00347.html">TBOX</a>&amp; box = box_it.data()-&gt;bounding_box();</div>
<div class="line">      <span class="keywordflow">if</span> (previous_right != <a class="code" href="a00577.html#ae6f88d5bb15e97510f484289f2fc89fd">MIN_INT32</a> &amp;&amp;</div>
<div class="line">          box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() - previous_right &gt; kThreshold) {</div>
<div class="line">        <span class="comment">// We have a split position. Split the partition in two pieces.</span></div>
<div class="line">        <span class="comment">// Insert the left piece in the grid and keep processing the right.</span></div>
<div class="line">        <span class="keywordtype">int</span> mid_x = (box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>() + previous_right) / 2;</div>
<div class="line">        ColPartition* left_part = right_part;</div>
<div class="line">        right_part = left_part-&gt;SplitAt(mid_x);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="a00343.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a>(left_part);</div>
<div class="line">        found_split = <span class="keyword">true</span>;</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="comment">// The right side of the previous blobs.</span></div>
<div class="line">      previous_right = <a class="code" href="a00587.html#aacc3ee1a7f283f8ef65cea31f4436a95">MAX</a>(previous_right, box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>());</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// When a split is not found, the right part is minimized</span></div>
<div class="line">  <span class="comment">// as much as possible, so process it.</span></div>
<div class="line">  <a class="code" href="a00343.html#a216c040efc8dff584076cc324240c524">InsertFragmentedTextPartition</a>(right_part);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af994bc64825f51944fa63a0fc61b4e13"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="a00183.html">ICOORD</a> &amp; tesseract::TableFinder::tright </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l00390">390</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                        {</div>
<div class="line">  <span class="keywordflow">return</span> <a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>.<a class="code" href="a00178.html#aa94e147841b6a4fae0b28e7e872685a5">tright</a>();</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbd932c16cdfa0cf35f9ef93e2e87f49"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void tesseract::TableFinder::WriteToPix </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="a00150.html">FCOORD</a> &amp;&#160;</td>
          <td class="paramname"><em>reskew</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00902_source.html#l01997">1997</a> of file <a class="el" href="a00902_source.html">tablefind.cpp</a>.</p>
<div class="fragment"><div class="line">                                                 {</div>
<div class="line">  <span class="comment">// Input file must be named test1.tif</span></div>
<div class="line">  <a class="code" href="a00409.html#a71c97aa1199ae048033f062ce0fa9506">PIX</a>* pix = pixRead(<span class="stringliteral">&quot;test1.tif&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (!pix) {</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Input file test1.tif not found.\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">int</span> img_height = pixGetHeight(pix);</div>
<div class="line">  <span class="keywordtype">int</span> img_width = pixGetWidth(pix);</div>
<div class="line">  <span class="comment">// Maximum number of text or table partitions</span></div>
<div class="line">  <span class="keywordtype">int</span> num_boxes = 10;</div>
<div class="line">  <a class="code" href="a00409.html#af349b464a789b4b7b18791433f6e7cce">BOXA</a>* text_box_array = boxaCreate(num_boxes);</div>
<div class="line">  <a class="code" href="a00409.html#af349b464a789b4b7b18791433f6e7cce">BOXA</a>* table_box_array = boxaCreate(num_boxes);</div>
<div class="line">  GridSearch&lt;ColPartition, ColPartition_CLIST, ColPartition_C_IT&gt;</div>
<div class="line">    gsearch(&amp;<a class="code" href="a00343.html#aec2f605cdeff11cb17d4cb9aba585b1b">clean_part_grid_</a>);</div>
<div class="line">  gsearch.StartFullSearch();</div>
<div class="line">  ColPartition* part;</div>
<div class="line">  <span class="comment">// load colpartitions into text_box_array and table_box_array</span></div>
<div class="line">  <span class="keywordflow">while</span> ((part = gsearch.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> box = part-&gt;bounding_box();</div>
<div class="line">    box.<a class="code" href="a00347.html#a56b4e1cc91e8abcb9f97622da7468e98">rotate_large</a>(reskew);</div>
<div class="line">    BOX* lept_box = boxCreate(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), img_height - box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),</div>
<div class="line">                              box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(),</div>
<div class="line">                              box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() - box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());</div>
<div class="line">    <span class="keywordflow">if</span> (part-&gt;type() == <a class="code" href="a00409.html#a02cfd8369d5ad8c70a8b90c0f40d677fa5f41d3730899e22bf30c977bef2bcfa3">PT_TABLE</a>)</div>
<div class="line">      boxaAddBox(table_box_array, lept_box, L_INSERT);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      boxaAddBox(text_box_array, lept_box, L_INSERT);</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">// draw colpartitions on the output image</span></div>
<div class="line">  <a class="code" href="a00409.html#a71c97aa1199ae048033f062ce0fa9506">PIX</a>* out = pixDrawBoxa(pix, text_box_array, 3, 0xff000000);</div>
<div class="line">  out = pixDrawBoxa(out, table_box_array, 3, 0x0000ff00);</div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00409.html#af349b464a789b4b7b18791433f6e7cce">BOXA</a>* table_array = boxaCreate(num_boxes);</div>
<div class="line">  <span class="comment">// text file containing detected table bounding boxes</span></div>
<div class="line">  FILE* fptr = fopen(<span class="stringliteral">&quot;tess-table.txt&quot;</span>, <span class="stringliteral">&quot;wb&quot;</span>);</div>
<div class="line">  GridSearch&lt;ColSegment, ColSegment_CLIST, ColSegment_C_IT&gt;</div>
<div class="line">      table_search(&amp;<a class="code" href="a00343.html#aba8f5765a3c7bbe13bee05b94308fec1">table_grid_</a>);</div>
<div class="line">  table_search.StartFullSearch();</div>
<div class="line">  ColSegment* table;</div>
<div class="line">  <span class="comment">// load table boxes to table_array and write them to text file as well</span></div>
<div class="line">  <span class="keywordflow">while</span> ((table = table_search.NextFullSearch()) != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00347.html">TBOX</a> box = table-&gt;bounding_box();</div>
<div class="line">    box.<a class="code" href="a00347.html#a56b4e1cc91e8abcb9f97622da7468e98">rotate_large</a>(reskew);</div>
<div class="line">    <span class="comment">// Since deskewing introduces negative coordinates, reskewing</span></div>
<div class="line">    <span class="comment">// might not completely recover from that since both steps enlarge</span></div>
<div class="line">    <span class="comment">// the actual box. Hence a box that undergoes deskewing/reskewing</span></div>
<div class="line">    <span class="comment">// may go out of image boundaries. Crop a table box if needed to</span></div>
<div class="line">    <span class="comment">// contain it inside the image dimensions.</span></div>
<div class="line">    box = box.<a class="code" href="a00347.html#a33e45c7389737cdf1a908bca0af315c4">intersection</a>(<a class="code" href="a00347.html">TBOX</a>(0, 0, img_width - 1, img_height - 1));</div>
<div class="line">    BOX* lept_box = boxCreate(box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(), img_height - box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(),</div>
<div class="line">                              box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>() - box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(),</div>
<div class="line">                              box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>() - box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());</div>
<div class="line">    boxaAddBox(table_array, lept_box, L_INSERT);</div>
<div class="line">    fprintf(fptr, <span class="stringliteral">&quot;%d %d %d %d TABLE\n&quot;</span>, box.<a class="code" href="a00347.html#a724fabf566586b663577dfa944ffbc61">left</a>(),</div>
<div class="line">            img_height - box.<a class="code" href="a00347.html#adf92e9fdac1bdf11c10d1c4d1178791a">top</a>(), box.<a class="code" href="a00347.html#a8703081c1a1c26db3a4dddaca1028e34">right</a>(), img_height - box.<a class="code" href="a00347.html#a4451d237f1cd18c4982d63fe36a11fc3">bottom</a>());</div>
<div class="line">  }</div>
<div class="line">  fclose(fptr);</div>
<div class="line">  <span class="comment">// paint table boxes on the debug image</span></div>
<div class="line">  out = pixDrawBoxa(out, table_array, 5, 0x7fff0000);</div>
<div class="line"></div>
<div class="line">  pixWrite(<span class="stringliteral">&quot;out.png&quot;</span>, out, IFF_PNG);</div>
<div class="line">  <span class="comment">// memory cleanup</span></div>
<div class="line">  boxaDestroy(&amp;text_box_array);</div>
<div class="line">  boxaDestroy(&amp;table_box_array);</div>
<div class="line">  boxaDestroy(&amp;table_array);</div>
<div class="line">  pixDestroy(&amp;pix);</div>
<div class="line">  pixDestroy(&amp;out);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="aec2f605cdeff11cb17d4cb9aba585b1b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00101.html">ColPartitionGrid</a> tesseract::TableFinder::clean_part_grid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00418">418</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a94f0570afcc478097685ccdb59928903"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> tesseract::TableFinder::col_seg_grid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00426">426</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="ad2da282ac5f2a2d4efbc463d80c7113c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00101.html">ColPartitionGrid</a> tesseract::TableFinder::fragmented_text_grid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00424">424</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a761fd57460670c531131bd2a77227911"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::global_median_blob_width_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00412">412</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a1d5828695e17f10f2d4140476c9f34fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::global_median_ledding_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00414">414</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="ab66e5e7382edbd8bc260fd5bca4f2914"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::global_median_xheight_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00410">410</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a7fddea88c90c15d996f36963481b81cf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00101.html">ColPartitionGrid</a> tesseract::TableFinder::leader_and_ruling_grid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00420">420</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a528595d792a34a2a361670aced196165"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool tesseract::TableFinder::left_to_right_language_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00430">430</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="a945f735c68a1f3fe672e759828f36f71"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int tesseract::TableFinder::resolution_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00408">408</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<a class="anchor" id="aba8f5765a3c7bbe13bee05b94308fec1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00995.html#a80cfbd9a83df02629e2afd48c16880f0">ColSegmentGrid</a> tesseract::TableFinder::table_grid_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00903_source.html#l00428">428</a> of file <a class="el" href="a00903_source.html">tablefind.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/data/src/tesseract-ocr/textord/<a class="el" href="a00903_source.html">tablefind.h</a></li>
<li>/mnt/data/src/tesseract-ocr/textord/<a class="el" href="a00902_source.html">tablefind.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00995.html">tesseract</a></li><li class="navelem"><a class="el" href="a00343.html">TableFinder</a></li>
    <li class="footer">Generated on Thu Nov 1 2012 20:20:08 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
