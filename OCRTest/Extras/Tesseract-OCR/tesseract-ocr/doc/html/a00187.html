<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Tesseract: IMAGE Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Tesseract
   &#160;<span id="projectnumber">3.02</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00187.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a>  </div>
  <div class="headertitle">
<div class="title">IMAGE Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="a00817_source.html">img.h</a>&gt;</code></p>

<p><a href="a01107.html">List of all members.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4aebf0b0a3f7cf571059aa21fad3d1b2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a4aebf0b0a3f7cf571059aa21fad3d1b2">IMAGE</a> ()</td></tr>
<tr class="memitem:a3017bbf96700db6038915b84eb0f1344"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a3017bbf96700db6038915b84eb0f1344">~IMAGE</a> ()</td></tr>
<tr class="memitem:ab86d677f6dc940a04304c4108f17adfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00187.html">IMAGE</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#ab86d677f6dc940a04304c4108f17adfc">operator=</a> (<a class="el" href="a00187.html">IMAGE</a> &amp;source)</td></tr>
<tr class="memitem:aa827c8e72da25720295706017eda3d81"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#aa827c8e72da25720295706017eda3d81">create</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr class="memitem:a406454ec5c9e065f6404b909d4ba19a7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a406454ec5c9e065f6404b909d4ba19a7">capture</a> (<a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixels, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bits_per_pixel)</td></tr>
<tr class="memitem:a5f56124be0950f339d9060a7c7c4cdd7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a> ()</td></tr>
<tr class="memitem:aee6f16416203f7d678fc61ae22dedc6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a> ()</td></tr>
<tr class="memitem:a3f8caf7062bd65eea2fc068fb3ec7c10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a> ()</td></tr>
<tr class="memitem:adc989f275743a36c9a9bce4b83c48c72"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a> ()</td></tr>
<tr class="memitem:a940ac84dbf421b48d24602bd2df1bda3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a940ac84dbf421b48d24602bd2df1bda3">get_bps</a> ()</td></tr>
<tr class="memitem:a8925866607e7282397e798856c0b1ebc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a8925866607e7282397e798856c0b1ebc">white_high</a> ()</td></tr>
<tr class="memitem:afa7970786b9c8a5e93b5496b5a3ae71a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ()</td></tr>
<tr class="memitem:a0e46e3e10daf7ee5fa7ddb15c1b38f7a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a0e46e3e10daf7ee5fa7ddb15c1b38f7a">get_res</a> ()</td></tr>
<tr class="memitem:aadf539e1a16119867b48ba5128edd056"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#aadf539e1a16119867b48ba5128edd056">set_res</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> resolution)</td></tr>
<tr class="memitem:a57b00c9b6bd4c915175f546404ddfb66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a57b00c9b6bd4c915175f546404ddfb66">get_buffer</a> ()</td></tr>
<tr class="memitem:a85c7d5cd8d14e7291e20c59e9a262174"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y)</td></tr>
<tr class="memitem:a44de5c052ec0829de2aff958756beb0f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf)</td></tr>
<tr class="memitem:ad3cdcd971f7c3089a0eb3b6ea968018b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr class="memitem:ab528771e88deece5a5d153c619fc3593"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#ab528771e88deece5a5d153c619fc3593">get_column</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> height, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr class="memitem:a97634582d0c01e510827711338a50425"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a97634582d0c01e510827711338a50425">fast_put_line</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf)</td></tr>
<tr class="memitem:afbea9591218792f2be5e805a77ee167d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> width, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr class="memitem:a96f1d5eb41ec389c298ca7c386a49c41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a96f1d5eb41ec389c298ca7c386a49c41">put_column</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> height, <a class="el" href="a00189.html">IMAGELINE</a> *linebuf, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> margins)</td></tr>
<tr class="memitem:a46c97959964cd92e2dc1a4f6248dfac3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> x, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext)</td></tr>
<tr class="memitem:a93a54ced5f2ee393fd3f634e31bbd145"><td class="memItemLeft" align="right" valign="top">Pix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a93a54ced5f2ee393fd3f634e31bbd145">ToPix</a> ()</td></tr>
<tr class="memitem:aac99e9fed5c4bc572e2415971e34591e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#aac99e9fed5c4bc572e2415971e34591e">FromPix</a> (const Pix *src_pix)</td></tr>
<tr class="memitem:a1eb61556c5959586a78a38e5faae1996"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a1eb61556c5959586a78a38e5faae1996">convolver</a> (<a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_width, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_height, void(*convolve)(<a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **pixels, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_wd, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_ht, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> ret_white_value, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *result))</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:adf532c19ebf5ba5ec70086035b874dbc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#adf532c19ebf5ba5ec70086035b874dbc">copy_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:ad524b64ac508eee1576a4787e1f5f457"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#ad524b64ac508eee1576a4787e1f5f457">enlarge_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:ace8abc71ce7c0bb82ff54377abf45e66"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#ace8abc71ce7c0bb82ff54377abf45e66">fast_reduce_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
<tr class="memitem:a987ea5c1e5f652311b99892283211a79"><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00187.html#a987ea5c1e5f652311b99892283211a79">reduce_sub_image</a> (<a class="el" href="a00187.html">IMAGE</a> *source, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xstart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ystart, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xext, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yext, <a class="el" href="a00187.html">IMAGE</a> *dest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xdest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ydest, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> scale, <a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> adjust_grey)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>encapsulated image </p>

<p>Definition at line <a class="el" href="a00817_source.html#l00051">51</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4aebf0b0a3f7cf571059aa21fad3d1b2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IMAGE::IMAGE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00072">72</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">             {  <span class="comment">//construct an image</span></div>
<div class="line">  bpp = 0;                       <span class="comment">//all illegal</span></div>
<div class="line">  fd = -1;</div>
<div class="line">  image = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  photo_interp = 1;</div>
<div class="line">  res = <a class="code" href="a00819.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3017bbf96700db6038915b84eb0f1344"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IMAGE::~IMAGE </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00817_source.html#l00056">56</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">              {                  <span class="comment">//destructor</span></div>
<div class="line">      <a class="code" href="a00187.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();  <span class="comment">//free memory</span></div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a406454ec5c9e065f6404b909d4ba19a7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::capture </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *&#160;</td>
          <td class="paramname"><em>pixels</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>capture raw image </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">pixels</td><td>pixels to capture </td></tr>
    <tr><td class="paramname">x</td><td>x size required </td></tr>
    <tr><td class="paramname">y</td><td>y size required </td></tr>
    <tr><td class="paramname">bits_per_pixel</td><td>bpp required </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l00170">170</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                     {</div>
<div class="line">  <a class="code" href="a00187.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();</div>
<div class="line">  xdim = <a class="code" href="a00819.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (x, y, bits_per_pixel);</div>
<div class="line">  <span class="keywordflow">if</span> (xdim &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  xsize = x;</div>
<div class="line">  ysize = y;</div>
<div class="line">  bufheight = y;</div>
<div class="line">  bpp = bits_per_pixel;</div>
<div class="line">  bps = bpp == 24 ? 8 : bpp;</div>
<div class="line">  photo_interp = 1;</div>
<div class="line">  bytespp = (bpp + 7) / 8;</div>
<div class="line">  image = pixels;                <span class="comment">//assign image area</span></div>
<div class="line">  ymin = 0;</div>
<div class="line">  ymax = bufheight;              <span class="comment">//read it all</span></div>
<div class="line">  captured = <a class="code" href="a00409.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;</div>
<div class="line">  res = <a class="code" href="a00819.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;</div>
<div class="line">  <span class="keywordflow">return</span> 0;                      <span class="comment">//success</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a46c97959964cd92e2dc1a4f6248dfac3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::check_legal_access </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>check coordinates </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>xcoord to check </td></tr>
    <tr><td class="paramname">y</td><td>ycoord to check </td></tr>
    <tr><td class="paramname">xext</td><td>extent </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01484">1484</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                                {</div>
<div class="line">  <span class="keywordflow">if</span> (x &lt; 0 || x &gt;= xsize || y &lt; 0 || y &gt;= ysize || x + xext &gt; xsize)</div>
<div class="line">    <a class="code" href="a00818.html#ae13bbdff95ec93e3a25dcd22cf28fcb0">BADIMAGECOORDS</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::check_legal_access&quot;</span>,</div>
<div class="line">      <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d+%d,%d)&quot;</span>, x, xext, y);</div>
<div class="line">  <span class="keywordflow">if</span> (y &lt; ymin || y &gt;= ymax)</div>
<div class="line">    <a class="code" href="a00818.html#a6c6e337204e2ba6f45b303028e15dfc4">BADIMAGESEEK</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::check_legal_access&quot;</span>, <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d,%d)&quot;</span>, x, y);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a1eb61556c5959586a78a38e5faae1996"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::convolver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>win_width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>win_height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(<a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **pixels, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> bytespp, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_wd, <a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> win_ht, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> ret_white_value, <a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *result)&#160;</td>
          <td class="paramname"><em>convolve</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Map function over window </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">win_width</td><td>Window width </td></tr>
    <tr><td class="paramname">win_height</td><td>Window height </td></tr>
    <tr><td class="paramname">convolve</td><td>Conv function </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01638">1638</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">  {</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> new_row;             <span class="comment">//Replacement pixels</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> *old_rows;           <span class="comment">//Rows being processed</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> oldest_imline;           <span class="comment">//Next imline to replace</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **window;                <span class="comment">//ptrs to pixel rows</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **winmax;                <span class="comment">//ptrs to pixel rows</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **win;                   <span class="comment">//ptrs to pixel rows</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> current_row;             <span class="comment">//Row being calculated</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> current_col;             <span class="comment">//Col being calculated</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> row = 0;                 <span class="comment">//Next row to get</span></div>
<div class="line"></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> i, j;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pix;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *max;</div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xmargin = win_width / 2;</div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> ymargin = win_height / 2;</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white = <a class="code" href="a00187.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();</div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> max_white = 255;</div>
<div class="line">  <span class="keywordtype">float</span> white_scale = (float) 255 / <a class="code" href="a00187.html#afa7970786b9c8a5e93b5496b5a3ae71a">get_white_level</a> ();</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (((win_width % 2) == 0) ||</div>
<div class="line">    ((win_height % 2) == 0) ||</div>
<div class="line">    (win_height &lt; 3) ||</div>
<div class="line">    (win_width &lt; 3) || (win_height &gt; ysize / 2) || (win_width &gt; xsize / 2))</div>
<div class="line">    <a class="code" href="a00818.html#af5a575550d9aa4b29089ca9bea192d49">BADWINDOW</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::convolver&quot;</span>,</div>
<div class="line">      <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;(%d x %d)&quot;</span>, win_width, win_height);</div>
<div class="line"></div>
<div class="line">  new_row.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xsize * bytespp);</div>
<div class="line">  new_row.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);</div>
<div class="line">  old_rows = <span class="keyword">new</span> <a class="code" href="a00189.html">IMAGELINE</a>[win_height];</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; win_height; i++) {</div>
<div class="line">    old_rows[i].<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ((xsize + 2 * xmargin) * bytespp);</div>
<div class="line">    old_rows[i].<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  window = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> **) <a class="code" href="a00583.html#a4c14b091498fb7866a1dd0af51a591fe">alloc_mem</a> (win_height * <span class="keyword">sizeof</span> (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *));</div>
<div class="line">  winmax = window + win_height;</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Make bottom border */</span></div>
<div class="line">  <span class="keywordflow">for</span> (oldest_imline = 0; oldest_imline &lt; ymargin; oldest_imline++) {</div>
<div class="line">    pix = old_rows[oldest_imline].<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    max = pix + (xsize + 2 * xmargin) * bytespp;</div>
<div class="line">    <span class="keywordflow">while</span> (pix &lt; max)</div>
<div class="line">      *pix++ = max_white;</div>
<div class="line">  }</div>
<div class="line">  <span class="comment">/* Initialise remaining rows but one*/</span></div>
<div class="line">  <span class="keywordflow">for</span> (; oldest_imline &lt; win_height - 1; oldest_imline++) {</div>
<div class="line">    <a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (0, row++, xsize, &amp;old_rows[oldest_imline], xmargin);</div>
<div class="line">    <span class="keywordflow">if</span> (max_white != white) {</div>
<div class="line">      pix = old_rows[oldest_imline].<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">      max = pix + (xsize + 2 * xmargin) * bytespp;</div>
<div class="line">      <span class="keywordflow">while</span> (pix &lt; max) {</div>
<div class="line">        *pix = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*pix * white_scale);</div>
<div class="line">        ++pix;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* Image Processing */</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (current_row = 0; current_row &lt; ysize;) {</div>
<div class="line">    <span class="comment">/* Get next row and re-initialise window array */</span></div>
<div class="line">    <span class="keywordflow">if</span> (row &lt; ysize) {</div>
<div class="line">      <a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (0, row++, xsize, &amp;old_rows[oldest_imline], xmargin);</div>
<div class="line">      <span class="keywordflow">if</span> (max_white != white) {</div>
<div class="line">        pix = old_rows[oldest_imline].<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">        max = pix + (xsize + 2 * xmargin) * bytespp;</div>
<div class="line">        <span class="keywordflow">while</span> (pix &lt; max) {</div>
<div class="line">          *pix = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*pix * white_scale);</div>
<div class="line">          ++pix;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      pix = old_rows[oldest_imline].<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">      max = pix + (xsize + 2 * xmargin) * bytespp;</div>
<div class="line">      <span class="keywordflow">while</span> (pix &lt; max)</div>
<div class="line">        *pix++ = max_white;</div>
<div class="line">    }</div>
<div class="line">    oldest_imline++;</div>
<div class="line">    <span class="keywordflow">if</span> (oldest_imline &gt;= win_height)</div>
<div class="line">      oldest_imline = 0;</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Process line */</span></div>
<div class="line">    pix = new_row.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    <span class="keywordflow">for</span> (current_col = 0; current_col &lt; xsize;) {</div>
<div class="line">      <span class="comment">/* Set up window ptrs */</span></div>
<div class="line">      <span class="keywordflow">if</span> (current_col == 0) {</div>
<div class="line">        j = oldest_imline;</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; win_height; i++) {</div>
<div class="line">          window[i] = old_rows[j++].<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">          <span class="keywordflow">if</span> (j &gt;= win_height)</div>
<div class="line">            j = 0;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (win = window; win &lt; winmax; (*win++) += bytespp);</div>
<div class="line">        <span class="comment">//Move along rows</span></div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      convolve(window, bytespp, win_width, win_height, white, pix);</div>
<div class="line">      pix += bytespp;</div>
<div class="line">      current_col++;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (0, current_row, xsize, &amp;new_row, 0);</div>
<div class="line">    new_row.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();</div>
<div class="line">    new_row.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (bpp);</div>
<div class="line">    current_row++;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aa827c8e72da25720295706017eda3d81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::create </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>&#160;</td>
          <td class="paramname"><em>bits_per_pixel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>create blank image </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>x size required </td></tr>
    <tr><td class="paramname">y</td><td>y size required </td></tr>
    <tr><td class="paramname">bits_per_pixel</td><td>bpp required </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l00121">121</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *pixels;                 <span class="comment">//memory for image</span></div>
<div class="line"></div>
<div class="line">  xdim = <a class="code" href="a00819.html#a0df725752395af1328217c86bf552ed4">check_legal_image_size</a> (x, y, bits_per_pixel);</div>
<div class="line">  <span class="keywordflow">if</span> (xdim &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  pixels = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *) <a class="code" href="a00583.html#ac8c475a93760aa04525aa0b4d1216fda">alloc_big_zeros</a> ((<span class="keywordtype">size_t</span>) (xdim * y * <span class="keyword">sizeof</span> (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>)));</div>
<div class="line">  <span class="keywordflow">if</span> (pixels == <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">    <a class="code" href="a00601.html#a669968baa4639e34aef50907918653df">MEMORY_OUT</a>.<a class="code" href="a00145.html#abc4cc64aad0ddb74c02523b69c95a1c1">error</a> (<span class="stringliteral">&quot;IMAGE::create&quot;</span>, <a class="code" href="a00569.html#a8a3a2e51383909b357fcdf8eda803637a781ad2788df9e25c59a70894c7832096">ABORT</a>, <span class="stringliteral">&quot;Size=(%d,%d)&quot;</span>, xdim, y);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">  }</div>
<div class="line">                                 <span class="comment">//allocate to image</span></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a406454ec5c9e065f6404b909d4ba19a7">capture</a> (pixels, x, y, bits_per_pixel);</div>
<div class="line">  captured = <a class="code" href="a00409.html#aa93f0eb578d23995850d61f7d61c55c1">FALSE</a>;</div>
<div class="line">  res = <a class="code" href="a00819.html#ad6b98f3cec0ab73fe17c0edf24f90436">image_default_resolution</a>;</div>
<div class="line">  <span class="keywordflow">return</span> 0;                      <span class="comment">//success</span></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5f56124be0950f339d9060a7c7c4cdd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::destroy </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>destroy image </p>

<p>Definition at line <a class="el" href="a00819_source.html#l00150">150</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                    {  <span class="comment">//get rid of image</span></div>
<div class="line">  <span class="keywordflow">if</span> (image != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; !captured) {</div>
<div class="line">    <a class="code" href="a00583.html#ab30c02896b354139efbfb8936dfe8b69">free_big_mem</a>(image);</div>
<div class="line">  }</div>
<div class="line">  image = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">  <span class="keywordflow">if</span> (fd &gt;= 0) {</div>
<div class="line">    close(fd);</div>
<div class="line">    fd = -1;</div>
<div class="line">  }</div>
<div class="line">  bpp = 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a44de5c052ec0829de2aff958756beb0f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::fast_get_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>get image line </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">width</td><td>line to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l00978">978</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  <span class="keywordflow">if</span> (width &gt; 0 &amp;&amp; bpp &gt; 4) {</div>
<div class="line">    <a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a>(x, y, width);</div>
<div class="line">                                 <span class="comment">//get pointer only</span></div>
<div class="line">    linebuf-&gt;<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = image + xdim * (ymax - 1 - y) + x * bytespp;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">                                 <span class="comment">//just copy it</span></div>
<div class="line">    this-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (x, y, width, linebuf, 0);</div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = bpp;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a97634582d0c01e510827711338a50425"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::fast_put_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>put image line </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">width</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy from </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01203">1203</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                           {</div>
<div class="line">  <span class="keywordflow">if</span> (width &gt; 0 &amp;&amp; (bpp &lt;= 4 || linebuf-&gt;pixels == linebuf-&gt;line))</div>
<div class="line">                                 <span class="comment">//just copy it</span></div>
<div class="line">    <a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (x, y, width, linebuf, 0);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aac99e9fed5c4bc572e2415971e34591e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::FromPix </td>
          <td>(</td>
          <td class="paramtype">const Pix *&#160;</td>
          <td class="paramname"><em>src_pix</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l01561">1561</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                                      {</div>
<div class="line">  <span class="comment">// Leptonica doesn&#39;t const its inputs, but we don&#39;t change the input.</span></div>
<div class="line">  Pix* pix = <span class="keyword">const_cast&lt;</span>Pix*<span class="keyword">&gt;</span>(src_pix);</div>
<div class="line">  Pix* destroy_this_pix = <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordtype">int</span> depth = pixGetDepth(pix);</div>
<div class="line">  <span class="keywordflow">if</span> (depth &gt; 1 &amp;&amp; depth &lt; 8) {</div>
<div class="line">    <span class="comment">// Convert funny depths to 8 bit.</span></div>
<div class="line">    destroy_this_pix = pixConvertTo8(pix, <span class="keyword">false</span>);</div>
<div class="line">    pix = destroy_this_pix;</div>
<div class="line">    depth = pixGetDepth(pix);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordtype">int</span> width = pixGetWidth(pix);</div>
<div class="line">  <span class="keywordtype">int</span> height = pixGetHeight(pix);</div>
<div class="line">  <span class="keyword">const</span> l_uint32* data = pixGetData(pix);</div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#aa827c8e72da25720295706017eda3d81">create</a>(width, height, depth == 32 ? 24 : depth);</div>
<div class="line">  <span class="comment">// For each line in the image, fill the IMAGELINE class and put it into the</span></div>
<div class="line">  <span class="comment">// destination image. Note that Tesseract stores images with the</span></div>
<div class="line">  <span class="comment">// bottom at y=0 and 0 is always black in grey and binary.</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> line;</div>
<div class="line">  <span class="keywordflow">if</span> (depth == 32) {</div>
<div class="line">    line.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width * 3);</div>
<div class="line">    line.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a>(24);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    line.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">switch</span> (depth) {</div>
<div class="line">  <span class="keywordflow">case</span> 1:</div>
<div class="line">    <span class="comment">// Binary images just flip the data bit.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)</div>
<div class="line">        line.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x] = GET_DATA_BIT((<span class="keywordtype">void</span> *)data, x) ^ 1;</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">      data += pixGetWpl(pix);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">case</span> 8:</div>
<div class="line">    <span class="comment">// Greyscale just copies the bytes in the right order.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)</div>
<div class="line">        line.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, x);</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">      data += pixGetWpl(pix);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">case</span> 32:</div>
<div class="line">    <span class="comment">// Put the colors in the correct places in the line buffer.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x, ++data) {</div>
<div class="line">        line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839adae6174e14bb1ea53a595df276e305b49d">RED_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_RED);</div>
<div class="line">        line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839adaf7fbd44fe4c622eb157a5a7a06e241ae">GREEN_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_GREEN);</div>
<div class="line">        line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839ada3bcd25abcbaf8665a2d1adf21cdb4820">BLUE_PIX</a>] = GET_DATA_BYTE((<span class="keywordtype">void</span> *)data, COLOR_BLUE);</div>
<div class="line">      }</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">default</span>:</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Cannot convert Pix to image with bpp = %d\n&quot;</span>, depth);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (destroy_this_pix != <a class="code" href="a00577.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div>
<div class="line">    pixDestroy(&amp;destroy_this_pix);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="adc989f275743a36c9a9bce4b83c48c72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::get_bpp </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>access function </p>
<dl class="section return"><dt>Returns:</dt><dd>bits per pixel </dd></dl>

<p>Definition at line <a class="el" href="a00817_source.html#l00106">106</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">      <span class="keywordflow">return</span> bpp;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a940ac84dbf421b48d24602bd2df1bda3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> IMAGE::get_bps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>access function </p>
<dl class="section return"><dt>Returns:</dt><dd>bits per sample </dd></dl>

<p>Definition at line <a class="el" href="a00817_source.html#l00113">113</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                   {</div>
<div class="line">      <span class="keywordflow">return</span> bps;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a57b00c9b6bd4c915175f546404ddfb66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>* IMAGE::get_buffer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00817_source.html#l00132">132</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                        {</div>
<div class="line">      <span class="keywordflow">return</span> image;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab528771e88deece5a5d153c619fc3593"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::get_column </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>get image column </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">height</td><td>number of pixels to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01105">1105</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                        {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">//pixels per byte</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white;                   <span class="comment">//white colour</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//pixel index</span></div>
<div class="line"></div>
<div class="line">                                 <span class="comment">//test coords</span></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);</div>
<div class="line">                                 <span class="comment">//test coords</span></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y + height - 1, 1);</div>
<div class="line">  <span class="keywordflow">if</span> (height &gt; ysize - y)</div>
<div class="line">    height = ysize - y;          <span class="comment">//clip to image</span></div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (height * bytespp + margins * bytespp * 2);</div>
<div class="line">                                 <span class="comment">//start of line</span></div>
<div class="line">  src = image + xdim * (ymax - 1 - y);</div>
<div class="line">  dest = linebuf-&gt;line;          <span class="comment">//destination line</span></div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = dest;</div>
<div class="line">  white = (1 &lt;&lt; bpp) - 1;        <span class="comment">//max value of pixel</span></div>
<div class="line">  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {</div>
<div class="line">    *dest++ = white;             <span class="comment">//margins are white</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (height &gt; 0) {</div>
<div class="line">    <span class="keywordflow">if</span> (bpp == 24) {</div>
<div class="line">      src += x * bytespp;        <span class="comment">//offset</span></div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">        *dest++ = *src;          <span class="comment">//copy bytes</span></div>
<div class="line">        *dest++ = *(src + 1);</div>
<div class="line">        *dest++ = *(src + 2);</div>
<div class="line">        src -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {</div>
<div class="line">      src += x;</div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">        *dest++ = *src;          <span class="comment">//copy bytes</span></div>
<div class="line">        src -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {</div>
<div class="line">      src += x / 2;              <span class="comment">//offset on line</span></div>
<div class="line">      <span class="keywordflow">if</span> (x &amp; 1) {</div>
<div class="line">        <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//get coded nibble</span></div>
<div class="line">          *dest++ = <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src][1];</div>
<div class="line">          src -= xdim;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//get coded nibble</span></div>
<div class="line">          *dest++ = <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src][0];</div>
<div class="line">          src -= xdim;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {</div>
<div class="line">      pixperbyte = 4;</div>
<div class="line">      src += x / 4;              <span class="comment">//offset on line</span></div>
<div class="line">      bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);      <span class="comment">//offset in byte</span></div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//get coded bits</span></div>
<div class="line">        *dest++ = <a class="code" href="a00823.html#af8029b0244582336725348de950a2738">bpp2table</a>[*src][bit];</div>
<div class="line">        src -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      pixperbyte = 8;</div>
<div class="line">      src += x / 8;              <span class="comment">//offset on line</span></div>
<div class="line">      bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);      <span class="comment">//offset in byte</span></div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//get coded bits</span></div>
<div class="line">        *dest++ = <a class="code" href="a00823.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[*src][bit];</div>
<div class="line">        src -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {</div>
<div class="line">    *dest++ = white;             <span class="comment">//margins are white</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad3cdcd971f7c3089a0eb3b6ea968018b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::get_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>get image line </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to get </td></tr>
    <tr><td class="paramname">width</td><td>line to get </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01003">1003</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">// source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">// destination pointer</span></div>
<div class="line">  <span class="keyword">const</span> <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *unpacksrc;        <span class="comment">// unpacking pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">// bit index</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">// pixels per byte</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> white;                   <span class="comment">// white colour</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">// pixel index</span></div>
<div class="line"></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, width);</div>
<div class="line">  <span class="keywordflow">if</span> (width &gt; xsize - x)</div>
<div class="line">    width = xsize - x;           <span class="comment">//clip to image</span></div>
<div class="line">  width *= bytespp;</div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (width + margins * bytespp * 2);</div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = bpp;</div>
<div class="line">                                 <span class="comment">//start of line</span></div>
<div class="line">  src = image + xdim * (ymax - 1 - y);</div>
<div class="line">  dest = linebuf-&gt;line;          <span class="comment">//destination line</span></div>
<div class="line">  linebuf-&gt;<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> = dest;</div>
<div class="line">  white = (1 &lt;&lt; bpp) - 1;        <span class="comment">//max value of pixel</span></div>
<div class="line">  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {</div>
<div class="line">    *dest++ = white;             <span class="comment">//margins are white</span></div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">if</span> (width &gt; 0) {</div>
<div class="line">    <span class="keywordflow">if</span> (bpp &gt; 4) {</div>
<div class="line">      src += x;                  <span class="comment">//offset</span></div>
<div class="line">                                 <span class="comment">//easy way</span></div>
<div class="line">      memmove (dest, src, (<span class="keywordtype">unsigned</span>) width);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {</div>
<div class="line">      src += x / 2;              <span class="comment">//offset on line</span></div>
<div class="line">      <span class="keywordflow">if</span> (x &amp; 1) {</div>
<div class="line">                                 <span class="comment">//get coded nibble</span></div>
<div class="line">        *dest++ = <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++][1];</div>
<div class="line">        width--;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">while</span> (width &gt;= 2) {</div>
<div class="line">                                 <span class="comment">//get coded bits</span></div>
<div class="line">        unpacksrc = <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++];</div>
<div class="line">        *dest++ = *unpacksrc++;</div>
<div class="line">        *dest++ = *unpacksrc++;  <span class="comment">//copy nibbles</span></div>
<div class="line">        width -= 2;</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">if</span> (width) {</div>
<div class="line">                                 <span class="comment">//get coded nibble</span></div>
<div class="line">        *dest++ = <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[*src++][0];</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {</div>
<div class="line">      pixperbyte = 4;</div>
<div class="line">      src += x / 4;              <span class="comment">//offset on line</span></div>
<div class="line">      bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);      <span class="comment">//offset in byte</span></div>
<div class="line">      width += bit;</div>
<div class="line">      <span class="keywordflow">while</span> (width &gt; 0) {        <span class="comment">//until all done</span></div>
<div class="line">        <span class="keywordflow">if</span> (width &lt; pixperbyte)</div>
<div class="line">                                 <span class="comment">//less on last byte</span></div>
<div class="line">          pixperbyte = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) width;</div>
<div class="line">                                 <span class="comment">//get coded bits</span></div>
<div class="line">        unpacksrc = &amp;<a class="code" href="a00823.html#af8029b0244582336725348de950a2738">bpp2table</a>[*src++][bit];</div>
<div class="line">        <span class="keywordflow">for</span> (; bit &lt; pixperbyte; bit++)</div>
<div class="line">          *dest++ = *unpacksrc++;<span class="comment">//copy bytes</span></div>
<div class="line">        width -= pixperbyte;</div>
<div class="line">        bit = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      pixperbyte = 8;</div>
<div class="line">      src += x / 8;              <span class="comment">//offset on line</span></div>
<div class="line">      bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);      <span class="comment">//offset in byte</span></div>
<div class="line">      width += bit;</div>
<div class="line">      <span class="keywordflow">while</span> (width &gt; 0) {        <span class="comment">//until all done</span></div>
<div class="line">        <span class="keywordflow">if</span> (width &lt; pixperbyte)</div>
<div class="line">                                 <span class="comment">//less on last byte</span></div>
<div class="line">          pixperbyte = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) width;</div>
<div class="line">                                 <span class="comment">//get coded bits</span></div>
<div class="line">        unpacksrc = &amp;<a class="code" href="a00823.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[*src++][bit];</div>
<div class="line">        <span class="keywordflow">for</span> (; bit &lt; pixperbyte; bit++)</div>
<div class="line">          *dest++ = *unpacksrc++;<span class="comment">//copy bytes</span></div>
<div class="line">        width -= pixperbyte;</div>
<div class="line">        bit = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (pixel = margins * bytespp; pixel &gt; 0; pixel--) {</div>
<div class="line">    *dest++ = white;             <span class="comment">//margins are white</span></div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a0e46e3e10daf7ee5fa7ddb15c1b38f7a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_res </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>get resolution </p>

<p>Definition at line <a class="el" href="a00817_source.html#l00125">125</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">      <span class="keywordflow">return</span> res;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afa7970786b9c8a5e93b5496b5a3ae71a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> IMAGE::get_white_level </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>access function </p>

<p>Definition at line <a class="el" href="a00817_source.html#l00121">121</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">      <span class="keywordflow">return</span> (1 &lt;&lt; bpp) - 1;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aee6f16416203f7d678fc61ae22dedc6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_xsize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>access function </p>
<dl class="section return"><dt>Returns:</dt><dd>xsize </dd></dl>

<p>Definition at line <a class="el" href="a00817_source.html#l00092">92</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">      <span class="keywordflow">return</span> xsize;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3f8caf7062bd65eea2fc068fb3ec7c10"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> IMAGE::get_ysize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>access function </p>
<dl class="section return"><dt>Returns:</dt><dd>ysize </dd></dl>

<p>Definition at line <a class="el" href="a00817_source.html#l00099">99</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">      <span class="keywordflow">return</span> ysize;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab86d677f6dc940a04304c4108f17adfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00187.html">IMAGE</a> &amp; IMAGE::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00087">87</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">  {</div>
<div class="line">  <a class="code" href="a00187.html#a5f56124be0950f339d9060a7c7c4cdd7">destroy</a>();</div>
<div class="line">  bpp = source.bpp;</div>
<div class="line">  photo_interp = source.photo_interp;</div>
<div class="line">  bps = source.bps;</div>
<div class="line">  bytespp = (bpp + 7) / 8;</div>
<div class="line">  lineskip = source.lineskip;    <span class="comment">//copy everything</span></div>
<div class="line">  captured = source.captured;</div>
<div class="line">  xsize = source.xsize;</div>
<div class="line">  ysize = source.ysize;</div>
<div class="line">  res = source.res;</div>
<div class="line">  image = source.image;</div>
<div class="line">  xdim = source.xdim;</div>
<div class="line">  bufheight = source.bufheight;</div>
<div class="line">  fd = source.fd;</div>
<div class="line">  reader = source.reader;</div>
<div class="line">  ymin = source.ymin;</div>
<div class="line">  ymax = source.ymax;</div>
<div class="line"></div>
<div class="line">  source.captured = <a class="code" href="a00409.html#aa8cecfc5c5c054d2875c03e77b7be15d">TRUE</a>;        <span class="comment">//source now captured</span></div>
<div class="line">  source.fd = -1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a85c7d5cd8d14e7291e20c59e9a262174"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> IMAGE::pixel </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>access pixel </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord </td></tr>
    <tr><td class="paramname">y</td><td>coord </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l00202">202</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                    {</div>
<div class="line">  <span class="keywordflow">if</span> (x &lt; 0)</div>
<div class="line">    x = 0;                       <span class="comment">//silently clip</span></div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= xsize)</div>
<div class="line">    x = xsize - 1;</div>
<div class="line">  <span class="keywordflow">if</span> (y &lt; 0)</div>
<div class="line">    y = 0;</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (y &gt;= ysize)</div>
<div class="line">    y = ysize - 1;</div>
<div class="line">  <a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);</div>
<div class="line">  <span class="keywordflow">switch</span> (bpp) {</div>
<div class="line">    <span class="keywordflow">case</span> 5:</div>
<div class="line">    <span class="keywordflow">case</span> 6:</div>
<div class="line">    <span class="keywordflow">case</span> 8:</div>
<div class="line">      <span class="keywordflow">return</span> image[(ymax - 1 - y) * xdim + x];</div>
<div class="line">    <span class="keywordflow">case</span> 4:</div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="a00823.html#a84b7edee9f94f297b0d3f9fbdddbc79f">bpp4table</a>[image[(ymax - 1 - y) * xdim + x / 2]][x &amp; 1];</div>
<div class="line">    <span class="keywordflow">case</span> 2:</div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="a00823.html#af8029b0244582336725348de950a2738">bpp2table</a>[image[(ymax - 1 - y) * xdim + x / 4]][x &amp; 3];</div>
<div class="line">    <span class="keywordflow">case</span> 1:</div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="a00823.html#a1d1e9f765fd3ff30e633e8f9708c7bda">bpp1table</a>[image[(ymax - 1 - y) * xdim + x / 8]][x &amp; 7];</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a> (<span class="stringliteral">&quot;Unexpected bits per pixel %d\n&quot;</span>, bpp);</div>
<div class="line">      <span class="keywordflow">return</span> 0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a96f1d5eb41ec389c298ca7c386a49c41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::put_column </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>put image column </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">height</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy to </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01371">1371</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                        {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//collected bits</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bytesperpix;              <span class="comment">//in source</span></div>
<div class="line"></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, 1);</div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y + height - 1, 1);</div>
<div class="line">  <span class="keywordflow">if</span> (height &gt; ysize - y)</div>
<div class="line">    height = ysize - y;          <span class="comment">//clip to image</span></div>
<div class="line">  <span class="keywordflow">if</span> (height &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line">                                 <span class="comment">//source line</span></div>
<div class="line">  src = linebuf-&gt;<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + margins;</div>
<div class="line">                                 <span class="comment">//start of line</span></div>
<div class="line">  dest = image + xdim * (ymax - 1 - y);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {</div>
<div class="line">    src++;</div>
<div class="line">    bytesperpix = 3;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    bytesperpix = 1;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (bpp == 24 &amp;&amp; linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {</div>
<div class="line">    dest += x * bytesperpix;</div>
<div class="line">    src--;</div>
<div class="line">    <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">      *dest = *src++;</div>
<div class="line">      *(dest + 1) = *src++;</div>
<div class="line">      *(dest + 2) = *src++;</div>
<div class="line">      dest -= xdim;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 24) {</div>
<div class="line">    src--;</div>
<div class="line">    dest += x * bytesperpix;</div>
<div class="line">    <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">      pixel = *src++;</div>
<div class="line">      *dest = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">      *(dest + 1) = pixel;</div>
<div class="line">      *(dest + 2) = pixel;</div>
<div class="line">      dest -= xdim;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {</div>
<div class="line">    dest += x;                   <span class="comment">//offset</span></div>
<div class="line">    <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">      *dest = *src;</div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      dest -= xdim;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {</div>
<div class="line">    dest += x / 2;               <span class="comment">//offset on line</span></div>
<div class="line">    <span class="keywordflow">if</span> (x &amp; 1) {</div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">        *dest &amp;= 0xf0;           <span class="comment">//clean odd byte</span></div>
<div class="line">        *dest |= *src &amp; 0x0f;    <span class="comment">//and copy it</span></div>
<div class="line">        src += bytesperpix;</div>
<div class="line">        dest -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">        *dest &amp;= 0x0f;           <span class="comment">//clean odd byte</span></div>
<div class="line">        *dest |= *src &lt;&lt; 4;</div>
<div class="line">        src += bytesperpix;</div>
<div class="line">        dest -= xdim;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {</div>
<div class="line">    dest += x / 4;               <span class="comment">//offset on line</span></div>
<div class="line">    bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);        <span class="comment">//offset in byte</span></div>
<div class="line">    bit = 6 - bit - bit;         <span class="comment">//bit shift</span></div>
<div class="line">    pixel = ~(3 &lt;&lt; bit);         <span class="comment">//mask</span></div>
<div class="line">    <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//change 2 bits</span></div>
<div class="line">      *dest = (*dest &amp; <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>) | ((*src &amp; 3) &lt;&lt; bit);</div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      dest -= xdim;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    dest += x / 8;               <span class="comment">//offset on line</span></div>
<div class="line">    bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);        <span class="comment">//offset in byte</span></div>
<div class="line">    bit = 7 - bit;</div>
<div class="line">    pixel = ~(1 &lt;&lt; bit);</div>
<div class="line">    <span class="keywordflow">for</span> (; height &gt; 0; --height) {</div>
<div class="line">                                 <span class="comment">//change 1 bit</span></div>
<div class="line">      *dest = (*dest &amp; <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>) | ((*src &amp; 1) &lt;&lt; bit);</div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      dest -= xdim;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afbea9591218792f2be5e805a77ee167d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::put_line </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00189.html">IMAGELINE</a> *&#160;</td>
          <td class="paramname"><em>linebuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>margins</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>put image line </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>coord to start at </td></tr>
    <tr><td class="paramname">y</td><td>line to put </td></tr>
    <tr><td class="paramname">width</td><td>number of pixels to put </td></tr>
    <tr><td class="paramname">linebuf</td><td>line to copy from </td></tr>
    <tr><td class="paramname">margins</td><td>size of margins </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="a00819_source.html#l01222">1222</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                      {</div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *dest;                   <span class="comment">//destination pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bit;                      <span class="comment">//bit index</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//collected bits</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> pixperbyte;               <span class="comment">//pixels in a byte</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> bytesperpix;              <span class="comment">//in source</span></div>
<div class="line"></div>
<div class="line">  this-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (x, y, width);</div>
<div class="line">  <span class="keywordflow">if</span> (width &gt; xsize - x)</div>
<div class="line">    width = xsize - x;           <span class="comment">//clip to image</span></div>
<div class="line">  <span class="keywordflow">if</span> (width &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line">                                 <span class="comment">//source line</span></div>
<div class="line">  src = linebuf-&gt;<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + margins;</div>
<div class="line">                                 <span class="comment">//start of line</span></div>
<div class="line">  dest = image + xdim * (ymax - 1 - y);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {</div>
<div class="line">    src++;</div>
<div class="line">    bytesperpix = 3;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    bytesperpix = 1;</div>
<div class="line">  <span class="keywordflow">if</span> (bpp == 24 &amp;&amp; linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {</div>
<div class="line">    dest += x * bytespp;</div>
<div class="line">    width *= bytespp;</div>
<div class="line">    memmove (dest, src - 1, (<span class="keywordtype">unsigned</span>) width);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 24) {</div>
<div class="line">    src--;</div>
<div class="line">    dest += x * bytespp;</div>
<div class="line">    <span class="keywordflow">while</span> (width &gt; 0) {</div>
<div class="line">      pixel = *src++;</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">      width--;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp &gt; 4) {</div>
<div class="line">    dest += x;                   <span class="comment">//offset</span></div>
<div class="line">    <span class="keywordflow">if</span> (linebuf-&gt;<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> == 24) {</div>
<div class="line">      <span class="keywordflow">while</span> (width &gt; 0) {</div>
<div class="line">        *dest++ = *src;</div>
<div class="line">        src += 3;</div>
<div class="line">        width--;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">                                 <span class="comment">//easy way</span></div>
<div class="line">      memmove (dest, src, (<span class="keywordtype">unsigned</span>) width);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 4) {</div>
<div class="line">    dest += x / 2;               <span class="comment">//offset on line</span></div>
<div class="line">    <span class="keywordflow">if</span> (x &amp; 1) {</div>
<div class="line">      *dest &amp;= 0xf0;             <span class="comment">//clean odd byte</span></div>
<div class="line">      *dest++ |= *src &amp; 0x0f;    <span class="comment">//and copy it</span></div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      width--;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">while</span> (width &gt;= 2) {</div>
<div class="line">      pixel = *src &lt;&lt; 4;         <span class="comment">//left pixel</span></div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      pixel |= *src &amp; 0x0f;      <span class="comment">//right pixel</span></div>
<div class="line">      src += bytesperpix;</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">      width -= 2;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (width) {</div>
<div class="line">      *dest &amp;= 0x0f;             <span class="comment">//clean odd byte</span></div>
<div class="line">      *dest |= *src &lt;&lt; 4;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (bpp == 2) {</div>
<div class="line">    pixperbyte = 4;</div>
<div class="line">    dest += x / 4;               <span class="comment">//offset on line</span></div>
<div class="line">    bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 4);        <span class="comment">//offset in byte</span></div>
<div class="line">    width += bit;</div>
<div class="line">    pixel = *dest &gt;&gt; (8 - bit - bit);</div>
<div class="line">    <span class="keywordflow">while</span> (width &gt;= 4) {         <span class="comment">//until all done</span></div>
<div class="line">      <span class="keywordflow">for</span> (; bit &lt; 4; bit++) {</div>
<div class="line">        pixel &lt;&lt;= 2;             <span class="comment">//make space for new one</span></div>
<div class="line">        pixel |= *src &amp; 3;</div>
<div class="line">        src += bytesperpix;</div>
<div class="line">      }</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span></div>
<div class="line">      width -= 4;</div>
<div class="line">      bit = 0;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (width &gt; 0) {             <span class="comment">//until all done</span></div>
<div class="line">      <span class="keywordflow">for</span> (bit = 0; bit &lt; width; bit++) {</div>
<div class="line">        pixel &lt;&lt;= 2;             <span class="comment">//make space for new one</span></div>
<div class="line">        pixel |= *src &amp; 3;</div>
<div class="line">        src += bytesperpix;</div>
<div class="line">      }</div>
<div class="line">      pixel &lt;&lt;= (8 - bit - bit); <span class="comment">//shift rest</span></div>
<div class="line">                                 <span class="comment">//keep trainling bits</span></div>
<div class="line">      pixel |= *dest &amp; ((1 &lt;&lt; (8 - bit - bit)) - 1);</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    pixperbyte = 8;</div>
<div class="line">    dest += x / 8;               <span class="comment">//offset on line</span></div>
<div class="line">    bit = (<a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a>) (x % 8);        <span class="comment">//offset in byte</span></div>
<div class="line">    width += bit;</div>
<div class="line">    pixel = *dest &gt;&gt; (8 - bit);</div>
<div class="line">    <span class="keywordflow">while</span> (width &gt;= 8) {         <span class="comment">//until all done</span></div>
<div class="line">      <span class="keywordflow">for</span> (; bit &lt; 8; bit++) {</div>
<div class="line">        pixel &lt;&lt;= 1;             <span class="comment">//make space for new one</span></div>
<div class="line">        pixel |= *src &amp; 1;</div>
<div class="line">        src += bytesperpix;</div>
<div class="line">      }</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span></div>
<div class="line">      width -= 8;</div>
<div class="line">      bit = 0;</div>
<div class="line">    }</div>
<div class="line">    width -= bit;</div>
<div class="line">    <span class="keywordflow">if</span> (width &gt; 0) {             <span class="comment">//until all done</span></div>
<div class="line">      <span class="keywordflow">while</span> (width &gt; 0) {</div>
<div class="line">        pixel &lt;&lt;= 1;             <span class="comment">//make space for new one</span></div>
<div class="line">        pixel |= *src &amp; 1;</div>
<div class="line">        src += bytesperpix;</div>
<div class="line">        bit++;</div>
<div class="line">        width--;</div>
<div class="line">      }</div>
<div class="line">      pixel &lt;&lt;= (8 - bit);       <span class="comment">//shift rest</span></div>
<div class="line">                                 <span class="comment">//keep trainling bits</span></div>
<div class="line">      pixel |= *dest &amp; ((1 &lt;&lt; (8 - bit)) - 1);</div>
<div class="line">      *dest++ = <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;           <span class="comment">//new pixel</span></div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aadf539e1a16119867b48ba5128edd056"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void IMAGE::set_res </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>resolution</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>set resolution </p>

<p>Definition at line <a class="el" href="a00817_source.html#l00129">129</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                                   {</div>
<div class="line">      res = resolution;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a93a54ced5f2ee393fd3f634e31bbd145"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Pix * IMAGE::ToPix </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Methods to convert image types. Only available if Leptonica is available. </p>

<p>Definition at line <a class="el" href="a00819_source.html#l01501">1501</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                  {</div>
<div class="line">  <span class="keywordtype">int</span> width = this-&gt;<a class="code" href="a00187.html#aee6f16416203f7d678fc61ae22dedc6e">get_xsize</a>();</div>
<div class="line">  <span class="keywordtype">int</span> height = this-&gt;<a class="code" href="a00187.html#a3f8caf7062bd65eea2fc068fb3ec7c10">get_ysize</a>();</div>
<div class="line">  <span class="keywordtype">int</span> bpp = this-&gt;<a class="code" href="a00187.html#adc989f275743a36c9a9bce4b83c48c72">get_bpp</a>();</div>
<div class="line">  Pix* pix = pixCreate(width, height, bpp == 24 ? 32 : bpp);</div>
<div class="line">  l_uint32* data = pixGetData(pix);</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> line;</div>
<div class="line">  <span class="keywordflow">if</span> (bpp == 24) {</div>
<div class="line">    line.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width * 3);</div>
<div class="line">    line.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a>(24);</div>
<div class="line">  } <span class="keywordflow">else</span> {</div>
<div class="line">    line.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a>(width);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">switch</span> (bpp) {</div>
<div class="line">  <span class="keywordflow">case</span> 1:</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x) {</div>
<div class="line">        <span class="keywordflow">if</span> (line.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x])</div>
<div class="line">          CLEAR_DATA_BIT(data, x);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          SET_DATA_BIT(data, x);</div>
<div class="line">      }</div>
<div class="line">      data += pixGetWpl(pix);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">case</span> 8:</div>
<div class="line">    <span class="comment">// Greyscale just copies the bytes in the right order.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x)</div>
<div class="line">        SET_DATA_BYTE(data, x, line.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>[x]);</div>
<div class="line">      data += pixGetWpl(pix);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">case</span> 24:</div>
<div class="line">    <span class="comment">// Put the colors in the correct places in the line buffer.</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> y = height - 1 ; y &gt;= 0; --y) {</div>
<div class="line">      this-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a>(0, y, width, &amp;line, 0);</div>
<div class="line">      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> x = 0; x &lt; width; ++x, ++data) {</div>
<div class="line">        SET_DATA_BYTE(data, COLOR_RED, line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839adae6174e14bb1ea53a595df276e305b49d">RED_PIX</a>]);</div>
<div class="line">        SET_DATA_BYTE(data, COLOR_GREEN, line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839adaf7fbd44fe4c622eb157a5a7a06e241ae">GREEN_PIX</a>]);</div>
<div class="line">        SET_DATA_BYTE(data, COLOR_BLUE, line[x][<a class="code" href="a00817.html#ae5404c46e0b40591a45cc2d7998839ada3bcd25abcbaf8665a2d1adf21cdb4820">BLUE_PIX</a>]);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">default</span>:</div>
<div class="line">    <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a>(<span class="stringliteral">&quot;Cannot convert image to Pix with bpp = %d\n&quot;</span>, bpp);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">return</span> pix;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8925866607e7282397e798856c0b1ebc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> IMAGE::white_high </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>photo interp </p>

<p>Definition at line <a class="el" href="a00817_source.html#l00117">117</a> of file <a class="el" href="a00817_source.html">img.h</a>.</p>
<div class="fragment"><div class="line">                       {</div>
<div class="line">      <span class="keywordflow">return</span> photo_interp;</div>
<div class="line">    }</div>
</div><!-- fragment -->
</div>
</div>
<hr/><h2>Friends And Related Function Documentation</h2>
<a class="anchor" id="adf532c19ebf5ba5ec70086035b874dbc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void copy_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00270">270</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                            {</div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *copy;                   <span class="comment">//source pointer</span></div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//pixel index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> y;                       <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> bytesize;                <span class="comment">//no of bytes to copy</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcppb;                  <span class="comment">//pixels per byte</span></div>
<div class="line">  <a class="code" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a> aligned;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)</div>
<div class="line">    xext = dest-&gt;xsize - xdest;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)</div>
<div class="line">    yext = dest-&gt;ysize - ydest;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  srcppb = 8 / source-&gt;bpp;      <span class="comment">//pixels per byte</span></div>
<div class="line">  <span class="keywordflow">if</span> (source-&gt;bpp == dest-&gt;bpp || !adjust_grey)</div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  <span class="keywordflow">else</span> {</div>
<div class="line">    shift = source-&gt;bps - dest-&gt;bps;</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt; 0)</div>
<div class="line">      shift = -shift;            <span class="comment">//keep positive</span></div>
<div class="line">  }</div>
<div class="line">  aligned = source-&gt;bpp == dest-&gt;bpp;</div>
<div class="line">  <span class="keywordflow">if</span> (aligned &amp;&amp; srcppb != 0) {</div>
<div class="line">    aligned = xstart % srcppb == 0</div>
<div class="line">      &amp;&amp; xdest % srcppb == 0</div>
<div class="line">      &amp;&amp; (xext % srcppb == 0 || xdest + xext == dest-&gt;xsize);</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">for</span> (y = 0; y &lt; yext; y++) {</div>
<div class="line">    <span class="keywordflow">if</span> (ystart &gt;= ydest)</div>
<div class="line">      yoffset = y;               <span class="comment">//top down</span></div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">      yoffset = yext - y - 1;    <span class="comment">//bottom up</span></div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);</div>
<div class="line">    <span class="keywordflow">if</span> (aligned) {</div>
<div class="line">      bytesize = <a class="code" href="a00817.html#a0ee65bc5580141bc6e2f538915b8af70">COMPUTE_IMAGE_XDIM</a> (xext, source-&gt;bpp);</div>
<div class="line">      <span class="comment">//get bytes per line</span></div>
<div class="line">      <span class="keywordflow">if</span> (srcppb == 0)</div>
<div class="line">                                 <span class="comment">//do cheap move</span></div>
<div class="line">        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest * 3, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart * 3, (<span class="keywordtype">unsigned</span>) bytesize);</div>
<div class="line">      <span class="keywordflow">else</span></div>
<div class="line">                                 <span class="comment">//do cheap move</span></div>
<div class="line">        memmove (dest-&gt;image + (dest-&gt;ymax - 1 - ydest - yoffset) * dest-&gt;xdim + xdest / srcppb, source-&gt;image + (source-&gt;ymax - 1 - ystart - yoffset) * source-&gt;xdim + xstart / srcppb, (<span class="keywordtype">unsigned</span>) bytesize);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (shift == 0) {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext,</div>
<div class="line">          &amp;copyline);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (source-&gt;bpp &lt; dest-&gt;bpp) {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (source-&gt;bpp &lt;= shift</div>
<div class="line">        &amp;&amp; (source-&gt;bpp == 1 || source-&gt;bpp == 4)) {</div>
<div class="line">          <span class="keywordflow">if</span> (source-&gt;bpp == 1) {</div>
<div class="line">            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">              pixel++, copy++)</div>
<div class="line">            <span class="keywordflow">if</span> (*copy)</div>
<div class="line">              *copy = 0xff;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">              pixel++, copy++)</div>
<div class="line">                                 <span class="comment">//scale up</span></div>
<div class="line">            *copy = (*copy &lt;&lt; shift) | *copy;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">            pixel++)</div>
<div class="line">          *copy++ &lt;&lt;= shift;     <span class="comment">//scale up</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        source-&gt;<a class="code" href="a00187.html#ad3cdcd971f7c3089a0eb3b6ea968018b">get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">        <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a> + 1; pixel &lt; xext;</div>
<div class="line">          pixel++) {</div>
<div class="line">            *copy &gt;&gt;= shift;</div>
<div class="line">            copy += 3;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">          <span class="keywordflow">for</span> (pixel = 0, copy = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>; pixel &lt; xext;</div>
<div class="line">            pixel++)</div>
<div class="line">          *copy++ &gt;&gt;= shift;     <span class="comment">//scale down</span></div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;copyline, 0);</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ad524b64ac508eee1576a4787e1f5f457"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void enlarge_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00398">398</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                               {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> <a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                   <span class="comment">//current pixel</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> srcext;                  <span class="comment">//source extent</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xoffset;                 <span class="comment">//column index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//line index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//index in super pixel</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> startxindex;             <span class="comment">//initial x index</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xscale;                  <span class="comment">//x scale factor</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *src;                    <span class="comment">//source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *destpix;                <span class="comment">//dest pixels</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> bigline;             <span class="comment">//expanded line</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = dest-&gt;xsize;          <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize * scale - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">    xext = source-&gt;xsize * scale - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; dest-&gt;xsize - xdest)</div>
<div class="line">    xext = dest-&gt;xsize - xdest;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = dest-&gt;ysize;          <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize * scale - ystart)</div>
<div class="line">    yext = source-&gt;ysize * scale - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; dest-&gt;ysize - ydest)</div>
<div class="line">    yext = dest-&gt;ysize - ydest;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xindex = xstart % scale;       <span class="comment">//offset in super pixel</span></div>
<div class="line">  startxindex = xindex;</div>
<div class="line">  yindex = ystart % scale;</div>
<div class="line">                                 <span class="comment">//no of source pixels</span></div>
<div class="line">  srcext = (xext + xindex + scale - 1) / scale;</div>
<div class="line">  xstart /= scale;               <span class="comment">//actual start</span></div>
<div class="line">  ystart /= scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey) {</div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  }</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  bigline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> (xext * 3);</div>
<div class="line">  bigline.<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = dest-&gt;bpp == 24 ? source-&gt;bpp : dest-&gt;bpp;</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ystart++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart, srcext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest + yoffset, xext);</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart, srcext, &amp;copyline);</div>
<div class="line">    src = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    destpix = bigline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    xscale = scale;              <span class="comment">//enlargement factor</span></div>
<div class="line">    <span class="keywordflow">if</span> (source-&gt;bpp == 24 &amp;&amp; dest-&gt;bpp == 24) {</div>
<div class="line">      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;</div>
<div class="line">      src += source-&gt;bytespp) {</div>
<div class="line">        xoffset += xscale - xindex;</div>
<div class="line">        <span class="keywordflow">if</span> (xoffset &gt; xext)</div>
<div class="line">          xscale -= xoffset - xext;</div>
<div class="line">        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++) {</div>
<div class="line">          *destpix++ = *src;</div>
<div class="line">          *destpix++ = *(src + 1);</div>
<div class="line">          *destpix++ = *(src + 2);</div>
<div class="line">        }</div>
<div class="line">        xindex = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24)</div>
<div class="line">        src++;</div>
<div class="line">      <span class="keywordflow">for</span> (xoffset = 0, xindex = startxindex; xoffset &lt; xext;</div>
<div class="line">      src += source-&gt;bytespp) {</div>
<div class="line">        xoffset += xscale - xindex;</div>
<div class="line">        <span class="keywordflow">if</span> (xoffset &gt; xext)</div>
<div class="line">                                 <span class="comment">//clip to dest limit</span></div>
<div class="line">            xscale -= xoffset - xext;</div>
<div class="line">        <span class="keywordflow">if</span> (shift == 0)</div>
<div class="line">          pixel = *src;</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (shift &gt; 0)</div>
<div class="line">          pixel = *src &lt;&lt; shift;</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          pixel = *src &gt;&gt; (-shift);</div>
<div class="line">        <span class="keywordflow">for</span> (; xindex &lt; xscale; xindex++)</div>
<div class="line">          *destpix++ = pixel;    <span class="comment">//duplicate pixel</span></div>
<div class="line">        xindex = 0;</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (; yoffset &lt; yext &amp;&amp; yindex &lt; scale; yindex++, yoffset++) {</div>
<div class="line">      dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest + yoffset, xext, &amp;bigline, 0);</div>
<div class="line">    }</div>
<div class="line">    yindex = 0;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ace8abc71ce7c0bb82ff54377abf45e66"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void fast_reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00516">516</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                                   {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *<a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                  <span class="comment">//ptr to source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)</div>
<div class="line">    xext = (dest-&gt;xsize - xdest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)</div>
<div class="line">    yext = (dest-&gt;ysize - ydest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xfactor = xext % scale;        <span class="comment">//left overs</span></div>
<div class="line">  <span class="keywordflow">if</span> (xfactor == 0)</div>
<div class="line">    xfactor = scale;</div>
<div class="line">                                 <span class="comment">//destination pixels</span></div>
<div class="line">  destext = (xext + scale - 1) / scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey)</div>
<div class="line">                                 <span class="comment">//shift factor</span></div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  linesums = <span class="keyword">new</span> <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);</div>
<div class="line">    <span class="keywordflow">for</span> (xindex = destext * source-&gt;bytespp - 1; xindex &gt;= 0; xindex--)</div>
<div class="line">      linesums[xindex] = 0;      <span class="comment">//zero sums</span></div>
<div class="line">    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale</div>
<div class="line">    &amp;&amp; ystart + yoffset &lt; source-&gt;ysize; yindex += 3) {</div>
<div class="line">      source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);</div>
<div class="line">      pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span></div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums += 3) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">            *(sums + 1) += *pixel++;</div>
<div class="line">            *(sums + 2) += *pixel++;</div>
<div class="line">            pixel += 3;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (scale &amp; 1)</div>
<div class="line">            pixel -= 3;          <span class="comment">//correct position</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">          *(sums + 1) += *pixel++;</div>
<div class="line">          *(sums + 2) += *pixel++;</div>
<div class="line">          pixel += 3;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums++) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex += 2) {</div>
<div class="line">            *sums += *<a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">            pixel += 2;</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">if</span> (scale &amp; 1)</div>
<div class="line">            pixel--;             <span class="comment">//correct position</span></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex += 2) {</div>
<div class="line">          *sums += *<a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;</div>
<div class="line">          pixel += 2;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      yoffset += 3;              <span class="comment">//every 3 lines</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (yindex &gt; scale)</div>
<div class="line">      yoffset -= yindex - scale; <span class="comment">//back on right scale</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#ac60badda4f68e244ddba91eacbe1ce80" title="bits per pixel">bpp</a> = source-&gt;bpp;</div>
<div class="line">    pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">                                 <span class="comment">//pixels in block</span></div>
<div class="line">    divisor = ((yindex + 2) / 3) * ((scale + 1) / 2);</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt;= 0) {</div>
<div class="line">      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span></div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">                                 <span class="comment">//turn to destination value</span></div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) (*sums++ / divisor);</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ = *sums++</div>
<div class="line">          / (((yindex + 2) / 3) * ((xfactor + 1) / 2) &lt;&lt; (-shift));</div>
<div class="line">      <span class="comment">//lastone different</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((*sums++ &lt;&lt; shift) / divisor);</div>
<div class="line">      <span class="comment">//destination value</span></div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">                                 <span class="comment">//last one different</span></div>
<div class="line">        *pixel++ = (*(sums++) &lt;&lt; shift) / (((yindex + 2) / 3) * ((xfactor + 1) / 2));</div>
<div class="line">    }</div>
<div class="line">                                 <span class="comment">//put in destination</span></div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] linesums;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a987ea5c1e5f652311b99892283211a79"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00593.html#ab90d161af4ce92c48d61bb06c325308f">DLLSYM</a> void reduce_sub_image </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>source</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xstart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ystart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>yext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00187.html">IMAGE</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>xdest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>ydest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>&#160;</td>
          <td class="paramname"><em>scale</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00577.html#a7712a7e28433d0ade59219a129549b6f">BOOL8</a>&#160;</td>
          <td class="paramname"><em>adjust_grey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="a00819_source.html#l00658">658</a> of file <a class="el" href="a00819_source.html">imgs.cpp</a>.</p>
<div class="fragment"><div class="line">                              {</div>
<div class="line">  <a class="code" href="a00577.html#a2ba4d271e85baf0d333318985cb3bced">inT8</a> shift;                    <span class="comment">//shift factor</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xfactor;                 <span class="comment">//run on x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> divisor;                 <span class="comment">//total cell area</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> div2;                    <span class="comment">//total cell area divided by 2</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xindex, yindex;          <span class="comment">//into averaging square</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> xcoord;                  <span class="comment">//current x coord</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> destext;                 <span class="comment">//destination size</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> yoffset;                 <span class="comment">//current adjusted offset</span></div>
<div class="line">  <a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a> *<a class="code" href="a00187.html#a85c7d5cd8d14e7291e20c59e9a262174">pixel</a>;                  <span class="comment">//ptr to source pixels</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *sums;                   <span class="comment">//ptr to sums array</span></div>
<div class="line">  <a class="code" href="a00189.html">IMAGELINE</a> copyline;            <span class="comment">//copy of line</span></div>
<div class="line">  <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a> *linesums;               <span class="comment">//averaging sums</span></div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">if</span> (xstart &lt; 0 || ystart &lt; 0 || xdest &lt; 0 || ydest &lt; 0)</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0)</div>
<div class="line">    xext = source-&gt;xsize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; source-&gt;xsize - xstart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      xext = source-&gt;xsize - xstart;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &gt; (dest-&gt;xsize - xdest) * scale)</div>
<div class="line">    xext = (dest-&gt;xsize - xdest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &lt;= 0)</div>
<div class="line">    yext = source-&gt;ysize;        <span class="comment">//default to all</span></div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; source-&gt;ysize - ystart)</div>
<div class="line">                                 <span class="comment">//clip to smallest</span></div>
<div class="line">      yext = source-&gt;ysize - ystart;</div>
<div class="line">  <span class="keywordflow">if</span> (yext &gt; (dest-&gt;ysize - ydest) * scale)</div>
<div class="line">    yext = (dest-&gt;ysize - ydest) * scale;</div>
<div class="line">  <span class="keywordflow">if</span> (xext &lt;= 0 || yext &lt;= 0)</div>
<div class="line">    <span class="keywordflow">return</span>;                      <span class="comment">//nothing to do</span></div>
<div class="line"></div>
<div class="line">  xfactor = xext % scale;        <span class="comment">//left overs</span></div>
<div class="line">  <span class="keywordflow">if</span> (xfactor == 0)</div>
<div class="line">    xfactor = scale;</div>
<div class="line">                                 <span class="comment">//destination pixels</span></div>
<div class="line">  destext = (xext + scale - 1) / scale;</div>
<div class="line">  <span class="keywordflow">if</span> (adjust_grey)</div>
<div class="line">                                 <span class="comment">//shift factor</span></div>
<div class="line">    shift = dest-&gt;bps - source-&gt;bps;</div>
<div class="line">  <span class="keywordflow">else</span></div>
<div class="line">    shift = 0;                   <span class="comment">//no adjustment</span></div>
<div class="line">  linesums = <span class="keyword">new</span> <a class="code" href="a00577.html#aba1f582fd0168f3ff9225d8c90fa9eb8">inT32</a>[destext * source-&gt;bytespp];</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">for</span> (yoffset = 0; yoffset &lt; yext; ydest++) {</div>
<div class="line">    source-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xstart, ystart + yoffset, xext);</div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#a46c97959964cd92e2dc1a4f6248dfac3">check_legal_access</a> (xdest, ydest, destext);</div>
<div class="line">    <span class="keywordflow">for</span> (xindex = 0; xindex &lt; (destext) * source-&gt;bytespp; xindex++)</div>
<div class="line">      linesums[xindex] = 0;      <span class="comment">//zero sums</span></div>
<div class="line">    <span class="keywordflow">for</span> (yindex = 0; yindex &lt; scale &amp;&amp; ystart + yoffset &lt; source-&gt;ysize;</div>
<div class="line">    yindex++) {</div>
<div class="line">      source-&gt;<a class="code" href="a00187.html#a44de5c052ec0829de2aff958756beb0f">fast_get_line</a> (xstart, ystart + yoffset, xext, &amp;copyline);</div>
<div class="line">      pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;   <span class="comment">//start of line</span></div>
<div class="line">      <span class="keywordflow">if</span> (source-&gt;bpp == 24) {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums += 3) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++) {</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">            *(sums + 1) += *pixel++;</div>
<div class="line">            *(sums + 2) += *pixel++;</div>
<div class="line">          }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++) {</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">          *(sums + 1) += *pixel++;</div>
<div class="line">          *(sums + 2) += *pixel++;</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="keywordflow">for</span> (xcoord = 1, sums = linesums; xcoord &lt; destext;</div>
<div class="line">        xcoord++, sums++) {</div>
<div class="line">          <span class="keywordflow">for</span> (xindex = 0; xindex &lt; scale; xindex++)</div>
<div class="line">            *sums += *pixel++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">for</span> (xindex = 0; xindex &lt; xfactor; xindex++)</div>
<div class="line">          *sums += *pixel++;</div>
<div class="line">      }</div>
<div class="line">      yoffset++;                 <span class="comment">//next line</span></div>
<div class="line">    }</div>
<div class="line">    copyline.<a class="code" href="a00189.html#a4cc90adaaa649d7fd24b35f57c517b7c">init</a> ();            <span class="comment">//set pixels back to array</span></div>
<div class="line">    copyline.<a class="code" href="a00189.html#a6037be8392ca69c8514ccc78c92c4f26">set_bpp</a> (source-&gt;bpp);</div>
<div class="line">    pixel = copyline.<a class="code" href="a00189.html#a0bf967eba44b6352a126f74c1a057172" title="image pixels">pixels</a>;</div>
<div class="line">    divisor = yindex * scale;</div>
<div class="line">    <span class="keywordflow">if</span> (divisor == 0) {</div>
<div class="line">      <a class="code" href="a00607.html#a0c2bcd4462ec67ab0971b34a0f610f55">tprintf</a></div>
<div class="line">        (<span class="stringliteral">&quot;Impossible:divisor=0!, yindex=%d, scale=%d, yoffset=%d,yext=%d\n&quot;</span>,</div>
<div class="line">        yindex, scale, yoffset, yext);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (shift &lt;= 0) {</div>
<div class="line">      divisor &lt;&lt;= (-shift);      <span class="comment">//do greyscale correction</span></div>
<div class="line">      div2 = divisor / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / divisor);</div>
<div class="line">      <span class="comment">//turn to destination value</span></div>
<div class="line">      div2 = (yindex * xfactor &lt;&lt; (-shift)) / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ =</div>
<div class="line">          (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + *sums++) / (yindex * xfactor &lt;&lt; (-shift)));</div>
<div class="line">      <span class="comment">//lastone different</span></div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">      div2 = divisor / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (sums = linesums, xindex = (destext - 1) * source-&gt;bytespp;</div>
<div class="line">        xindex &gt; 0; xindex--)</div>
<div class="line">      *pixel++ = (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / divisor);</div>
<div class="line">      <span class="comment">//destination value</span></div>
<div class="line">      div2 = (yindex * xfactor) / 2;</div>
<div class="line">      <span class="keywordflow">for</span> (xindex = source-&gt;bytespp; xindex &gt; 0; xindex--)</div>
<div class="line">        *pixel++ =</div>
<div class="line">          (<a class="code" href="a00577.html#a458fe97f82495945f8071bb3c18d1783">uinT8</a>) ((div2 + (*sums++ &lt;&lt; shift)) / (yindex * xfactor));</div>
<div class="line">      <span class="comment">//last one different</span></div>
<div class="line">    }</div>
<div class="line">                                 <span class="comment">//put in destination</span></div>
<div class="line">    dest-&gt;<a class="code" href="a00187.html#afbea9591218792f2be5e805a77ee167d">put_line</a> (xdest, ydest, destext, &amp;copyline, 0);</div>
<div class="line">  }</div>
<div class="line">  <span class="keyword">delete</span> [] linesums;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/mnt/data/src/tesseract-ocr/image/<a class="el" href="a00817_source.html">img.h</a></li>
<li>/mnt/data/src/tesseract-ocr/image/<a class="el" href="a00819_source.html">imgs.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="a00187.html">IMAGE</a></li>
    <li class="footer">Generated on Thu Nov 1 2012 20:19:59 for Tesseract by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
